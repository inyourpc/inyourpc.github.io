<!DOCTYPE html>
<html>
                <meta charset="utf-8">
                <title>Desert Rush</title>
                
<meta name="viewport" content="width=device-width,user-scalable=1.0,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0">

<style >

</style>
              <script type="text/javascript" src="preloadjs-NEXT.min.js"></script>
              <script src="createjsLatest.js"></script>
              <script type="text/javascript" src="tweenmax.js"></script>
              <script type="text/javascript" src="howler.js"></script>
              <script type="text/javascript" src="BitmapFontExperiment.js"></script>
			  <script src="gd.js"></script>

             <head>
             <style>    
                canvas {
                    position: absolute;
                    top: 0px;
                    cursor: url(images/cc.png), auto;

                }
                canvas {
                position: absolute;
                  left: 0%;
                  top:0%;
              }
                .pointer         { cursor: url(images/hand.png), auto; }

                @font-face {
                    
                    font-family: "Gretoon Highlight";
                    src: url(comic2.ttf) format("truetype");
                }
              </style>
           </head>
            <body bgcolor="#1d414c">
            <div id="fb-root"></div>
            </body>
        <script>
         var loading1,stage,playButton,optionsButton,background,blueHorse,whiteHorse,zebra,banner,lizard;
         var isSimilar,levelSelection,iSymbolButton,musicButton,musicButtond,settingButton,levelButton,lock,levelSelectionPause;
         var pauseScreenMusicButton,pauseScreenMusicButtond,lvlSSExitButton;
         var levelTileContainer = new Array();
         var sonicExists;
         var levelNumber;
         var bgMusic;
         var locked = [];
         var numberText = [];
         var locker = new Array();
         var queue = new createjs.LoadQueue();
         var shape = new Array();
         var grid = new Array();
         var htpGrid = [];
         var htpTile = [[5,6,6],[7,4,6],[5,6,7],[6,7,3],[6,5,3],[7,6,5]];
         var htpNumber;
         var tile = new Array();
         var checkSimilar = new Array();
         var similarTiles = new Array();
         var connectingLines = new Array();
         var transitionNum = new Array();
         var bombNum =  new Array();
         var destination = new Array();
         var newTiles = new Array();
         var loadingBarOverText,destinationBarOverText;
         var f,t,btm,bkw,bf,bb,tf,tb;
         var ff,tt,btmm,bkww,bff,bbb,tff,tbb;
         var alphaExists = false;
         var xx,yy;
         var k;
         var star,stared,mushroomBarStar,potionBarStar,mushroomBarStarIsBlinking = false, potionBarStarIsBlinking = false,potionStarExplosion,mushroomStarExplosion,enemyStarExplosion,tileStar,numOfStars = [];
         var clickOnce = false;
         var clickOnce1 = false;
         var clickOnce2 = false;
         var clickOnce3 = false;
         var enemyMove;
         var miniArcher,miniGunman;
         var miniPotionFlask;
         var miniMushroom;
         var sheild,heroPowerBar,heroBarFrame;
         var sonicSheild;
         var archerHeroPowerBar,archerSheild;
         var gunmanBar,amazonBar,horseBar;
         var unsetTheVar = false;
         var htpSameTile = [];
         var htpNextButton,htpNextButton1,htpNextButton2,htpNextButton3;
         //sound var
         var milAttack = [],milWon = [],horseSound = [],gunmanDead = [],archerAttackM = [],archWon = [],indianIsHit = [],indianAttackM = [];
         //
          var lcMushroom,lcPotion;
          var bitmapText,thinBitmapText;
          var fightText;
          var congratulationsText;
          var projectileText;
          var hero;
          var levelHero;
          var villian;
          var levelVillian;
          var heheText;
          var htpChainText; 
          var htpGoalText; 
          var htpNoteText;
          var htpImpNotes;
          //loading bar variables start
          var filesloaded = 0;
          var loading1;
          var right;
          var loadProgressLabel;
          var loadProgressLabel1;
          var loadingBarContainer;
          var loading;
          var loadingBar;
          var loadingBarOver,destinationBarOver;
          var loadingBarOverContainer = new createjs.Container();
          var destinationBarOverContainer = new createjs.Container();
          var loading_progess;
          var loading_screen;
          var loadingBarHeight;
          var loadingBarWidth;
          var LoadingBarColor;
          var inGameEvent = [];
          var gameOverHappened = false;
          var htpContainer = new createjs.Container();
          var htpTilesContainer = new createjs.Container();
          var whiteHorseContainer = new createjs.Container();
          var blueHorseContainer = new createjs.Container();
          var zebraContainer = new createjs.Container();
          var lizardContainer = new createjs.Container();
          var lizardContainerIn = new createjs.Container();
          var archerContainer = new createjs.Container();
          var amazonContainer = new createjs.Container();
          var gunmanContainer = new createjs.Container();
          var gasAttackContainer = new createjs.Container();
          var mudAttackContainer = new createjs.Container();
          var gameOver,exitButton,nextLevelButton;
          var gameOverContainer = new createjs.Container();
          var amazonPowerBarContainer = new createjs.Container();
          var sonicBarPowerContainer = new createjs.Container();
          var archerPowerBarContainer = new createjs.Container();
          var gasPowerBarContainer = new createjs.Container();
          var gunmanPowerBarContainer = new createjs.Container();
          var mudPowerBarContainer = new createjs.Container();
          var gasPowerBar,mudPowerBar,amazonPowerBar,gasSheild,mudSheild,amazonSheild;
          var archerPowerBar,gunmanPowerBarShape,gasPowerBarShape,mudPowerBarShape,amazonPowerBarShape;
          var mushroomEatenBar;
          var mushroomEatenBarClone,potionDrankBarClone;
          var potionDrankBar;
          var potionDrankContainer;
          var mushroomEatenText;
          var potionDrankText;
          var mushroomBarContainer =  new createjs.Container();
          var powerFrame = new createjs.Shape();
          var pauseScreenContainer = new createjs.Container(),thinSheet,pauseScreenPlayButton,logo,pauseScreenSettingButton,pauseScreenExitButton;
          var keyPressed;
          var enemy;
          var levelCompletePanel,lightening;
          var levelcompleteContainer = new createjs.Container();
          var enemyBar;
          var klone = new Array();
          var arrow,spear;
          var mud;
          var archerAttacked = false,archerAttackAllowed = false,gunmanAttackAllowed = false;
          var whMudAttack = false,mudAttackAllowed = false;
          var amazonAttacked = false,amazonAttackAllowed = false;
          var gasAttacked=false,sonicAttacked=false,mushroomEaten=false,potionDrank=false;
          var gasAttackAllowed = false,sonicAttackAllowed = false, mushroomEatenAllowed = false, potionDrankAllowed = false;
          var mudPower = [],gasPower = [],sonicPower = [],potionPower = [],mushroomPower = [];
          var heart;
          var character = [];
          var sonicContainer = new createjs.Container();
          var targetMovingBar;
          var archerAttackPower;
          var potionBar;
          var enemyContainer ;
          var distance,destination;
          var minuteMushroom;
          var sonicPowerBar,gunmanPowerBar;
          var deadChecking = true;
          var mainLoadingBar,mainLoadingBarFrame;
          var gasBar,mudBar,blueBar,flag;
          var gunmanSheild,miniAmazon;
          var currentLevel;
          var newTilesTween;
          var firstTime = true;
          var clickAllowed = true;
          var pencilCursor;
          var panel,htpConnectingLines = [];
          var text;
          var lockStatus,starStatus;
          var tileBg = [];
          var pauseScreenBg;
          var colorOfChain;
          var bitmapFont,thinBitmapFont;
          var musicToPlay;
          var levelCompleteEnemy;
          var stars = 0;
          var shape_O = [];
          var tileBgImg;
          var helpMe = false;
          var rotationDone = true;
          var lMusic;
          var lizardSfx;
          var snakeSfx;
          var chameleonSfx;
          var toolM,zebAM,gemA,gemB,gemC,gemD,tilePop,unMatch,lvlCom,gemSpawn,MilHit,archOnMush,indOnMush,fire,archDead;
          var arrowShot;
          var javelinShot;
          var indianWon;
          var bClickM;
          var projectileSound;
          var inGM;
          var gOvrM;
          var archIsHitM;
          var clickSeasme;
          var archerIsDead = false;
          var gunmanIsDead = false;
          var indianIsDead = false;
          
          if ("ontouchstart" in document.documentElement)
          {
            //alert("It's a touch screen device.");
            var touchScreen = true;
          }
          else
          {
           //alert("Others devices");
           var touchScreen = false;
          }
          for(var i=1;i<36;i++){
              numberText[i] = numberText[i] = new createjs.Text(i,"20px Gretoon Highlight", "black");
          }
          lMusic = new Howl({
                                  urls: ['sound/LM.mp3', 'sound.ogg', 'sound.mp3'],
                                  autoplay: true,
                                  loop: false,
                                  onend: function() {
                                    //bgMusic.play();
                                  }
                      });
          bgMusic = new Howl({
                                      urls: ['sound/bg.mp3', '',],
                                      autoplay: false,
                                      loop: false,
                                      volume: 0.5,
                                      onend: function() {
                                        bgMusic.play();
                                      }
                                    });

          
          //archer sprite
          var archerAttackData;
          var archerAttackSprite;
          var archerAttack;
          var miniArc;
          var amazonHunterData ;
          var amazonAttackSprite;
          var amazonAttack;
          var miniA;
          //
          var gunmanData;
          var gunmanAttackSprite;
          var gunmanAttack;
          var miniG;
           var sonicData;
          var sonicSprite;
          var sonicAttack;
          var sonicWaveData;
          var sonicWaveSprite;
          var sonicWave;
           var mudExplosionData;
          var mudExplosionSprite;
          var mudExplosion;
          var mudExplosion1;
          //
          var starExplosionData;
          var starExplosionSprite;
          var starExplosion;
          potionStarExplosion;
          mushroomStarExplosion;
          enemyStarExplosion;
           var blueEyesData;
          var blueEyesMovementSprite;
          var blueEyesMovement;
          //blueeye end
          //laoding horse
           var loadingHorseData = {
                    images: ["images/loadingPage/loadingHorse.png"],
                    frames: {width:200, height:135,spacing:0, margin:0},
                    animations: {
                        stop:0,
                        walk:[0,3,"eyeMovement",0.3]
                        }
                    };
          var loadingHorseSprite = new createjs.SpriteSheet(loadingHorseData);
          var loadingHorse = new createjs.Sprite(loadingHorseSprite);
          loadingHorse.gotoAndPlay("walk");
          //loading horse
           var whiteEyesData;
          var whiteEyesMovementSprite;
          var whiteEyesMovement;
          var zebraEyesData;
          var zebraEyesMovementSprite;
          var zebraEyesMovement;
          //pauseScreen
          var pauseScreenData;
          var pauseScreenSprite;
          var pauseScreen;
          //zebraeyeend
           var lizardEyesData;
          var lizardEyesMovementSprite;
          var lizardEyesMovement;
          var birdSpriteLeftData;
          var birdSpriteLeftSprite;
          var birdSpriteLeftMovement;
          var birdSpriteLeftMovement1;
          var birdSpriteLeftMovement2;
          var birdSpriteLeftMovement3;
          var birdSpriteLeftMovement4;
          var birdieData = [];
          var birdieSpriteLeftSprite = [];
          var birdie = [];
          //chameleon Sprite start
           var chameleonSpriteLeftData;
          var chameleonSpriteLeftSprite;
          var chameleonMovement;
          var chameleonMovementIn,snakeMovementIn;
          //chameleon sprite end
          //snakeSprite
           var snakeSpriteLeftData;
          var snakeSpriteLeftSprite;
          var snakeMovement;
          //snake end
           var whAttackData;
          var whAttackSprite;
          var mudAttack;
          //
           var zebraGasAttackData;
          var zebraGasAttackSprite;
          var gasAttack;
          //
          var gasBombData;
          var gasBombSprite;
          var gasBomb;
          var mudData;
          var mudDataSprite;
          var mudThrow;
          //
         var tilesAroundTransitionTile = new Array();
         var tilesAroundBomb = new Array();
         var tileOver,tileOverTween;
          var canvas = document.createElement( navigator.isCocoonJS ? "screencanvas" : "canvas");
                      W=1000;
                      H=625;
                      canvas.width = W;
                      canvas.height = H;
                      var context = canvas.getContext("2d");
                      document.body.appendChild(canvas);
                      c=createjs;
                      stage = new createjs.Stage(canvas);
                      createjs.Touch.enable(stage);
                      stage.enableMouseOver();
                        window.addEventListener('resize',
                        function(evt) {
                        scaleDynamically(evt);
                            },
                         false);
                    function scaleDynamically(e){
                        scaleFactor= Math.min(window.innerWidth/W, window.innerHeight/H);
                        if(scaleFactor>1){
                            scaleFactor=1;
                        }
                        canvas.width = W*scaleFactor;
                        canvas.height = H*scaleFactor;
                        context = canvas.getContext( '2d' );
                        stage.scaleX=stage.scaleY=scaleFactor;
                           //enterquestionDom
                        }
                        createjs.Ticker.setInterval(40);
                      createjs.Ticker.addEventListener("tick", tick);
                      scaleDynamically(null);

                    queue.addEventListener("fileload", handleFileLoad);
                    queue.addEventListener("complete", handleComplete);
                    queue.loadFile({id:"loading_screen", src:"images/loadingPage/loadingBackground.png"});
                    zebraEyesData = {
                    images: ["images/Main screen contents/zebraEyes.png"],
                    frames: {width:280, height:197,spacing:0, margin:0},
                    animations: {
                        eyeOpen:[0,0,"eyeMovement",0.03],
                        eyeClose:1,
                        eyeMovement:[0,1,"eyeOpen",0.3]
                        }
                    };
                    zebraEyesMovementSprite = new createjs.SpriteSheet(zebraEyesData);
                    zebraEyesMovement = new createjs.Sprite(zebraEyesMovementSprite, "eyeMovement");
                    //whiteeyes
                    whiteEyesData = {
                              images: ["images/Main screen contents/whiteEyes.png"],
                              frames: {width:220, height:197,spacing:0, margin:0},
                              animations: {
                                  eyeOpen:[0,0,"eyeMovement",0.01],
                                  eyeClose:1,
                                  eyeMovement:[0,1,"eyeOpen",0.5]
                                  }
                              };
                    whiteEyesMovementSprite = new createjs.SpriteSheet(whiteEyesData);
                    whiteEyesMovement = new createjs.Sprite(whiteEyesMovementSprite, "eyeMovement");
                    //whiteeyesend
                    blueEyesData = {
                              images: ["images/Main screen contents/blueEyes.png"],
                              frames: {width:220, height:301,spacing:0, margin:0},
                              animations: {
                                  eyeOpen:[0,0,"eyeMovement",0.02],
                                  eyeClose:1,
                                  eyeMovement:[0,1,"eyeOpen",0.2]
                                  }
                              };
                    blueEyesMovementSprite = new createjs.SpriteSheet(blueEyesData);
                    blueEyesMovement = new createjs.Sprite(blueEyesMovementSprite, "eyeMovement");
                    //blueeye end
                                  lizardEyesData = {
                              images: ["images/Main screen contents/lizardEyes.png"],
                              frames: {width:211, height:127,spacing:0, margin:0},
                              animations: {
                                  eyeOpen:[0,0,"eyeMovement",0.025],
                                  eyeClose:1,
                                  eyeMovement:[0,1,"eyeOpen",0.25]
                                  }
                              };
                    
                    lizardEyesMovementSprite = new createjs.SpriteSheet(lizardEyesData);
                    lizardEyesMovement = new createjs.Sprite(lizardEyesMovementSprite, "eyeMovement");
                    archerAttackData = {
          images: ["images/Archer/Archer.png"],
          frames: {width:200, height:202,spacing:0, margin:0},
          animations: {
              attack:[5,9,"stand",0.4],
              stand:5,
              again:[0,4,"stand",0.2],
              hit:[0,4,"again",0.2]
              }
          };
          archerAttackSprite = new createjs.SpriteSheet(archerAttackData);
          archerAttack = new createjs.Sprite(archerAttackSprite);
          miniArc = new createjs.Sprite(archerAttackSprite);
          archerAttack.gotoAndPlay("stand");
           //amazon hunter sprite
          amazonHunterData = {
                    images: ["images/amazonHunter/amazon.png"],
                    frames: {width:198.5, height:203,spacing:0, margin:0},
                    animations: {
                       
                        attack:[5,8,"stand",0.4],
                        stand:5,
                        again:[0,4,"stand",0.2],
                        hit:[0,4,"again",0.2]
                        }
                    };
          amazonAttackSprite = new createjs.SpriteSheet(amazonHunterData);
          amazonAttack = new createjs.Sprite(amazonAttackSprite);
          miniA = new createjs.Sprite(amazonAttackSprite);
          amazonAttack.gotoAndPlay("stand");
          //
          gunmanData = {
                    images: ["images/gunman/Gunmen.png"],
                    frames: {width:200, height:203,spacing:0, margin:0},
                    animations: {
                        stand:4,
                        attack:[4,7,"stand",0.4],
                        again:[0,3,"stand",0.2],
                        hit:[0,3,"again",0.2]
                        }
                    };
          gunmanAttackSprite = new createjs.SpriteSheet(gunmanData);
          gunmanAttack = new createjs.Sprite(gunmanAttackSprite);
          miniG = new createjs.Sprite(gunmanAttackSprite);
          gunmanAttack.gotoAndPlay("stand");
          //loading bar variables end
          sonicData = {
                    images: ["images/sonicAttack/sonicAttack.png"],
                    frames: {width:200, height:212,spacing:0, margin:0},
                    animations: {
                        stand:4,
                        fly:[4,8,"stand",0.4],
                        hitAgain:[0,3,"stand",0.4],
                        hit:[0,3,"hitAgain",0.4]
                        
                        }
                    };
          sonicSprite = new createjs.SpriteSheet(sonicData);
          sonicAttack = new createjs.Sprite(sonicSprite);
          sonicAttack.gotoAndPlay("stand");
          sonicWaveData = {
                    images: ["images/sonicAttack/sonicWave.png"],
                    frames: {width:180, height:101,spacing:0, margin:0},
                    animations: {
                        stand:3,
                        fly:[0,3,"stand",0.2]
                        }
                    };
          sonicWaveSprite = new createjs.SpriteSheet(sonicWaveData);
          sonicWave = new createjs.Sprite(sonicWaveSprite);
          sonicContainer.addChild(sonicAttack,sonicWave);
          //explosion sprites
          mudExplosionData = {
                   images: ["images/Smoke.png"],
                   frames: {"height": 94, "regX": 0, "count": 20, "regY": 0, "width": 96},
                   animations: {
                                stop:20,
                                jump: [10, 19,"stop",1],
                                boom: [0, 19,"stop",1]
                                },
                  };
          mudExplosionSprite = new createjs.SpriteSheet(mudExplosionData);
          mudExplosion = new createjs.Sprite(mudExplosionSprite,"boom");
          mudExplosion1 = new createjs.Sprite(mudExplosionSprite,"jump");
          //
          starExplosionData = {
                   images: ["images/levelComplete/download.png"],
                   frames: {"height": 840,"width": 400,spacing:0, margin:0},
                   animations: {
                                 stop:16,
                                jump: [10, 19,"stop",1],
                                boom: [0, 15,"stop",0.5]
                                },
                  };
          starExplosionSprite = new createjs.SpriteSheet(starExplosionData);
          starExplosion = new createjs.Sprite(starExplosionSprite,"boom");
          potionStarExplosion = starExplosion.clone();
          mushroomStarExplosion = starExplosion.clone();
          enemyStarExplosion = starExplosion.clone();
          //eyes sprtie
          //pauseScreen
          pauseScreenData = {
                    images: ["images/pauseScreen/pauseScreen.png"],
                    frames: {width:1000, height:802,spacing:0, margin:0},
                    animations: {
                        stop:0,
                        move:[0,10,"move",0.4]
                        }
                    };
          pauseScreenSprite = new createjs.SpriteSheet(pauseScreenData);
          pauseScreen = new createjs.Sprite(pauseScreenSprite);
          //zebraeyeend
          
          //eyes spriteComplete
          //birdsprite mainpage
          birdSpriteLeftData = {
                    images: ["images/Main screen contents/bird 1.png"],
                    frames: {width:100, height:122,spacing:0, margin:0},
                    animations: {
                        eyeMovement:[0,7,"eyeMovement",0.5]
                        }
                    };
          birdSpriteLeftSprite = new createjs.SpriteSheet(birdSpriteLeftData);
          birdSpriteLeftMovement = new createjs.Sprite(birdSpriteLeftSprite, "eyeMovement");
          birdSpriteLeftMovement1 = new createjs.Sprite(birdSpriteLeftSprite, "eyeMovement");
          birdSpriteLeftMovement2 = new createjs.Sprite(birdSpriteLeftSprite, "eyeMovement");
          birdSpriteLeftMovement3 = new createjs.Sprite(birdSpriteLeftSprite, "eyeMovement");
          birdSpriteLeftMovement4 = new createjs.Sprite(birdSpriteLeftSprite, "eyeMovement");
          birdSpriteLeftMovement.play();
          //left end
          //birdsprite mainpageend
          for(var i=5;i<10;i++){
            birdieData[i] =  {
                      images: ["images/birds/birdie"+i+".png"],
                      frames: {width:110, height:80},
                      animations: {
                         
                          eyeMovement:[0,1,"eyeMovement",0.25]
                          }
                      };
            birdieSpriteLeftSprite[i] = new createjs.SpriteSheet(birdieData[i]);
            birdie[i] = new createjs.Sprite(birdieSpriteLeftSprite[i], "eyeMovement");
            birdie[i].play();
          }
          //chameleon Sprite start
           chameleonSpriteLeftData = {
                    images: ["images/Main screen contents/chameleon.png"],
                    frames: {width:100, height:74,spacing:0, margin:0},
                    animations: {
                        eyeMovement:[0,10,"eyeMovement",0.3]
                        }
                    };
          chameleonSpriteLeftSprite = new createjs.SpriteSheet(chameleonSpriteLeftData);
          chameleonMovement = new createjs.Sprite(chameleonSpriteLeftSprite, "eyeMovement");
          chameleonMovementIn,snakeMovementIn;
          //chameleon sprite end
          //snakeSprite
          snakeSpriteLeftData = {
                    images: ["images/Main screen contents/snake.png"],
                    frames: {width:100, height:113,spacing:0, margin:0},
                    animations: {
                        eyeMovement:[0,9,"eyeMovement",0.3]
                        }
                    };
          snakeSpriteLeftSprite = new createjs.SpriteSheet(snakeSpriteLeftData);
          snakeMovement = new createjs.Sprite(snakeSpriteLeftSprite, "eyeMovement");
          //snake end
           whAttackData = {
                    images: ["images/mudAttack/bhAttack.png"],
                    frames: {width:200, height:212.1,spacing:0, margin:0},
                    animations: {
                        stand:4,
                        attack:[4,20,"stand",0.5],
                        hitAgain:[0,3,"stand",0.4],
                        hit:[0,3,"hitAgain",0.4]
                        }
                    };
          whAttackSprite = new createjs.SpriteSheet(whAttackData);
          mudAttack = new createjs.Sprite(whAttackSprite);
          mudAttack.gotoAndPlay("stand");
          //
           zebraGasAttackData = {
                    images: ["images/gasAttack/gasAttack.png"],
                    frames: {width:210, height:212,spacing:0, margin:0},
                    animations: {
                        smile:14,
                        stand:4,
                        attack:[4,14,"smile",0.4],
                        hitAgain:[0,3,"stand",0.4],
                        hit:[0,3,"hitAgain",0.4]
                        }
                    };
          zebraGasAttackSprite = new createjs.SpriteSheet(zebraGasAttackData);
          gasAttack = new createjs.Sprite(zebraGasAttackSprite);
          gasAttack.gotoAndPlay("stand");
          //
          gasBombData = {
                    images: ["images/gasAttack/gasBomb.png"],
                    frames: {width:300, height:302,spacing:0, margin:0},
                    animations: {
                        stand:0,
                        last:4,
                        attack:[0,4,"last",0.4]
                        }
                    };
          gasBombSprite = new createjs.SpriteSheet(gasBombData);
          gasBomb = new createjs.Sprite(gasBombSprite);
          gasBomb.gotoAndPlay("attack");
          gasBomb.alpha = 0;
          //
          mudData = {
            images: ["images/mudAttack/mud.png"],
                    frames: {width:200, height:202,spacing:0, margin:0},
                    animations: {
                        stand:0,
                        last:6,
                        attack:[0,6,"last",0.4]
                        }
                    };
          mudDataSprite = new createjs.SpriteSheet(mudData);
          mudThrow = new createjs.Sprite(mudDataSprite);
          //
                    queue.loadFile({id:"bitmap", src:"font/cooper.png"});
                    queue.loadFile({id:"xml", src:"font/cooper.xml"});
                    queue.loadFile({id:"thinBitmap", src:"font/archer.png"});
                    queue.loadFile({id:"thinXml", src:"font/archer.xml"});
                    queue.loadFile({id:"playButton", src:"images/Button 4.png"});
                    queue.loadFile({id:"logo", src:"images/logo.png"});
                    queue.loadFile({id:"optionsButton", src:"images/Button 5.png"});
                    queue.loadFile({id:"background", src:"images/Main screen contents/background.png"});
                    queue.loadFile({id:"lizard", src:"images/Main screen contents/lizard.png"});
                    queue.loadFile({id:"banner", src:"images/Banner.png"});
                    queue.loadFile({id:"levelSelection", src:"images/level selection/levelSelection.png"});
                    queue.loadFile({id:"levelButton", src:"images/level selection/button.png"});
                    queue.loadFile({id:"iSymbolButton", src:"images/level selection/i.png"});
                    queue.loadFile({id:"musicButton", src:"images/level selection/music.png"});
                    queue.loadFile({id:"musicButtond", src:"images/level selection/musicd.png"});
                    queue.loadFile({id:"settingButton", src:"images/level selection/setting.png"});
                    queue.loadFile({id:"lock", src:"images/level selection/lock.png"});
                    queue.loadFile({id:"arrow", src:"images/Archer/Arrow.png"});
                    queue.loadFile({id:"mud", src:"images/mudAttack/mud.png"});
                    queue.loadFile({id:"spear", src:"images/amazonHunter/spear.png"});
                    queue.loadFile({id:"thinSheet", src:"images/pauseScreen/thinSheet.png"});
                    queue.loadFile({id:"gameOver", src:"images/gameOver/gameOver.png"});
                    queue.loadFile({id:"exitButton", src:"images/gameOver/exitButton.png"});
                    queue.loadFile({id:"star", src:"images/star.png"});
                    queue.loadFile({id:"stared", src:"images/stared.png"});
                    //sonic power bar
                    queue.loadFile({id:"mainLoadingBar", src:"images/bars/mainLoadingBar.png"});
                    queue.loadFile({id:"mainLoadingBarFrame", src:"images/bars/mainLoadingBarFrame.png"});
                    queue.loadFile({id:"sheild", src:"images/bars/sheild.png"});
                    queue.loadFile({id:"flag", src:"images/bars/flag.png"});
                    queue.loadFile({id:"heroBarFrame", src:"images/bars/frame.png"});
                    queue.loadFile({id:"heroPowerBar", src:"images/bars/heroBar.png"});
                    queue.loadFile({id:"gasBar", src:"images/bars/gasBar.png"});
                    queue.loadFile({id:"mudBar", src:"images/bars/mudBar.png"});
                    queue.loadFile({id:"blueBar", src:"images/bars/blueBar.png"});
                    queue.loadFile({id:"levelCompletePanel", src:"images/levelComplete/levelCompletePanel.png"});
                    queue.loadFile({id:"lightening", src:"images/levelComplete/lightening.png"});
                    queue.loadFile({id:"nextLevelButton", src:"images/levelComplete/nextLevelButton.png"});
                    queue.loadFile({id:"pencilCursor", src:"images/pencilCursor.png"});
                    queue.loadFile({id:"panel", src:"images/panel.png"});
                    //
                    queue.loadFile({id:"gunmanBar", src:"images/bars/gunmanBar.png"});
                    queue.loadFile({id:"amazonBar", src:"images/bars/amazonBar.png"});
                    for(var i=0;i<10;i++){
                      queue.loadFile({id:"shape"+i, src:"images/gems/shape"+i+".png"});
                    }
                    for(var i=3;i<=9;i++){
                      queue.loadFile({id:"shape_O"+i, src:"images/gems/shape"+i+"_O.png"});
                    }
                    queue.loadFile({id:"blueHorse", src:"images/Main screen contents/blue horse.png"});
                    queue.loadFile({id:"whiteHorse", src:"images/Main screen contents/white horse.png"});
                    queue.loadFile({id:"zebra", src:"images/Main screen contents/zebra.png"});
               loadProgressLabel= new createjs.Text("","20px Gretoon Highlight", "black");;
                      loadProgressLabel.x = 465;
                      loadProgressLabel.y = 420;
                      loadProgressLabel1 = new createjs.Text("","20px Gretoon Highlight", "black");;
                      loadingBarOverText = new createjs.Text("","20px Gretoon Highlight", "black");;
                      destinationBarOverText = new createjs.Text("","20px Gretoon Highlight", "black");
                //////////
                     loadingBarContainer = new createjs.Container();
                      //the height width and color of the loading bar
                      loadingBarHeight=40;
                      loadingBarWidth=350;
                      var loadingBarOverWidth = 50;
                      var loadingBarOverHeight = 50;
                       var frameColor = createjs.Graphics.getRGB(255,0,0);
                       var LoadingBarColor = createjs.Graphics.getRGB(255,153,0);
                       var loadingBarColorOver = createjs.Graphics.getRGB(0,76,153);
                      //creating the loading bar   
                       loadingBar = new createjs.Shape();
                        loadingBar.graphics.beginFill(LoadingBarColor).drawRect(0, 0, 1, loadingBarHeight).endFill();
                        //creating the frame around the loading bar
                      frame = new createjs.Shape();
                        padding=3;
                        frame.graphics.beginFill(frameColor).drawRect(-padding/2, -padding/2, loadingBarWidth*2+padding, loadingBarHeight+padding).endFill();
                        //adding the loading bar and the frame to our container and placing it on the desired position on the canvas
                        var loadingBarKlone = loadingBar.clone();
                        loadingBarOver = new createjs.Shape();
                        loadingBarOver.graphics.beginFill(loadingBarColorOver).drawRect(0, 0, 1, 10).endFill();
                        loadingBarContainer.addChild(frame,loadingBar,loadingBarKlone);
                        loadingBarOverContainer.addChild(loadingBarOver,loadingBarOverText);
                        destinationBarOver = loadingBarOver.clone();
                        destinationBarOverContainer.addChild(destinationBarOver,destinationBarOverText);
                        //loadingBarKlone.x =loadingBarWidth;
                        loadingBarKlone.alpha = 0.5;
                        loadingBarContainer.align = "center";
                        //loadingBarContainer.shadow = new createjs.Shadow("#F00", 0, 5, 50);
                        loadingBar.x = 2*loadingBarWidth;
                        loadingBar.mask = banner;
                        loadingBarContainer.x = 150;
                        loadingBarContainer.y = 500;
                        var sonicBarWidth = 100;
                        powerFrame.graphics.beginFill(frameColor).drawRect(-padding/2, -padding/2, 103, 23).endFill();
                        sonicPowerBar = new createjs.Shape();
                        sonicPowerBar.scaleX = 100;
                        sonicPowerBar.scaleY = 1.2;
                        sonicPowerBar.graphics.beginFill(loadingBarColorOver).drawRect(0, 0, 1, 20).endFill();
                        //sonicBarPowerContainer.addChild(powerFrame,sonicPowerBar);
                        gasAttackContainer.addChild(gasPowerBarContainer);
                        sonicContainer.addChild(sonicBarPowerContainer);
                        archerPowerBar = sonicPowerBar.clone();
                        gunmanPowerBarShape = sonicPowerBar.clone();
                        gasPowerBarShape = sonicPowerBar.clone();
                        mudPowerBarShape = sonicPowerBar.clone();
                        mushroomEatenBar = sonicPowerBar.clone();
                        amazonPowerBarShape = sonicPowerBar.clone();
                        potionDrankBar = sonicPowerBar.clone();
                        potionDrankContainer = new createjs.Container();
                        potionDrankBar.scaleX = 1;
                        mushroomEatenBar.scaleX = 1;
                      //adding the container with the elements to our stage
                //-----------
                   function handleFileLoad(event){
                        loading1 = new createjs.Bitmap(queue.getResult("loading_screen"));
                        loadingHorse.x = 400;
                        loadingHorse.y = 233;
                        stage.addChild(loading1,loadingHorse);
                        TweenMax.to(loadingBarKlone,0.5,{scaleX:queue.progress * (2*loadingBarWidth)});
                        TweenMax.to(loadingBar,0.5,{scaleX:-(queue.progress * (2*loadingBarWidth))});
                        loading_progess = Math.round(queue.progress*1000)/10;
                         // console.log(loading_progess);
                        loadProgressLabel.text=loading_progess + "%";
                        stage.addChild(loadProgressLabel);
                        loadProgressLabel1.text = "Click Sesame ... !";
                        loadProgressLabel1.x=385;
                        loadProgressLabel1.y=495;
                        loadProgressLabel1.alpha=0;
                        stage.addChild(loadProgressLabel1);
                        stage.addChild(loadingBarContainer);
                        if(loading_progess==100){
                          TweenMax.to(loadingBarContainer,2,{y:340,alpha:0,delay:1});
                          TweenMax.to(loadProgressLabel,2,{y:340,alpha:0,delay:1});
                          tweener();
                          // console.log("helllo");
                          }  
                      }
                      
                      function handleComplete(){
                       /*clickSeasme = new Howl({
                                      urls: ['sound/CSN.mp3', 'sound.ogg', 'sound.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                        bgMusic.play();
                                      }
                                    });*/
                        
                        lizardSfx = new Howl({
                                      urls: ['sound/lizard.mp3', 'sound.ogg', 'sound.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        snakeSfx = new Howl({
                                      urls: ['sound/snake.mp3', 'sound.ogg', 'sound.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        chameleonSfx = new Howl({
                                      urls: ['sound/chameleon.mp3', 'sound.ogg', 'sound.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        
                        toolM = new Howl({
                                      urls: ['sound/tool.mp3', 'sound.ogg', 'sound.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        zebAM = new Howl({
                                      urls: ['sound/ZA.mp3', 'sound.ogg', 'sound.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    }); 
                        gemA = new Howl({
                                      urls: ['sound/GA.mp3', 'sound.ogg', 'sound.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        gemB = new Howl({
                                      urls: ['sound/GB.mp3', 'sound.ogg', 'sound.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        gemC = new Howl({
                                      urls: ['sound/GC.mp3', 'sound.ogg', 'sound.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        gemD = new Howl({
                                      urls: ['sound/GD.mp3', 'sound.ogg', 'sound.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        tilePop = new Howl({
                                      urls: ['sound/pop.mp3', 'sound.ogg', 'sound.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        unMatch = new Howl({
                                      urls: ['sound/unmatch.mp3', 'sound.ogg', 'sound.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        lvlCom = new Howl({
                                      urls: ['sound/lvlCom.mp3', 'lvlCom.ogg', 'sound.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        
                        gemSpawn = new Howl({
                                      urls: ['sound/gs.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        MilHit = new Howl({
                                      urls: ['sound/MH.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        for(var i=1;i<=4;i++){
                            milAttack[i] = new Howl({
                                      urls: ['sound/gunAttack'+i+'.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        }
                        for(var i=1;i<=2;i++){
                            archerAttackM[i] = new Howl({
                                      urls: ['sound/archerAttack'+i+'.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                        horseSound[1].play();
                                      }
                                    });
                        }
                        for(var i=1;i<=4;i++){
                            indianAttackM[i] = new Howl({
                                      urls: ['sound/indianAttack'+i+'.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                        horseSound[1].play();
                                      }
                                    });
                        }
                        for(var i=1;i<=4;i++){
                            gunmanDead[i] = new Howl({
                                      urls: ['sound/gunFlag'+i+'.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        }
                        for(var i=1;i<=3;i++){
                            horseSound[i] = new Howl({
                                      urls: ['sound/HORSE'+i+'.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        }
                        archOnMush = new Howl({
                                      urls: ['sound/archerOnLife.mp3', 'sound.ogg', 'sound.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        indOnMush = new Howl({
                                      urls: ['sound/indianOnLife.mp3', 'sound.ogg', 'sound.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        fire = new Howl({
                                      urls: ['sound/fire.mp3', 'sound.ogg', 'sound.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        archDead = new Howl({
                                      urls: ['sound/archerDead.mp3', 'sound.ogg', 'sound.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        arrowShot = new Howl({
                                      urls: ['sound/ARROWSHOT.mp3', 'sound.ogg', 'sound.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        javelinShot = new Howl({
                                      urls: ['sound/JAVELINSHOT.mp3', 'sound.ogg', 'sound.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        for(var i = 1;i<=4;i++){
                                indianIsHit[i] = new Howl({
                                      urls: ['sound/indianIsHit'+i+'.mp3', 'sound.ogg', 'sound/gs.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        }

                        for(var i = 1;i<=3;i++){
                                milWon[i] = new Howl({
                                      urls: ['sound/gunCapture'+i+'.mp3', 'sound.ogg', 'sound/gs.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                        gOvrM.play();
                                      }
                                    });
                        }
                        indianWon = new Howl({
                                      urls: ['sound/indianVictory.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        for(var i = 1;i<=3;i++){
                                archWon[i] = new Howl({
                                      urls: ['sound/archerWon'+i+'.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                        gOvrM.play();
                                      }
                                    });
                        }
                            
                        bClickM = new Howl({
                                      urls: ['sound/click.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        projectileSound = new Howl({
                                      urls: ['sound/projectileSound.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        inGM = new Howl({
                                      urls: ['sound/in.mp3', 'sound.ogg', 'sound/gs.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                        inGM.stop();
                                        inGM.play();
                                      }
                                    });
                        gOvrM = new Howl({
                                      urls: ['sound/fail.mp3', 'sound.ogg', 'sound.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });
                        archIsHitM = new Howl({
                                      urls: ['sound/archerGotHit.mp3', 'sound.ogg', 'sound.mp3'],
                                      autoplay: false,
                                      loop: false,
                                      onend: function() {
                                      }
                                    });


                        stage.addEventListener("click", handleClick);

          //blueeyes

          //zebraeyes
          
          //lizardeye start
          
                        bitmapFont = new BitmapFont(queue.getResult("bitmap"),queue.getResult("xml"),32);
                        BitmapTextField.registerBitmapFont(bitmapFont,"cooper");
                        thinBitmapFont = new BitmapFont(queue.getResult("thinBitmap"),queue.getResult("thinXml"),32);
                        BitmapTextField.registerBitmapFont(thinBitmapFont,"thinCooper");
                        //BitmapTextField = function (width, height, text, fontName,fontSize,horizantalLetterSpacing,verticalLetterSpacing,hAlign,vAlign,autoScale)
                        fightText = new BitmapTextField(400,100, "Let the hunt Begin..!", "cooper",-1,0,0,"right","right",true);
                        congratulationsText = new BitmapTextField(240,100, "Congratulations","cooper",-1,0,0,"left","top",true);
                        projectileText = new BitmapTextField(400,100, "Here Comes The Pain","cooper",-1,0,0,"left","top",true);
                        hero = new BitmapTextField(200,100, "Hero :","cooper",-1,0,0,"left","top",true);
                        levelHero = new BitmapTextField(300,100, "","cooper",-1,0,0,"left","top",true);
                        levelHero.setColor("#0E478C");
                        villian = new BitmapTextField(200,100, "Villain :","cooper",-1,0,0,"left","top",true);
                        levelVillian = new BitmapTextField(200,100, "","cooper",-1,0,0,"left","top",true);
                        levelVillian.setColor("#0E478C");
                        heheText = new BitmapTextField(200,100, "hehehe","cooper",-1,0,0,"left","top",true);
                        heheText.x = 50;
                        heheText.y = 370;
                        htpChainText = new BitmapTextField(550,550,"                                               How to Play       \n\n\n\n\n\n\n\n\n"+
                         "Click any gem once and then MOVE the cursor over similar gems to create a chain of atleast 3 gems and then click again to blow up the gems and have the CORRESPONDSING horse initiate an attack.","thinCooper",24,0,0,"left","top",true); 
                        //htpChainText.setColor("#FFFFFF");
                        htpGoalText = new BitmapTextField(550,550,"                                                      Goal          \n\n\n\n\n"+
                         "The Goal of the Game is to have the Hero reach the flag and get required number of poisonous mushrooms and health potions along the way.In order to move the horse forward you need to create a chain of 3 or more poisonous mushrooms to lure the horse towards it.","thinCooper",24,0,0,"left","top",true); 
                        htpNoteText = new BitmapTextField(550,550,"                                                      Goal       \n\n\n\n\n"+
                         "Bigger the chain -> stronger the attack. A chain of any gems greater than or equal to 12 will yeild an ariel attack. Each horse corresponds to its own GEM.The Villain automatically retaliates on each attack Note: When the Villain dies, then on creating a chain, instead of attacking, the Hero move forward to reach its destination. Completing a level will unlock new characters and a whole new set of powers.","thinCooper",24,0,0,"left","top",true);
                        htpImpNotes = new BitmapTextField(550,550,"                                                      Note       \n\n\n\n\n"+
                         "If the enemy is dead and you get a chain of mushrooms that is greater than or equal to 12 than the poison won't take effect and the player wont die, but the player will move a small distance as comapred to the usual greater distance. When there is more than 1 enemy on your tail then on drinking the potion just the main villian will attack,however on making a combination of mushrooms each enemy will attack. ","thinCooper",24,0,0,"left","top",true);
                        mushroomEatenText = new BitmapTextField(200,100,"x "+mushroomEatenBar.scaleX,"cooper",-1,0,0,"left","left",true);
                        mushroomEatenText.setColor("#0E478C");
                        potionDrankText = new BitmapTextField(200,100,"x "+potionDrankBar.scaleX,"cooper",-1,0,0,"left","left",true);
                        potionDrankText.setColor("#0E478C");
                         for(var i=0;i<13;i++){
                          shape[i]= new createjs.Bitmap(queue.getResult("shape"+i));
                        }
                        for(var i=3;i<=9;i++){
                          shape_O[i] = new createjs.Bitmap(queue.getResult("shape_O"+i));
                          shape_O[i].alpha = 0;
                        }
                        shape[0].scaleX = 0.35;
                        shape[0].scaleY = 0.35;
                        shape[1].scaleX = 0.35;
                        shape[1].scaleY = 0.35;
                        shape[2].scaleX = 0.35;
                        shape[2].scaleY = 0.35;
                        //mainMenu = new createjs.Bitmap(queue.getResult("mainMenu"));
                        star = new createjs.Bitmap(queue.getResult("star"));
                        stared = new createjs.Bitmap(queue.getResult("stared"));
                        playButton = new createjs.Bitmap(queue.getResult("playButton"));
                        logo = new createjs.Bitmap(queue.getResult("logo"));
                        pauseScreenPlayButton = new createjs.Bitmap(queue.getResult("playButton"));
                        mainLoadingBar = new createjs.Bitmap(queue.getResult("mainLoadingBar"));
                        mainLoadingBarFrame = new createjs.Bitmap(queue.getResult("mainLoadingBarFrame"));
                        optionsButton = new createjs.Bitmap(queue.getResult("optionsButton"));
                        background = new createjs.Bitmap(queue.getResult("background"));
                        lizard = new createjs.Bitmap(queue.getResult("lizard"));
                        lizardContainer.addChild(lizard,lizardEyesMovement);
                        lizardContainerIn.addChild(lizard.clone(),lizardEyesMovement.clone());
                        blueHorse = new createjs.Bitmap(queue.getResult("blueHorse"));
                        blueHorseContainer.addChild(blueHorse,blueEyesMovement);
                        whiteHorse = new createjs.Bitmap(queue.getResult("whiteHorse"));
                        whiteHorseContainer.addChild(whiteHorse,whiteEyesMovement);
                        zebra = new createjs.Bitmap(queue.getResult("zebra"));
                        zebraContainer.addChild(zebra,zebraEyesMovement)
                        banner = new createjs.Bitmap(queue.getResult("banner"));
                        heart = new createjs.Bitmap(queue.getResult("heart"));
                        levelSelection = new createjs.Bitmap(queue.getResult("levelSelection"));
                        levelSelection.alpha = 0;
                       levelButton = new createjs.Bitmap(queue.getResult("levelButton"));
                       lock = new createjs.Bitmap(queue.getResult("lock"));
                       iSymbolButton = new createjs.Bitmap(queue.getResult("iSymbolButton"));
                       musicButton = new createjs.Bitmap(queue.getResult("musicButton"));
                       musicButtond = new createjs.Bitmap(queue.getResult("musicButtond"));
                       pauseScreenMusicButton = new createjs.Bitmap(queue.getResult("musicButton"));
                       pauseScreenMusicButtond = new createjs.Bitmap(queue.getResult("musicButtond"));
                       settingButton = new createjs.Bitmap(queue.getResult("settingButton"));
                       pauseScreenSettingButton = new createjs.Bitmap(queue.getResult("settingButton"));
                       //
                       levelCompletePanel = new createjs.Bitmap(queue.getResult("levelCompletePanel"));
                       lightening = new createjs.Bitmap(queue.getResult("lightening"));
                       nextLevelButton = new createjs.Bitmap(queue.getResult("nextLevelButton"));
                       //
                       mud = new createjs.Bitmap(queue.getResult("mud"));
                       arrow = new createjs.Bitmap(queue.getResult("arrow"));
                       //
                       gameOver = new createjs.Bitmap(queue.getResult("gameOver"));
                       exitButton = new createjs.Bitmap(queue.getResult("exitButton"));
                       pauseScreenExitButton = new createjs.Bitmap(queue.getResult("exitButton"));
                       lvlSSExitButton = new createjs.Bitmap(queue.getResult("exitButton"));
                       pencilCursor = new createjs.Bitmap(queue.getResult("pencilCursor"));
                       panel = new createjs.Bitmap(queue.getResult("panel"));
                       lcMushroom = shape[9].clone();
                       lcPotion = shape[8].clone();
                       levelcompleteContainer.addChild(levelCompletePanel,nextLevelButton);
                       //
                       amazonBar = new createjs.Bitmap(queue.getResult("amazonBar"));
                       gunmanBar = new createjs.Bitmap(queue.getResult("gunmanBar"));
                       //loadingbarcontainer rechildrened
                        mainLoadingBar.scaleX = .82;
                        mainLoadingBar.scaleY = .75;
                       mainLoadingBar.y =-130;
                       mainLoadingBar.x =-210;
                       //mainLoadingBar.mask = loadingBar;
                       gasBar = new createjs.Bitmap(queue.getResult("gasBar"));
                       mudBar = new createjs.Bitmap(queue.getResult("mudBar"));
                       blueBar = new createjs.Bitmap(queue.getResult("blueBar"));
                       heroBarFrame = new createjs.Bitmap(queue.getResult("heroBarFrame"));
                       sheild = new createjs.Bitmap(queue.getResult("sheild"));
                       flag = new createjs.Bitmap(queue.getResult("flag"));
                       flag.scaleX = 0.1;
                       flag.scaleY = 0.1;
                       flag.x = 700;
                       heroPowerBar = new createjs.Bitmap(queue.getResult("heroPowerBar"));
                       blueBar.scaleX = 0.1;
                       blueBar.scaleY = 0.1;
                       heroBarFrame.scaleX = 0.1;
                       heroBarFrame.scaleY = 0.1;
                       sheild.scaleX = 0.1;
                       sheild.scaleY = 0.1;
                       sheild.x = 120;
                       heroPowerBar.scaleX = 0.1;
                       heroPowerBar.scaleY = 0.1;
                       heroPowerBar.y = 11;
                       heroPowerBar.x = 2;
                       blueBar.y = 11;
                       blueBar.x = 2;
                       //
                       gunmanBar.scaleX = .1;
                       gunmanBar.scaleY = .05;
                       gunmanBar.y = 11;
                       gunmanBar.x = 2;
                       //
                       amazonBar.scaleX = .1;
                       amazonBar.scaleY = .05;
                       amazonBar.y = 11;
                       amazonBar.x = 2;
                       //
                       blueBar.mask = sonicPowerBar;
                       heroPowerBar.mask = sonicPowerBar;
                       archerHeroPowerBar = heroPowerBar.clone();
                       gasBar.scaleX = .1;
                       gasBar.scaleY = .1;
                       gasBar.y = 11;
                       gasBar.x = 2;
                       gasPowerBar = gasBar;
                       mudBar.scaleX = .1;
                       mudBar.scaleY = .1;
                       mudBar.y = 11;
                       mudBar.x = 2;
                       mudPowerBar = heroPowerBar;
                       archerSheild = sheild.clone();
                       sonicSheild = shape[7].clone();
                       sonicBarPowerContainer.addChild(heroBarFrame,blueBar,sonicSheild);
                       sonicSheild.x = 120;
                       sonicPowerBar.container = sonicContainer;
                       gunmanContainer.addChild(gunmanAttack);
                       gunmanPowerBarShape.container = gunmanContainer;
                       amazonPowerBarShape.container = amazonContainer;
                       //
                       archerPowerBarContainer.addChild(heroBarFrame.clone(),archerHeroPowerBar,archerSheild);
                       archerHeroPowerBar.mask = archerPowerBar;
                       miniMushroom = shape[9].clone();
                       miniMushroom.scaleX = 0.7;
                       miniMushroom.scaleY = 0.7;
                       miniPotionFlask = shape[8].clone();
                       miniPotionFlask.scaleX = 0.7;
                       miniPotionFlask.scaleY = 0.7;
                       miniPotionFlask.rotation = 15;
                       miniPotionFlask.x = 120;
                       miniPotionFlask.y = -10;
                       mushroomBarStar = star.clone();
                       potionBarStar = star.clone();
                       mushroomBarStar.x = 50;
                       potionBarStar.x = 50;
                       //
                       mushroomEatenBarClone = heroPowerBar.clone();
                       potionDrankBarClone = heroPowerBar.clone();
                       mushroomBarContainer.addChild(heroBarFrame.clone(),mushroomEatenBarClone,miniMushroom,mushroomBarStar);
                       mushroomEatenBarClone.mask = mushroomEatenBar;
                       potionDrankContainer.addChild(heroBarFrame.clone(),potionDrankBarClone,miniPotionFlask,potionBarStar);
                       potionDrankBarClone.mask = potionDrankBar;
                       miniMushroom.x= 122;
                       miniMushroom.y= -10;
                       miniMushroom.rotation = 20;
                       heart.y = -5;
                       TweenMax.fromTo(sheild,1,{scaleX:0.1,scaleY:0.1},{scaleX:0.11,scaleY:0.11,yoyo:true,repeat:-1});
                      TweenMax.fromTo(sonicSheild,1,{scaleX:0.5,scaleY:0.5},{scaleX:0.7,scaleY:0.7,yoyo:true,repeat:-1});
                       TweenMax.fromTo(archerSheild,1,{scaleX:0.1,scaleY:0.1},{scaleX:0.11,scaleY:0.11,yoyo:true,repeat:-1});
                       //
                       archerContainer.addChild(archerAttack,arrow,archerPowerBarContainer);
                       archerPowerBar.container = archerContainer;
                       gasSheild = shape[6].clone();
                       gasPowerBarContainer.addChild(heroBarFrame.clone(),gasPowerBar,gasSheild);
                       gasSheild.x = 120;
                       TweenMax.fromTo(gasSheild,1,{scaleX:0.5,scaleY:0.5},{scaleX:0.7,scaleY:0.7,yoyo:true,repeat:-1});
                       gasPowerBar.mask = gasPowerBarShape;
                       mudSheild = shape[5].clone();
                       mudPowerBarContainer.addChild(heroBarFrame.clone(),mudPowerBar,mudSheild);
                       mudSheild.x = 120;
                       TweenMax.fromTo(mudSheild,1,{scaleX:0.5,scaleY:0.5},{scaleX:0.7,scaleY:0.7,yoyo:true,repeat:-1});
                       mudPowerBar.mask = mudPowerBarShape;
                       gasAttackContainer.addChild(gasAttack,gasBomb,gasPowerBarContainer);
                       //
                       gunmanSheild = sheild.clone();
                       gunmanPowerBar = gunmanBar;
                       gunmanPowerBarContainer.addChild(heroBarFrame.clone(),gunmanPowerBar,gunmanSheild);
                       gunmanPowerBar.mask = gunmanPowerBarShape;
                       gunmanContainer.addChild(gunmanAttack,gunmanPowerBarContainer);
                       mudAttackContainer.addChild(mudAttack,mudThrow,mudPowerBarContainer);
                       //amazon
                       amazonSheild = sheild.clone();
                       amazonPowerBar = amazonBar;
                       amazonPowerBarContainer.addChild(heroBarFrame.clone(),amazonPowerBar,amazonSheild);
                       amazonPowerBar.mask = amazonPowerBarShape;
                       TweenMax.fromTo(gunmanSheild,1,{scaleX:0.1,scaleY:0.1},{scaleX:0.11,scaleY:0.11,yoyo:true,repeat:-1});
                       TweenMax.fromTo(amazonSheild,1,{scaleX:0.1,scaleY:0.1},{scaleX:0.11,scaleY:0.11,yoyo:true,repeat:-1});
                       spear = new createjs.Bitmap(queue.getResult("spear"));
                       amazonContainer.addChild(amazonAttack,spear,amazonPowerBarContainer);
                       for(var i = 1,j=1; i<24 ;i++,j++){
                          levelTileContainer[i] = new createjs.Container();
                          levelTileContainer[i].numOfStarsInContainer = 0;
                          locker[i] = new createjs.Bitmap(queue.getResult("lock"));
                          locked[i] = true;
                          numOfStars[i] = 0;
                          //...
                          numberText[i].x = 40;
                          numberText[i].y = 32;
                          if(j==7){
                            j=1;
                          }
                          if(i<7){
                            levelTileContainer[i].y = 80;
                            levelTileContainer[i].x = 130*i-50;
                          }
                          else if(i<13){
                            levelTileContainer[i].y = 190;
                            levelTileContainer[i].x = levelTileContainer[j].x;
                          }
                          else if(i<19){  
                            levelTileContainer[i].y = 300;
                            levelTileContainer[i].x = levelTileContainer[j].x;
                          }
                          else if(i<25){
                            levelTileContainer[i].y = 410;
                            levelTileContainer[i].x = levelTileContainer[j].x;
                          }
                          levelTileContainer[i].level += i;
                          levelTileContainer[i].name += i;
                          //console.log("levelTileContainer[i].name +=i; = "+levelTileContainer[i].name);
                          levelTileContainer[i].addChild(levelButton.clone(),locker[i],numberText[i]);
                          levelTileContainer[i].on("rollover",overLevelTileContainer);
                          levelTileContainer[i].on("rollout",outLevelTileContainer);
                          levelTileContainer[i].eventHandlerExists = false;
                          //levelTileContainer[i].cursor="pointer";

                       }
                       tileStar = stared.clone();
                          tileStar.x = 14;
                          tileStar.y = 63;
                       if(localStorage.getItem("numOfStars") === null){
                        localStorage["numOfStars"] = JSON.stringify(numOfStars);
                       }
                       if (localStorage.getItem("locked") === null) {
                            
                          locked[1] = false;
                            localStorage["locked"] = JSON.stringify(locked);
                        }
                       else{
                          console.log(localStorage);
                       }
                       //
                       thinSheet = new createjs.Bitmap(queue.getResult("thinSheet"));
                       htpNextButton = nextLevelButton.clone();
                       htpNextButton1 = nextLevelButton.clone();
                       htpNextButton2 = nextLevelButton.clone();
                       htpNextButton3 = nextLevelButton.clone();                        
                        //
                        playButton.addEventListener("click",clickPlayButton);
                        playButton.addEventListener("rollover",overPlayButton);
                        playButton.addEventListener("rollout",outPlayButton);
                        //
                        optionsButton.addEventListener("click",clickOptionsButton);
                        optionsButton.addEventListener("rollover",overOptionsButton);
                        optionsButton.addEventListener("rollout",outOptionsButton);
                        //
                        pauseScreenMusicButton.on("click",muteMusic);
                        pauseScreenMusicButton.cursor = "pointer";
                        pauseScreenMusicButtond.on("click",unmuteMusic);
                        pauseScreenMusicButtond.cursor = "pointer";
                        //
                        nextLevelButton.on("click",nextLevelButtonClick);
                        nextLevelButton.cursor = "pointer";
                        //
                        htpNextButton.on("click",htpNextButtonClick);
                        htpNextButton.cursor = "pointer";
                        //
                        htpNextButton1.on("click",htpNextButtonClick1);
                        htpNextButton1.cursor = "pointer";
                        //
                        htpNextButton2.on("click",htpNextButtonClick2);
                        htpNextButton2.cursor = "pointer";
                        //
                        htpNextButton3.on("click",htpNextButtonClick3);
                        htpNextButton3.cursor = "pointer";
                        //
                        exitButton.on("click",clickExitButton);
                        exitButton.cursor = "pointer";
                        //
                        chameleonMovement.on("rollover",chameleonSound);
                        lizardContainer.on("rollover",lizardSound);
                        snakeMovement.on("rollover",snakeSound);
                        //
                        pauseScreenExitButton.on("click",clickPSExitButton);
                        pauseScreenExitButton.cursor = "pointer";
                        //
                        lvlSSExitButton.on("click",exitLevelSelection);
                        lvlSSExitButton.cursor = "pointer";
                        //
                        iSymbolButton.on("click",showInstructions);
                        iSymbolButton.cursor = "pointer";
                        //
                        musicButton.on("click",muteMusic);
                        musicButton.cursor = "pointer";
                        //
                        musicButtond.on("click",unmuteMusic);
                        musicButtond.cursor = "pointer";
                        //
                        gameOver.on("click",function(){});
                        pauseScreenBg = levelSelection.clone();
                        pauseScreenBg.alpha = 0;
                        pauseScreenContainer.addChild(pauseScreen,pauseScreenPlayButton,pauseScreenSettingButton,pauseScreenMusicButton,pauseScreenMusicButtond,pauseScreenExitButton);
                        //
                        pauseScreenPlayButton.addEventListener("click",pauseScreenPlayButtonClick);
                        pauseScreenPlayButton.cursor = "pointer";
                        //
                        document.addEventListener("keydown",keydownd);
                        document.addEventListener("keyup",keyupd);

                        gunmanPowerBar.container = gunmanContainer;
                        gasPowerBarShape.container = gasAttackContainer;
                        mudPowerBarShape.container = mudAttackContainer;
                        setCoordinates();
                      }
                      function handleClick() {
                        //clickSeasme.play();
                        bgMusic.play();
                        loadingHorse.gotoAndStop(0);
                        loadingBarContainer.removeAllChildren();
                        loadingBarContainer.addChild(mainLoadingBar);
                         stage.removeChild(loading1,loadingBarContainer);
                         //stage.removeEventListener("click",handleComplete);
                         stage.removeEventListener("click", handleClick);
                         
						 viewMain();
                        }
                        function keydownd(evt){
                          //console.log("key code "+evt.keyCode);
                          keyPressed = evt.keyCode;
                          if(keyPressed==39){
                                birdSpriteLeftMovement.play();
                                birdSpriteLeftMovement.x +=5;
                               }
                        }
                        function keyupd(){
                          birdSpriteLeftMovement.gotoAndStop(0);
                        }
                      function setCoordinates(){
                        hero.x = 380;
                        hero.y = 20;
                        levelHero.x = 460;
                        levelHero.y = 20;
                        villian.x = 738;
                        villian.y = 20; 
                        levelVillian.x = 850;
                        levelVillian.y = 20;
                        fightText.x = 280;
                        fightText.y = -180;
                        congratulationsText.x = 405;
                        congratulationsText.y = -150;
                        lcMushroom.x = 410;
                        lcMushroom.y = 340;
                        mushroomEatenText.x = 480;
                        mushroomEatenText.y = 350;
                        lcMushroom.alpha = 0;
                        lcPotion.x = 410;
                        lcPotion.y = 420;
                        lcPotion.alpha = 0;
                        potionDrankText.x = 480;
                        potionDrankText.y = 440;
                        amazonPowerBarContainer.x = 180;
                        amazonPowerBarContainer.y = -15;   
                        logo.x = 50;
                        logo.y = 550;             
                        logo.scaleX = logo.scaleY = 0.5;        
                        playButton.x = 425;
                        playButton.y = 440;
                        playButton.cursor = "pointer";
                        blueHorse.x = 435.3;
                        blueHorse.y = 193.9;
                        blueEyesMovement.x=435;
                        blueEyesMovement.y=194;
                        whiteHorse.x = 280;
                        whiteHorse.y = 265;
                        whiteEyesMovement.x=280;
                        whiteEyesMovement.y=265;
                        zebra.x = 491.5;
                        zebra.y = 265;
                        zebraEyesMovement.x = 492;
                        zebraEyesMovement.y=265;
                        birdSpriteLeftMovement.x=1000;
                        birdSpriteLeftMovement.y=100;
                        birdSpriteLeftMovement3.x=1000;
                        birdSpriteLeftMovement3.y=-100;
                        birdSpriteLeftMovement.scaleX = 0.25;
                        birdSpriteLeftMovement.scaleY = 0.25;
                        birdSpriteLeftMovement.zIndex = 9999;
                        birdSpriteLeftMovement1.scaleX = -0.25;
                        birdSpriteLeftMovement1.scaleY = 0.25;
                        birdSpriteLeftMovement1.zIndex = 9999;
                        birdSpriteLeftMovement2.scaleX = -0.25;
                        birdSpriteLeftMovement2.scaleY = 0.25;
                        birdSpriteLeftMovement2.zIndex = 9999;
                        birdSpriteLeftMovement3.scaleX = 0.25;
                        birdSpriteLeftMovement3.scaleY = 0.25;
                        birdSpriteLeftMovement3.zIndex = 9999;
                        birdSpriteLeftMovement.alpha = 0.5;
                        birdSpriteLeftMovement1.alpha = 0.5;
                        birdSpriteLeftMovement2.alpha = 0.5;
                        birdSpriteLeftMovement3.alpha = 0.5;
                        lizardEyesMovement.x = 18;
                        lizardEyesMovement.y=404;
                        lizard.x =18;
                        lizard.y = 404;
                        optionsButton.scaleX = 0.75;
                        optionsButton.scaleY = 0.75;
                        settingButton.x = 890;
                        settingButton.y = 520;
                        musicButton.x = 890;
                        musicButton.y = 340;
                        musicButtond.x = 890;
                        musicButtond.y = 340;
                        musicButtond.alpha = 0;
                        iSymbolButton.x = 890;
                        iSymbolButton.y = 400;
                        archerContainer.x = 700;
                        archerContainer.y = 330;
                        gasAttackContainer.x = 100;
                        gasAttackContainer.y = 300;
                        gasPowerBarContainer.x = 50;
                        gunmanPowerBarContainer.y = -20;
                        gunmanPowerBarContainer.x = 180;
                        archerPowerBarContainer.x = 180;
                        gameOver.x = 220;
                        gameOver.y = -160;
                        mushroomStarExplosion.x = 360;
                        mushroomStarExplosion.y = 95;
                        potionStarExplosion.x = 360;
                        potionStarExplosion.y = 175;
                        enemyStarExplosion.x = 360;
                        enemyStarExplosion.y = 255; 
                        amazonContainer.x = 700;
                        amazonContainer.y = 300;
                        spear.x =50;
                        spear.y =0;
                        arrow.x =-20;
                        arrow.y =50;          
                        chameleonMovement.x= 890;
                        chameleonMovement.y = 382;
                        chameleonMovement.rotation = 12;
                        snakeMovement.x = 190;
                        snakeMovement.y = 320;
                        snakeMovement.scaleX = 0.65;
                        snakeMovement.scaleY = 0.65;
                        gasAttackContainer.x = 100;
                        gasAttackContainer.y = 300;
                        sonicContainer.x = 150;
                        sonicContainer.y = 340;
                        gunmanContainer.x = 750;
                        gunmanContainer.y = 330;
                        sonicBarPowerContainer.x = 40;
                        sonicWave.x = 50;
                        sonicWave.y = 42;
                        mushroomBarContainer.x = 50;
                        mushroomBarContainer.y = 20;
                        potionDrankContainer.x = 220;
                        potionDrankContainer.y = 20;
                        optionsButton.y = 38;
                        optionsButton.x = 18;
                        gasBomb.x = 30;
                        gasBomb.y = -35;
                        lightening.x = -320;
                        lightening.y = -110;
                        nextLevelButton.scaleX = 0.5;
                        nextLevelButton.scaleY = 0.5;
                        nextLevelButton.x = 200;
                        nextLevelButton.y = 450;
                        pauseScreen.scaleX = 0.7;
                        pauseScreen.scaleY = 0.7;
                        pauseScreenContainer.x = 1000;
                        pauseScreenContainer.y = 50;
                        pauseScreenPlayButton.x = 470;
                        pauseScreenPlayButton.y = 155;
                        pauseScreenPlayButton.scaleX = 0.5;
                        pauseScreenPlayButton.scaleY = 0.5;
                        pauseScreenMusicButton.scaleX = 0.95;
                        pauseScreenMusicButton.scaleY = 0.95;
                        pauseScreenMusicButtond.scaleX = 0.95;
                        pauseScreenMusicButtond.scaleY = 0.95;
                        exitButton.scaleX = 0.7;
                        exitButton.scaleY = 0.7;
                        pauseScreenExitButton.scaleX = 0.45;
                        pauseScreenExitButton.scaleY = 0.45;
                        pauseScreenExitButton.x = 530;
                        pauseScreenExitButton.y = 218;
                        pauseScreenMusicButton.x = 417;
                        pauseScreenMusicButton.y = 217;
                        pauseScreenMusicButtond.x = 417;
                        pauseScreenMusicButtond.y = 217;
                        pauseScreenMusicButtond.alpha = 0;
                        exitButton.x = 532;
                        exitButton.y = 450;
                        lvlSSExitButton.scaleX = 0.5;
                        lvlSSExitButton.scaleY = 0.5;
                        lvlSSExitButton.x = 890;
                        lvlSSExitButton.y = 465;
                        pauseScreenSettingButton.x = 423;
                        pauseScreenSettingButton.y = 221;
                        pauseScreenSettingButton.scaleX = 0.8;
                        pauseScreenSettingButton.scaleY = 0.8;
                        mudAttackContainer.x = 100;
                        mudAttackContainer.y = 330;
                        mudThrow.x = 10;
                        mudThrow.y = 60;
                        lightening.x = 530;
                        lightening.y = 310;
                        lightening.regX=lightening.image.width/2;
                        lightening.regY=lightening.image.height/2;
                        TweenMax.fromTo(banner,1,{x:0,y:-182},{x:10,yoyo:true,repeat:-1});
                        snakeMovementIn = snakeMovement.clone();
                            snakeMovementIn.x = 10;
                            snakeMovementIn.y = 600;
                            snakeMovementIn.scaleX = 0.5;
                            snakeMovementIn.scaleY = 0.5;
                            chameleonMovementIn = chameleonMovement.clone();
                            snakeMovementIn.on("rollover",showSnake);
                            snakeMovementIn.on("rollout",snakeBack);
                            chameleonMovementIn.x = 660;
                            chameleonMovementIn.y = 145;
                            chameleonMovementIn.on("rollover",chameleonSound);
                            chameleonMovementIn.scaleX = 0.5;
                            chameleonMovementIn.scaleY = 0.5;
                            lizardContainerIn.x = 350;
                            lizardContainerIn.y = 137;
                            lizardContainerIn.scaleX = 0.5;
                            lizardContainerIn.scaleY = 0.5;
                            lizardContainerIn.on("rollover",lizardSound);
                      }
                      function chameleonSound(){
                        chameleonSfx.play();
                      }
                      function lizardSound(){
                        lizardSfx.play();
                      }
                      function snakeSound(){
                        snakeSfx.play();
                      }
                      function showSnake(){
                            snakeSfx.play();
                            TweenMax.to(this,1,{y:500});
                      }
                      function snakeBack(){
                            TweenMax.to(this,1,{y:600});
                      }
                      function viewMain(){
                        stage.addChild(background,whiteHorseContainer,zebraContainer,blueHorseContainer,playButton,banner,birdSpriteLeftMovement,lizardContainer,chameleonMovement,snakeMovement,logo);
                        birdSprite();
                      }
                      function overPlayButton(){
                        TweenMax.to(playButton,0.25,{scaleX:0.95,scaleY:0.95});
                      }
                      function outPlayButton(){
                        TweenMax.to(playButton,0.25,{scaleX:1,scaleY:1});
                      }
                      function clickPlayButton(){
					  
                        if(playButton.alpha === 1){
                          bClickM.play();
                        TweenMax.to(playButton,2,{alpha:0});
                        TweenMax.to(logo,2,{alpha:0});
                        TweenMax.to(lizardContainer,2,{alpha:0});
                        TweenMax.to(chameleonMovement,2,{alpha:0});
                        TweenMax.to(snakeMovement,2,{alpha:0});
                        TweenMax.to(banner,4,{y:75,zIndex:2147483647});
                        TweenMax.to(whiteHorseContainer,2,{x:-1100});
                        TweenMax.to(blueHorseContainer,2,{y:-1100});
                        TweenMax.to(zebraContainer,2,{x:1100});
                        TweenMax.to(lvlSSExitButton,2,{alpha:1});
                        setTimeout(function(){ gdsdk.showBanner();},1050);
                        }
                      }
                      function showInstructions(){
                        htpTile = [];
                        htpTile = [[5,6,6],[7,4,6],[5,6,7],[6,7,3],[6,5,3],[7,6,5]];
                        stage.removeChild(musicButton,musicButtond,iSymbolButton,lvlSSExitButton);
                        helpMe = true;
                        howToPlay();
                      }
                      function muteMusic(){
                        bClickM.play();
                        Howler.mute();
                          pauseScreenMusicButton.alpha = 0;
                          pauseScreenMusicButtond.alpha = 1;
                          musicButton.alpha = 0;
                          musicButtond.alpha = 1; 
                      }
                      function unmuteMusic(){
                        Howler.unmute();
                        bClickM.play();
                          pauseScreenMusicButton.alpha = 1;
                          pauseScreenMusicButtond.alpha = 0;
                          musicButton.alpha = 1;
                          musicButtond.alpha = 0; 
                      }
                      function exitLevelSelection(){
                         if(lvlSSExitButton.alpha === 1){
                          var index = stage.getChildIndex(playButton);
                            if(index === -1){
                              stage.addChild(background,whiteHorseContainer,zebraContainer,blueHorseContainer,playButton,banner,birdSpriteLeftMovement,lizardContainer,chameleonMovement,snakeMovement,logo);
                            }
                            TweenMax.to(playButton,2,{alpha:1});
                            TweenMax.to(logo,2,{alpha:1});
                            TweenMax.to(lvlSSExitButton,2,{alpha:0});
                            TweenMax.to(lizardContainer,2,{alpha:1});
                            TweenMax.to(chameleonMovement,2,{alpha:1});
                            TweenMax.to(snakeMovement,2,{alpha:1});
                            TweenMax.to(banner,4,{y:-200,zIndex:2147483647});
                            TweenMax.to(whiteHorseContainer,2,{x:0});
                            TweenMax.to(blueHorseContainer,2,{y:0});
                            TweenMax.to(zebraContainer,2,{x:0});
                            TweenMax.to(levelSelection,2,{alpha:0});
                            stage.removeChild(levelSelection,musicButton,musicButtond,iSymbolButton);
                            for(var i=1;i<24;i++){
                              stage.removeChild(levelTileContainer[i]);
                            }
                          }
                      }
                      function clickExitButton(){
                          inGM.stop();
                          bClickM.play();
                          bgMusic.play();
                          unsetTheVar = true;
                          stage.removeAllChildren();
                          gameOver.y = -160;
                          levelSelectionScreen();
                      }
                      function clickPSExitButton(evt){
                        inGM.stop();
                        bClickM.play();
                        bgMusic.play();
                        pauseScreen.gotoAndPlay("move");
                        TweenMax.to(pauseScreenContainer,2,{x:-650,onComplete:pauseScreenRemove});
                        setTimeout(function(){
                          unsetTheVar = true;
                          stage.removeAllChildren();
                          levelSelectionScreen()},
                          500);
                      }
                      function clickOptionsButton(){
                         if(clickAllowed){
                          bClickM.play();
                          TweenMax.to(pauseScreenContainer,6,{x:10,onComplete:pauseScreenStop});
                          stage.addChild(pauseScreenBg,thinSheet,pauseScreenContainer);
                          TweenMax.to(pauseScreenBg,2,{alpha:1});
                          stage.setChildIndex( thinSheet, stage.getNumChildren()-2);
                          stage.setChildIndex( pauseScreenContainer, stage.getNumChildren()-1);
                          pauseScreen.gotoAndPlay("move");
                         }
                      }
                      function pauseScreenStop(){
                        pauseScreen.gotoAndStop(0);
                      }
                      function pauseScreenPlayButtonClick(){
                        bClickM.play();
                        pauseScreen.gotoAndPlay("move");
                        TweenMax.to(pauseScreenContainer,6,{x:-650,onComplete:pauseScreenRemove});
                      }
                      function pauseScreenRemove(){
                        pauseScreen.gotoAndStop(0);
                        pauseScreenContainer.x = 1000;
                        pauseScreenBg.alpha = 0;
                        stage.removeChild(pauseScreenBg,thinSheet,pauseScreenContainer);
                      }
                      function levelSelectionClick(){
                        bClickM.play();
                      }
                      function overOptionsButton(){
                        optionsButton.scaleX = 0.77;
                        optionsButton.scaleY = 0.77;
                      }
                      function outOptionsButton(){
                        optionsButton.scaleX = 0.75;
                        optionsButton.scaleY = 0.75;
                      }
                      function tweener(){
                       TweenMax.to(loadProgressLabel1,0.7,{alpha:1,delay:0,zIndex:100,onComplete:myFunction});
                      }
                     function myFunction(){
                      TweenMax.to(loadProgressLabel1,0.7,{alpha:0,delay:0,zIndex:100,onComplete:tweener});
                     }
                     function repeatStop(){
                        birdSpriteLeftMovement1.gotoAndStop(0);
                     }
                     function birdSprite(){
                      stage.addChild(birdSpriteLeftMovement,birdSpriteLeftMovement1,birdSpriteLeftMovement2,birdSpriteLeftMovement3);
                        TweenMax.to(birdSpriteLeftMovement1, 15, {bezier: {values:[{x:150, y:100},{x:700, y:100},{x:915,y:flag.y+80}]}, 
                        ease:Power1.easeInOut, repeat:-1,repeatDelay:3,onComplete:birdSpriteLeftMovement1.gotoAndStop(0)});
                        TweenMax.to(birdSpriteLeftMovement2, 20, {bezier: {values:[{x:-55, y:100},{x:1050, y:100}]}, 
                        ease:Power1.easeInOut, repeat:-1});
                        TweenMax.to(birdSpriteLeftMovement3, 25, {bezier: {values:[{x:975, y:100},{x:-150, y:100}]}, 
                        ease:Power1.easeInOut, repeat:-1});
                     }
                     function levelSelectionScreen(){
                          gOvrM.stop();
                          archerIsDead = false;
                          gunmanIsDead = false;
                          indianIsDead = false;
                          stage.removeAllChildren();
                         if(unsetTheVar){
                          transitionNum = [];
                          bombNum = [];
                          checkSimilar = [];
                          gasPower = [];
                          mudPower = [];
                          sonicPower = [];
                          miniGunman.exists = false;
                          archerAttack.exists = false;
                          gunmanAttack.exists = false;
                          mudAttack.exists = false;
                          amazonAttack.exists = false;
                          sonicAttack.exists = false;
                          sonicExists = false;
                          mushroomEatenBar.scaleX = 0;
                          potionDrankBar.scaleX = 0;
                          loadingBarContainer.removeAllChildren();
                          loadingBarContainer.addChild(mainLoadingBar);
                          sonicAttackAllowed = false;
                          archerAttackAllowed = false;
                          gasAttackAllowed = false;
                          mudAttackAllowed = false;
                          amazonAttackAllowed = false;
                          potionDrankAllowed = false;
                          mushroomEatenAllowed = false;
                          sonicAttack.isNotDead = false;
                          gasAttack.isNotDead = false;
                          mudAttack.isNotDead = false;
                          archerAttack.isNotDead = false;
                          amazonAttack.isNotDead = false;
                          gunmanAttack.isNotDead = false;
                          potionBarStarIsBlinking = false;
                          mushroomBarStarIsBlinking = false;
                          stage.removeAllChildren();
                         }
                        stage.addChild(levelSelection,musicButton,musicButtond,iSymbolButton,lvlSSExitButton);
                        lockStatus = JSON.parse(localStorage["locked"]);
                        starStatus = JSON.parse(localStorage["numOfStars"]);
                       for(var i=1;i<24;i++){
                            if(lockStatus[i] == true){
                                numberText[i].alpha = 0;
                              }
                            else{
                              numberText[i].alpha = 1;
                              levelTileContainer[i].removeChild(locker[i]);
                                  for(j=0,k=10;j<=starStatus[i];j++){
                                    if((j>0)&&(levelTileContainer[i].numOfStarsInContainer < starStatus[i])){
                                      levelTileContainer[i].addChild(tileStar.clone());
                                      levelTileContainer[i].numOfStarsInContainer = j;
                                      tileStar.x += 22+j;
                                    }
                                  }
                                  tileStar.x = 14;                             
                              if(levelTileContainer[i].eventHandlerExists === false)
                                {
                                  levelTileContainer[i].on("click",inGame);
                                  levelTileContainer[i].eventHandlerExists = true
                                }
                            }
                          stage.addChild(levelTileContainer[i]);
                        }
                        TweenMax.to(levelSelection,2,{alpha:1});
                     }
                       function overLevelTileContainer(evt){
                        if(numberText[evt.target.name]!=null)
                          TweenMax.to(numberText[evt.target.name],1,{rotation:360,onComplete:resetRotation});
                          evt.target.scaleX = 1.05;
                          evt.target.scaleY = 1.05;
                       }
                       function outLevelTileContainer(evt){
                        evt.target.scaleX = 1;
                        evt.target.scaleY = 1;
                       }
                       function resetRotation(){
                        this.target.rotation = 0;
                        if(this.target.name == 4){
                          this.target.x -=this.target.regX;
                          this.target.y -= this.target.regY;
                          this.target.regX = this.target.regY = 0;
                          rotationDone = true;
                        }
                       }
                      function inGame(evt){
                          //birdSprite();
                          bgMusic.stop();
                          inGM.play();
                          gameOverHappened = false;
                          clickAllowed = true;
                          stage.removeAllChildren();
                          archerPowerBar.scaleX = 0.1;
                          currentLevel = evt.currentTarget.name;
                          thinSheet.addEventListener("click",levelSelectionClick);
                          thinSheet.alpha=0.1;
                          minuteMushroom = miniMushroom.clone();
                          loadingBar.alpha = 1;
                          loadingBar.x = 350;                                               
                          loadingHorse.y = 6;
                          loadingHorse.scaleX = 0.25;
                          loadingHorse.scaleY = 0.25;
                          miniArcher = miniArc;
                          archerContainer.miniIcon = miniArcher;
                          miniArcher.scaleX = -0.2;
                          miniArcher.scaleY = 0.2;
                          loadingBarContainer.addChild(loadingBarOverContainer,loadingHorse,flag,destinationBarOverContainer);
                          sonicContainer.miniIcon = loadingHorse;
                          loadingHorse.x = 420;
                          loadingHorse.alpha = 1;
                          miniMushroom.alpha = 1;
                          miniGunman = miniG;
                          miniAmazon = miniA;
                          miniAmazon.scaleX = -0.2;
                          miniAmazon.scaleY = 0.2;
                          miniGunman.scaleX = -0.2;
                          miniGunman.scaleY = 0.2;
                          gunmanAttack.miniIcon = miniGunman;
                          gunmanContainer.miniIcon = miniGunman;
                          amazonContainer.miniIcon = miniAmazon;                         
                          loadingBarOverContainer.y = -5;
                          loadingBarOver.alpha = 0.5;                          
                          loadingBarContainer.x = 200;
                          loadingBarContainer.y = 82;
                          stage.removeAllChildren();
                          loadingBarContainer.alpha = 1;
                          loadingBar.scaleX = 0 ;
                          stage.addChild(levelSelection,optionsButton,loadingBarContainer,mushroomBarContainer,potionDrankContainer,hero,levelHero,villian,levelVillian);
                          sonicWave.alpha = 0;
                          archerPowerBar.enemy = archerAttack;
                          gunmanPowerBarShape.enemy = gunmanAttack;
                          amazonPowerBarShape.enemy = amazonAttack;
                          archerAttack.weapon = arrow;
                          gunmanAttack.weapon = gasBomb;
                          amazonAttack.weapon = spear;
                          if(gunmanPowerBarContainer.scaleX != -1)
                            gunmanPowerBarContainer.scaleX = -1;
                          if(archerPowerBarContainer.scaleX != -1)
                            archerPowerBarContainer.scaleX = -1;
                         if(amazonPowerBarContainer.scaleX != -1)
                            amazonPowerBarContainer.scaleX = -1;
                            lizardContainerIn.alpha = 0;
                          snakeMovementIn.alpha = 0;
                          chameleonMovementIn.alpha = 0;
                           stage.addChild(lizardContainerIn,chameleonMovementIn,snakeMovementIn);
                        if(evt.currentTarget.name == 1){
                          if(firstTime === true){
                              clickAllowed = false;
                              setTimeout(function(){
                                howToPlay()
                              },1050);
                              firstTime = false;
                          }
                          else if(firstTime===false){
                              showGrid();
                          }
                          levelNumber = evt.target.name;
                          unsetTheVar = true;
                          gasBomb.HorseAttacked = gasAttack;
                          gasBomb.toattackbar = gasPowerBarShape;
                          levelHero.setText(" Zebra");
                          levelVillian.setText(" GunMan");
                          stage.removeChild(enemyMove);
                          miniGunman.exists = true;
                          archerAttack.exists = false;
                          gunmanAttack.exists = true;
                          sonicAttack.exists = false;
                          horseBar = gasPowerBarShape;
                          enemyMove = miniGunman;
                          loadingBarContainer.removeChild(miniAmazon,miniArcher,minuteMushroom);
                          loadingBarContainer.addChild(enemyMove);
                          TweenMax.to(loadingHorse,3,{x:400,onComplete:setStartOfDestinationBar});
                          TweenMax.to(miniGunman,3,{x:randomIntFromInterval(50,50*evt.currentTarget.name),onComplete:setStartOfOverBar});
                          sonicAttackAllowed = false;
                          archerAttackAllowed = false;
                          gasAttackAllowed = true;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;
                          targetMovingBar = loadingHorse;
                          enemyBar = gunmanPowerBarShape;
                          TweenMax.to(enemyBar,1,{scaleX:100});
                          TweenMax.to(gasPowerBarShape,1,{scaleX:100});
                          enemy = gunmanAttack;
                          enemy.exists = true;
                          enemyContainer = gunmanContainer;
                          stage.addChild(gunmanContainer,gasAttackContainer);
                          sonicAttack.isNotDead = false;
                          gasAttack.isNotDead = true;
                          mudAttack.isNotDead = false;
                          archerAttack.isNotDead = false;
                          amazonAttack.isNotDead = false;
                          gunmanAttack.isNotDead = false;
                        }
                         else if(evt.currentTarget.name == 2){

                          unsetTheVar = true;
                          levelHero.setText(" Sonic");
                          levelVillian.setText(" Archer");
                          levelNumber = evt.target.name;
                          arrow.HorseAttacked = sonicAttack;
                          arrow.toattackbar = sonicPowerBar;
                          miniArcher.exists = true;
                          horseBar = sonicPowerBar;
                          enemyMove = miniArcher;
                          enemyMove.alpha=1;
                          loadingBarContainer.removeChild(miniGunman,miniAmazon,minuteMushroom);
                          loadingBarContainer.addChild(enemyMove);
                          TweenMax.to(loadingHorse,3,{x:660,onComplete:setStartOfDestinationBar});
                          TweenMax.to(miniArcher,3,{x:randomIntFromInterval(50,50*evt.currentTarget.name),onComplete:setStartOfOverBar});
                          sonicAttackAllowed = true;
                          archerAttackAllowed = true;
                          mudAttackAllowed = false;
                          gasAttackAllowed = false;
                          gunmanAttackAllowed = false;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;
                          targetMovingBar = loadingHorse;
                          enemyBar = archerPowerBar;
                          TweenMax.to(enemyBar,1,{scaleX:50});
                          TweenMax.to(sonicPowerBar,1,{scaleX:40});
                          enemy = archerAttack;

                          enemy.exists = true;
                          enemyContainer = archerContainer;
                          stage.addChild(sonicContainer,archerContainer);
                          sonicAttack.isNotDead = true;
                          gasAttack.isNotDead = false;
                          mudAttack.isNotDead = false;
                          archerAttack.isNotDead = true;
                          amazonAttack.isNotDead = false;
                          gunmanAttack.isNotDead = false;
                          showGrid();
                        }
                         else if(evt.currentTarget.name == 3){
                          unsetTheVar = true;
                          levelHero.setText(" Blue Head");
                          levelVillian.setText(" Hunter");
                          levelNumber = evt.target.name;
                          spear.HorseAttacked = mudAttack;
                          spear.toattackbar = mudPowerBarShape;
                          miniAmazon.exists = true;
                          archerAttack.exists = false;
                          gunmanAttack.exists = false;
                          mudAttack.exists = true;
                          amazonAttack.exists = false;
                          horseBar = mudPowerBarShape;
                          enemyMove = miniAmazon;
                          enemyMove.alpha=1;
                          loadingBarContainer.removeChild(miniGunman,miniArcher,minuteMushroom);
                          loadingBarContainer.addChild(enemyMove);
                          TweenMax.to(loadingHorse,3,{x:450,onComplete:setStartOfDestinationBar});
                          TweenMax.to(miniAmazon,3,{x:randomIntFromInterval(50,50*evt.currentTarget.name),onComplete:setStartOfOverBar});
                          sonicAttackAllowed = false;
                          archerAttackAllowed = true;
                          gasAttackAllowed = false;
                          mudAttackAllowed = true;
                          amazonAttackAllowed = true;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;
                          targetMovingBar = loadingHorse;
                          enemyBar = amazonPowerBarShape;
                          TweenMax.to(enemyBar,1,{scaleX:100});
                          TweenMax.to(mudPowerBarShape,1,{scaleX:100});
                          enemy = amazonAttack;
                          enemy.exists = true;
                          enemyContainer = amazonContainer;
                          stage.addChild(amazonContainer,mudAttackContainer);
                          sonicAttack.isNotDead = false;
                          gasAttack.isNotDead = false;
                          mudAttack.isNotDead = true;
                          archerAttack.isNotDead = false;
                          amazonAttack.isNotDead = false;
                          gunmanAttack.isNotDead = false;
                          showGrid();
                        }
                        else if(evt.currentTarget.name == 4){
                          unsetTheVar = true;
                          levelHero.setText(" Blue Head");
                          levelVillian.setText(" Hunter");
                          spear.HorseAttacked = mudAttack;
                          spear.toattackbar = mudPowerBarShape;
                          levelNumber = evt.target.name;
                          arrow.HorseAttacked = mudAttack;
                          arrow.toattackbar = mudPowerBarShape;
                          miniAmazon.exists = true;
                          archerAttack.exists = true;
                          gunmanAttack.exists = false;
                          mudAttack.exists = true;
                          amazonAttack.exists = false;
                          sonicExists = false;
                          horseBar = mudPowerBarShape;
                          enemyMove = miniAmazon;
                          enemyMove.alpha=1;
                          loadingBarContainer.addChild(enemyMove);
                          loadingBarContainer.removeChild(miniGunman,miniArcher,minuteMushroom);
                          TweenMax.to(loadingHorse,3,{x:450,onComplete:setStartOfDestinationBar});
                          TweenMax.to(miniAmazon,3,{x:randomIntFromInterval(50,50*evt.currentTarget.name),onComplete:setStartOfOverBar});
                          sonicAttackAllowed = false;
                          archerAttackAllowed = true;
                          gasAttackAllowed = false;
                          mudAttackAllowed = true;
                          amazonAttackAllowed = true;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;
                          targetMovingBar = loadingHorse;
                          enemyBar = amazonPowerBarShape;
                          TweenMax.to(enemyBar,1,{scaleX:100});
                          TweenMax.to(mudPowerBarShape,1,{scaleX:100});
                          TweenMax.to(archerPowerBar,1,{scaleX:100});
                          enemy = amazonAttack;
                          enemy.exists = true;
                          enemyContainer = amazonContainer;
                          stage.addChild(mudAttackContainer,amazonContainer,archerContainer);
                          sonicAttack.isNotDead = false;
                          gasAttack.isNotDead = false;
                          mudAttack.isNotDead = true;
                          archerAttack.isNotDead = true;
                          amazonAttack.isNotDead = false;
                          gunmanAttack.isNotDead = false;

                          showGrid();
                        }
                        else if(evt.currentTarget.name == 5){
                          unsetTheVar = true;
                          levelHero.setText(" Zebra");
                          levelVillian.setText(" GunMan");
                          levelNumber = evt.target.name;
                          spear.HorseAttacked = gasAttack;
                          spear.toattackbar = gasPowerBarShape;
                          miniAmazon.exists = false;
                          archerAttack.exists = false;
                          gunmanAttack.exists = true;
                          mudAttack.exists = false;
                          amazonAttack.exists = true;
                          sonicExists = false;

                          enemyMove = miniGunman;
                          enemyMove.alpha=1;
                          loadingBarContainer.addChild(enemyMove);
                          loadingBarContainer.removeChild(miniAmazon,miniArcher,minuteMushroom);
                          TweenMax.to(loadingHorse,3,{x:420,onComplete:setStartOfDestinationBar});
                          TweenMax.to(enemyMove,3,{x:randomIntFromInterval(50,50*evt.currentTarget.name),onComplete:setStartOfOverBar});

                          sonicAttackAllowed = false;
                          archerAttackAllowed = false;
                          gasAttackAllowed = true;
                          mudAttackAllowed = false;
                          amazonAttackAllowed = true;
                          gunmanAttackAllowed = false;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;

                          targetMovingBar = loadingHorse;
                          horseBar = gasPowerBarShape;
                          enemyBar = gunmanPowerBarShape;
                          TweenMax.to(enemyBar,1,{scaleX:100});
                          TweenMax.to(gasPowerBarShape,1,{scaleX:100});
                          TweenMax.to(amazonPowerBarShape,1,{scaleX:100});
                          enemy = gunmanAttack;
                          enemy.exists = true;
                          enemyContainer = gunmanContainer;
                          stage.addChild(amazonContainer,gunmanContainer,gasAttackContainer);
                          sonicAttack.isNotDead = false;
                          gasAttack.isNotDead = true;
                          mudAttack.isNotDead = false;
                          archerAttack.isNotDead = false;
                          amazonAttack.isNotDead = true;
                          gunmanAttack.isNotDead = false;

                          showGrid();
                        }
                        else if(evt.currentTarget.name == 6){
                          unsetTheVar = true;
                          levelHero.setText(" Sonic");
                          levelVillian.setText(" Archer");

                          spear.HorseAttacked = sonicAttack;
                          spear.toattackbar = sonicPowerBar;
                          levelNumber = evt.target.name;
                          arrow.HorseAttacked = sonicAttack;
                          arrow.toattackbar = sonicPowerBar;

                          miniAmazon.exists = false;
                          archerAttack.exists = true;
                          gunmanAttack.exists = false;
                          mudAttack.exists = false;
                          amazonAttack.exists = true;
                          sonicExists = false;

                          enemyMove = miniArcher;
                          enemyMove.alpha=1;
                          loadingBarContainer.removeChild(miniAmazon,miniGunman,minuteMushroom);

                          loadingBarContainer.addChild(enemyMove);
                          TweenMax.to(loadingHorse,3,{x:420,onComplete:setStartOfDestinationBar});
                          TweenMax.to(enemyMove,3,{x:randomIntFromInterval(50,50*evt.currentTarget.name),onComplete:setStartOfOverBar});

                          sonicAttackAllowed = true;
                          archerAttackAllowed = true;
                          gasAttackAllowed = false;
                          mudAttackAllowed = false;
                          amazonAttackAllowed = true;
                          gunmanAttackAllowed = false;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;

                          targetMovingBar = loadingHorse;
                          horseBar = sonicPowerBar;
                          enemyBar = archerPowerBar;
                          TweenMax.to(enemyBar,1,{scaleX:100});
                          TweenMax.to(horseBar,1,{scaleX:100});
                          TweenMax.to(amazonPowerBarShape,1,{scaleX:100});
                          enemy = archerAttack;
                          enemy.exists = true;
                          enemyContainer = archerContainer;
                          stage.addChild(amazonContainer,archerContainer,sonicContainer);
                          sonicAttack.isNotDead = true;
                          gasAttack.isNotDead = false;
                          mudAttack.isNotDead = false;
                          archerAttack.isNotDead = false;
                          amazonAttack.isNotDead = true;
                          gunmanAttack.isNotDead = false;

                          showGrid();
                        }
                        else if(evt.currentTarget.name == 7){
                          unsetTheVar = true;
                          levelHero.setText(" Sonic&Blue-Head");
                          levelVillian.setText(" Hunter");
                          spear.HorseAttacked = mudAttack;
                          spear.toattackbar = mudPowerBarShape;
                          levelNumber = evt.target.name;
                          arrow.HorseAttacked = sonicAttack;
                          arrow.toattackbar = sonicPowerBar;
                          miniAmazon.exists = true;
                          archerAttack.exists = true;
                          gunmanAttack.exists = false;
                          mudAttack.exists = true;
                          amazonAttack.exists = false;
                          sonicAttack.exists = true;
                          horseBar = mudPowerBarShape;
                          enemyMove = miniAmazon;
                          enemyMove.alpha=1;
                          loadingBarContainer.addChild(enemyMove);
                          loadingBarContainer.removeChild(miniGunman,miniArcher,minuteMushroom);
                          targetMovingBar = loadingHorse;
                          TweenMax.to(loadingHorse,3,{x:450,onComplete:setStartOfDestinationBar});
                          TweenMax.to(miniAmazon,3,{x:randomIntFromInterval(50,50*evt.currentTarget.name),onComplete:setStartOfOverBar});
                          sonicAttackAllowed = true;
                          archerAttackAllowed = true;
                          gasAttackAllowed = false;
                          mudAttackAllowed = true;
                          amazonAttackAllowed = true;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;
                          enemyBar = amazonPowerBarShape;
                          TweenMax.to(enemyBar,1,{scaleX:100});
                          TweenMax.to(mudPowerBarShape,1,{scaleX:100});
                          TweenMax.to(archerPowerBar,1,{scaleX:100});
                          TweenMax.to(sonicPowerBar,1,{scaleX:100});
                          
                          enemy = amazonAttack;
                          enemy.exists = true;
                          enemyContainer = amazonContainer;
                          stage.addChild(mudAttackContainer,amazonContainer,archerContainer,sonicContainer);
                          sonicAttack.isNotDead = true;
                          gasAttack.isNotDead = false;
                          mudAttack.isNotDead = true;
                          archerAttack.isNotDead = true;
                          amazonAttack.isNotDead = false;
                          gunmanAttack.isNotDead = false;

                          showGrid();
                        }
                         else if(evt.currentTarget.name == 8){
                          unsetTheVar = true;
                          levelHero.setText(" Sonic");
                          levelVillian.setText(" Archer");
                          levelNumber = evt.target.name;
                          spear.HorseAttacked = sonicAttack;
                          spear.toattackbar = sonicPowerBar;

                          arrow.HorseAttacked = sonicAttack;
                          arrow.toattackbar = sonicPowerBar;

                          miniAmazon.exists = false;
                          archerAttack.exists = true;
                          gunmanAttack.exists = false;
                          mudAttack.exists = false;
                          amazonAttack.exists = true;
                          sonicExists = false;

                          enemyMove = miniArcher;
                          enemyMove.alpha=1;
                          loadingBarContainer.removeChild(miniAmazon,miniGunman,minuteMushroom);
                          targetMovingBar = loadingHorse;
                          loadingBarContainer.addChild(enemyMove);
                          TweenMax.to(loadingHorse,3,{x:410,onComplete:setStartOfDestinationBar});
                          TweenMax.to(enemyMove,3,{x:randomIntFromInterval(50,50*evt.currentTarget.name),onComplete:setStartOfOverBar});

                          sonicAttackAllowed = true;
                          archerAttackAllowed = true;
                          gasAttackAllowed = false;
                          mudAttackAllowed = false;
                          amazonAttackAllowed = true;
                          gunmanAttackAllowed = false;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;

                          
                          horseBar = sonicPowerBar;
                          enemyBar = archerPowerBar;
                          TweenMax.to(enemyBar,1,{scaleX:100});
                          TweenMax.to(horseBar,1,{scaleX:100});
                          TweenMax.to(amazonPowerBarShape,1,{scaleX:100});
                          enemy = archerAttack;
                          enemy.exists = true;
                          enemyContainer = archerContainer;
                          stage.addChild(amazonContainer,archerContainer,sonicContainer);
                          sonicAttack.isNotDead = true;
                          gasAttack.isNotDead = false;
                          mudAttack.isNotDead = false;
                          archerAttack.isNotDead = false;
                          amazonAttack.isNotDead = true;
                          gunmanAttack.isNotDead = false;

                          showGrid();
                        }
                        else if(evt.currentTarget.name == 9){
                          unsetTheVar = true;
                          levelHero.setText(" Zebra&Sonic");
                          levelVillian.setText(" GunMan"); 

                          gasBomb.HorseAttacked = gasAttack;
                          gasBomb.toattackbar = gasPowerBarShape;
                          levelNumber = evt.target.name;
                          arrow.HorseAttacked = sonicAttack;
                          arrow.toattackbar = sonicPowerBar;

                          miniGunman.exists = true;
                          archerAttack.exists = true;
                          gunmanAttack.exists = true;
                          mudAttack.exists = false;
                          amazonAttack.exists = false;
                          sonicAttack.exists = true;
                          horseBar = gasPowerBarShape;
                          enemyMove = miniGunman;
                          enemyMove.alpha=1;
                          loadingBarContainer.addChild(enemyMove);
                          loadingBarContainer.removeChild(miniAmazon,miniArcher,minuteMushroom);
                          targetMovingBar = loadingHorse;
                          TweenMax.to(loadingHorse,3,{x:420,onComplete:setStartOfDestinationBar});
                          TweenMax.to(enemyMove,3,{x:randomIntFromInterval(20,30*evt.currentTarget.name),onComplete:setStartOfOverBar});

                          sonicAttackAllowed = true;
                          archerAttackAllowed = true;
                          gasAttackAllowed = true;
                          mudAttackAllowed = false;
                          amazonAttackAllowed = false;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;
                          enemyBar = gunmanPowerBarShape;
                          TweenMax.to(enemyBar,1,{scaleX:100});
                          TweenMax.to(gasPowerBarShape,1,{scaleX:100});
                          TweenMax.to(archerPowerBar,1,{scaleX:100});
                          TweenMax.to(sonicPowerBar,1,{scaleX:100});
                          enemy = gunmanAttack;
                          enemy.exists = true;
                          enemyContainer = gunmanContainer;
                          stage.addChild(gunmanContainer,gasAttackContainer,archerContainer,sonicContainer);
                          sonicAttack.isNotDead = true;
                          gasAttack.isNotDead = true;
                          mudAttack.isNotDead = false;
                          archerAttack.isNotDead = true;
                          amazonAttack.isNotDead = false;
                          gunmanAttack.isNotDead = true;

                          showGrid();
                        }
                        else if(evt.currentTarget.name == 10){
                          unsetTheVar = true;
                          levelHero.setText(" Blue-Head&Zebra");
                          levelVillian.setText(" Hunter");

                          gasBomb.HorseAttacked = gasAttack;
                          gasBomb.toattackbar = gasPowerBarShape;
                          levelNumber = evt.target.name;
                          spear.HorseAttacked = mudAttack;
                          spear.toattackbar = mudPowerBarShape;
                          levelNumber = evt.target.name;
                          miniAmazon.exists = true;
                          archerAttack.exists = false;
                          gunmanAttack.exists = true;
                          mudAttack.exists = true;
                          amazonAttack.exists = true;
                          sonicAttack.exists = false;
                          gasAttack.exists = true;
                          horseBar = gasPowerBarShape;
                          enemyMove = miniAmazon;
                          enemyMove.alpha=1;
                          loadingBarContainer.addChild(enemyMove);
                          loadingBarContainer.removeChild(miniGunman,miniArcher,minuteMushroom);
                          targetMovingBar = loadingHorse;
                          TweenMax.to(loadingHorse,3,{x:420,onComplete:setStartOfDestinationBar});
                          TweenMax.to(enemyMove,3,{x:randomIntFromInterval(20,20*evt.currentTarget.name),onComplete:setStartOfOverBar});

                          sonicAttackAllowed = false;
                          archerAttackAllowed = false;
                          gasAttackAllowed = true;
                          mudAttackAllowed = true;
                          amazonAttackAllowed = true;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;
                          enemyBar = amazonPowerBarShape;
                          TweenMax.to(enemyBar,1,{scaleX:100});
                          TweenMax.to(gasPowerBarShape,1,{scaleX:100});
                          TweenMax.to(mudPowerBarShape,1,{scaleX:100});
                          TweenMax.to(gunmanPowerBarShape,1,{scaleX:100});
                          
                          enemy = amazonAttack;
                          enemy.exists = true;
                          enemyContainer = amazonContainer;
                          stage.addChild(amazonContainer,gasAttackContainer,gunmanContainer,mudAttackContainer);
                          sonicAttack.isNotDead = false;
                          gasAttack.isNotDead = true;
                          mudAttack.isNotDead = true;
                          archerAttack.isNotDead = false;
                          amazonAttack.isNotDead = true;
                          gunmanAttack.isNotDead = true;

                          showGrid();
                        }
                         else if(evt.currentTarget.name == 11){
                          unsetTheVar = true;
                          levelHero.setText(" The 3-Muskateers");
                          levelVillian.setText(" Hunter");

                          spear.HorseAttacked = mudAttack;
                          spear.toattackbar = mudPowerBarShape;
                          levelNumber = evt.target.name;
                          arrow.HorseAttacked = sonicAttack;
                          arrow.toattackbar = sonicPowerBar;

                          gasBomb.HorseAttacked = gasAttack;
                          gasBomb.toattackbar = gasPowerBarShape;

                          miniAmazon.exists = true;
                          archerAttack.exists = true;
                          gunmanAttack.exists = true;
                          mudAttack.exists = true;
                          amazonAttack.exists = false;
                          sonicAttack.exists = true;
                          horseBar = mudPowerBarShape;
                          enemyMove = miniAmazon;
                          enemyMove.alpha=1;
                          loadingBarContainer.addChild(enemyMove);
                          loadingBarContainer.removeChild(miniGunman,miniArcher,minuteMushroom);
                          targetMovingBar = loadingHorse;
                          TweenMax.to(loadingHorse,3,{x:420,onComplete:setStartOfDestinationBar});
                          TweenMax.to(miniAmazon,3,{x:randomIntFromInterval(100,15*evt.currentTarget.name),onComplete:setStartOfOverBar});

                          sonicAttackAllowed = true;
                          archerAttackAllowed = true;
                          gasAttackAllowed = true;
                          mudAttackAllowed = true;
                          amazonAttackAllowed = true;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;
                          gunmanAttackAllowed = true;
                          enemyBar = amazonPowerBarShape;
                          TweenMax.to(enemyBar,1,{scaleX:100});
                          TweenMax.to(mudPowerBarShape,1,{scaleX:100});
                          TweenMax.to(archerPowerBar,1,{scaleX:100});
                          TweenMax.to(sonicPowerBar,1,{scaleX:100});
                          TweenMax.to(gunmanPowerBarShape,1,{scaleX:10});
                          TweenMax.to(gasPowerBarShape,1,{scaleX:100});
                          enemy = amazonAttack;
                          enemy.exists = true;
                          enemyContainer = amazonContainer;
                          stage.addChild(amazonContainer,archerContainer,sonicContainer,gunmanContainer,gasAttackContainer,mudAttackContainer);
                          sonicAttack.isNotDead = true;
                          gasAttack.isNotDead = true;
                          mudAttack.isNotDead = true;
                          archerAttack.isNotDead = true;
                          amazonAttack.isNotDead = true;
                          gunmanAttack.isNotDead = true;

                          showGrid();
                        }
                         else if(evt.currentTarget.name == 12){
                          unsetTheVar = true;
                          levelHero.setText(" Zebra&Sonic");
                          levelVillian.setText(" GunMan");

                          gasBomb.HorseAttacked = gasAttack;
                          gasBomb.toattackbar = gasPowerBarShape;
                          levelNumber = evt.target.name;
                          arrow.HorseAttacked = sonicAttack;
                          arrow.toattackbar = sonicPowerBar;

                          miniGunman.exists = true;
                          archerAttack.exists = true;
                          gunmanAttack.exists = true;
                          mudAttack.exists = false;
                          amazonAttack.exists = false;
                          sonicAttack.exists = true;
                          //sonicExists = true;
                          horseBar = gasPowerBarShape;
                          miniGunman.alpha = 1;
                          enemyMove = miniGunman;
                          enemyMove.alpha=1;
                          loadingBarContainer.addChild(enemyMove);
                          loadingBarContainer.removeChild(miniAmazon,miniArcher,minuteMushroom);
                          targetMovingBar = loadingHorse;
                          TweenMax.to(loadingHorse,3,{x:420,onComplete:setStartOfDestinationBar});
                          TweenMax.to(enemyMove,3,{x:randomIntFromInterval(100,15*evt.currentTarget.name),onComplete:setStartOfOverBar});

                          sonicAttackAllowed = true;
                          archerAttackAllowed = true;
                          gasAttackAllowed = true;
                          mudAttackAllowed = false;
                          amazonAttackAllowed = false;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;
                          enemyBar = gunmanPowerBarShape;
                          TweenMax.to(enemyBar,1,{scaleX:100});
                          TweenMax.to(gasPowerBarShape,1,{scaleX:100});
                          TweenMax.to(archerPowerBar,1,{scaleX:100});
                          TweenMax.to(sonicPowerBar,1,{scaleX:100});
                          enemy = gunmanAttack;
                          enemy.exists = true;
                          enemyContainer = gunmanContainer;
                          stage.addChild(gunmanContainer,archerContainer,gasAttackContainer,sonicContainer);
                          sonicAttack.isNotDead = true;
                          gasAttack.isNotDead = true;
                          mudAttack.isNotDead = false;
                          archerAttack.isNotDead = true;
                          amazonAttack.isNotDead = false;
                          gunmanAttack.isNotDead = true;

                          showGrid();
                        }
                        else if(evt.currentTarget.name == 13){
                          unsetTheVar = true;
                          levelHero.setText(" Sonic");
                          levelVillian.setText(" Archer");
                          levelNumber = evt.target.name;
                          arrow.HorseAttacked = sonicAttack;
                          arrow.toattackbar = sonicPowerBar;
                          miniArcher.exists = true;
                          horseBar = sonicPowerBar;
                          enemyMove = miniArcher;
                          enemyMove.alpha=1;
                          loadingBarContainer.removeChild(miniGunman,miniAmazon,minuteMushroom);
                          loadingBarContainer.addChild(enemyMove);
                          TweenMax.to(loadingHorse,3,{x:400,onComplete:setStartOfDestinationBar});
                          TweenMax.to(miniArcher,3,{x:randomIntFromInterval(220,25*evt.currentTarget.name),onComplete:setStartOfOverBar});
                          sonicAttackAllowed = true;
                          archerAttackAllowed = true;
                          mudAttackAllowed = false;
                          gasAttackAllowed = false;
                          gunmanAttackAllowed = false;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;
                          targetMovingBar = loadingHorse;
                          enemyBar = archerPowerBar;
                          TweenMax.to(enemyBar,1,{scaleX:100});
                          TweenMax.to(sonicPowerBar,1,{scaleX:100});
                          enemy = archerAttack;
                          enemy.exists = true;
                          enemyContainer = archerContainer;
                          stage.addChild(sonicContainer,archerContainer);
                          
                          sonicAttack.isNotDead = true;
                          gasAttack.isNotDead = false;
                          mudAttack.isNotDead = false;
                          archerAttack.isNotDead = true;
                          amazonAttack.isNotDead = false;
                          gunmanAttack.isNotDead = false;

                          showGrid();
                        }
                         else if(evt.currentTarget.name == 14){
                          unsetTheVar = true;
                          levelHero.setText(" Blue Head");
                          levelVillian.setText(" Hunter");

                          spear.HorseAttacked = mudAttack;
                          spear.toattackbar = mudPowerBarShape;
                          miniAmazon.exists = true;
                          archerAttack.exists = false;
                          gunmanAttack.exists = false;
                          mudAttack.exists = true;
                          amazonAttack.exists = false;
                          horseBar = mudPowerBarShape;
                          enemyMove = miniAmazon;
                          enemyMove.alpha=1;
                          loadingBarContainer.removeChild(miniGunman,miniArcher,minuteMushroom);
                          loadingBarContainer.addChild(enemyMove);
                          TweenMax.to(loadingHorse,3,{x:400,onComplete:setStartOfDestinationBar});
                          TweenMax.to(miniAmazon,3,{x:randomIntFromInterval(320,350),onComplete:setStartOfOverBar});
                          levelNumber = evt.target.name;
                          sonicAttackAllowed = false;
                          archerAttackAllowed = true;
                          gasAttackAllowed = false;
                          mudAttackAllowed = true;
                          amazonAttackAllowed = true;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;
                          targetMovingBar = loadingHorse;
                          enemyBar = amazonPowerBarShape;
                          TweenMax.to(enemyBar,1,{scaleX:100});
                          TweenMax.to(mudPowerBarShape,1,{scaleX:100});
                          enemy = amazonAttack;
                          enemy.exists = true;
                          enemyContainer = amazonContainer;
                          stage.addChild(amazonContainer,mudAttackContainer);
                          sonicAttack.isNotDead = false;
                          gasAttack.isNotDead = false;
                          mudAttack.isNotDead = true;
                          archerAttack.isNotDead = false;
                          amazonAttack.isNotDead = false;
                          gunmanAttack.isNotDead = false;
                          
                          showGrid();
                        }
                        else if(evt.currentTarget.name == 15){
                          unsetTheVar = true;
                          levelHero.setText(" Blue Head");
                          levelVillian.setText(" Hunter");

                          spear.HorseAttacked = mudAttack;
                          spear.toattackbar = mudPowerBarShape;
                          arrow.HorseAttacked = mudAttack;
                          arrow.toattackbar = mudPowerBarShape;

                          miniAmazon.exists = true;
                          archerAttack.exists = true;
                          gunmanAttack.exists = false;
                          mudAttack.exists = true;
                          amazonAttack.exists = false;
                          sonicExists = false;
                          horseBar = mudPowerBarShape;
                          enemyMove = miniAmazon;
                          enemyMove.alpha=1;
                          loadingBarContainer.addChild(enemyMove);
                          loadingBarContainer.removeChild(miniGunman,miniArcher,minuteMushroom);
                          TweenMax.to(loadingHorse,3,{x:420,onComplete:setStartOfDestinationBar});
                          TweenMax.to(miniAmazon,3,{x:randomIntFromInterval(200,20*evt.currentTarget.name),onComplete:setStartOfOverBar});
                          levelNumber = evt.target.name;
                          sonicAttackAllowed = false;
                          archerAttackAllowed = true;
                          gasAttackAllowed = false;
                          mudAttackAllowed = true;
                          amazonAttackAllowed = true;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;

                          targetMovingBar = loadingHorse;
                          enemyBar = amazonPowerBarShape;
                          TweenMax.to(enemyBar,1,{scaleX:100});
                          TweenMax.to(mudPowerBarShape,1,{scaleX:100});
                          TweenMax.to(archerPowerBar,1,{scaleX:100});
                          
                          enemy = amazonAttack;
                          enemy.exists = true;
                          enemyContainer = amazonContainer;
                          stage.addChild(mudAttackContainer,amazonContainer,archerContainer);
                          sonicAttack.isNotDead = false;
                          gasAttack.isNotDead = false;
                          mudAttack.isNotDead = true;
                          archerAttack.isNotDead = true;
                          amazonAttack.isNotDead = false;
                          gunmanAttack.isNotDead = false;

                          showGrid();
                        }
                        else if(evt.currentTarget.name == 16){
                          unsetTheVar = true;
                          levelHero.setText(" Zebra");
                          levelVillian.setText(" GunMan");

                          spear.HorseAttacked = gasAttack;
                          spear.toattackbar = gasPowerBarShape;
                          miniAmazon.exists = false;
                          archerAttack.exists = false;
                          gunmanAttack.exists = true;
                          mudAttack.exists = false;
                          amazonAttack.exists = true;
                          sonicExists = false;

                          enemyMove = miniGunman;
                          enemyMove.alpha=1;
                          loadingBarContainer.addChild(enemyMove);
                          loadingBarContainer.removeChild(miniAmazon,miniArcher,minuteMushroom);
                          TweenMax.to(loadingHorse,3,{x:420,onComplete:setStartOfDestinationBar});
                          TweenMax.to(enemyMove,3,{x:randomIntFromInterval(200,19*evt.currentTarget.name),onComplete:setStartOfOverBar});
                          levelNumber = evt.target.name;
                          sonicAttackAllowed = false;
                          archerAttackAllowed = false;
                          gasAttackAllowed = true;
                          mudAttackAllowed = false;
                          amazonAttackAllowed = true;
                          gunmanAttackAllowed = false;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;

                          targetMovingBar = loadingHorse;
                          horseBar = gasPowerBarShape;
                          enemyBar = gunmanPowerBarShape;
                          TweenMax.to(enemyBar,1,{scaleX:100});
                          TweenMax.to(gasPowerBarShape,1,{scaleX:100});
                          TweenMax.to(amazonPowerBarShape,1,{scaleX:100});
                          //TweenMax.to(mudPowerBarShape,1,{scaleX:100});
                          enemy = gunmanAttack;
                          enemy.exists = true;
                          enemyContainer = gunmanContainer;
                          stage.addChild(amazonContainer,gunmanContainer,gasAttackContainer);
                          sonicAttack.isNotDead = false;
                          gasAttack.isNotDead = true;
                          mudAttack.isNotDead = false;
                          archerAttack.isNotDead = false;
                          amazonAttack.isNotDead = true;
                          gunmanAttack.isNotDead = false;

                          showGrid();
                        }
                        else if(evt.currentTarget.name == 17){
                          unsetTheVar = true;
                          levelHero.setText(" Sonic");
                          levelVillian.setText(" Archer");

                          spear.HorseAttacked = sonicAttack;
                          spear.toattackbar = sonicPowerBar;

                          arrow.HorseAttacked = sonicAttack;
                          arrow.toattackbar = sonicPowerBar;

                          miniAmazon.exists = false;
                          archerAttack.exists = true;
                          gunmanAttack.exists = false;
                          mudAttack.exists = false;
                          amazonAttack.exists = true;
                          sonicExists = false;
                          levelNumber = evt.target.name;
                          enemyMove = miniArcher;
                          enemyMove.alpha=1;
                          loadingBarContainer.removeChild(miniAmazon,miniGunman,minuteMushroom);

                          loadingBarContainer.addChild(enemyMove);
                          TweenMax.to(loadingHorse,3,{x:420,onComplete:setStartOfDestinationBar});
                          TweenMax.to(enemyMove,3,{x:randomIntFromInterval(200,18*evt.currentTarget.name),onComplete:setStartOfOverBar});

                          sonicAttackAllowed = true;
                          archerAttackAllowed = true;
                          gasAttackAllowed = false;
                          mudAttackAllowed = false;
                          amazonAttackAllowed = true;
                          gunmanAttackAllowed = false;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;

                          targetMovingBar = loadingHorse;
                          horseBar = sonicPowerBar;
                          enemyBar = archerPowerBar;
                          TweenMax.to(enemyBar,1,{scaleX:100});
                          TweenMax.to(horseBar,1,{scaleX:100});
                          TweenMax.to(amazonPowerBarShape,1,{scaleX:100});
                          enemy = archerAttack;
                          enemy.exists = true;
                          enemyContainer = archerContainer;
                          stage.addChild(amazonContainer,archerContainer,sonicContainer);
                          sonicAttack.isNotDead = true;
                          gasAttack.isNotDead = false;
                          mudAttack.isNotDead = false;
                          archerAttack.isNotDead = false;
                          amazonAttack.isNotDead = true;
                          gunmanAttack.isNotDead = false;

                          showGrid();
                        }
                       
                        else if(evt.currentTarget.name == 18){
                          unsetTheVar = true;
                          levelHero.setText(" Blue-Head&Sonic");
                          levelVillian.setText(" Hunter");
                          levelNumber = evt.target.name;
                          spear.HorseAttacked = mudAttack;
                          spear.toattackbar = mudPowerBarShape;

                          arrow.HorseAttacked = sonicAttack;
                          arrow.toattackbar = sonicPowerBar;
                          levelNumber = evt.target.name;
                          miniAmazon.exists = true;
                          archerAttack.exists = true;
                          gunmanAttack.exists = false;
                          mudAttack.exists = true;
                          amazonAttack.exists = false;
                          sonicAttack.exists = true;
                          horseBar = mudPowerBarShape;
                          enemyMove = miniAmazon;
                          enemyMove.alpha=1;
                          loadingBarContainer.addChild(enemyMove);
                          loadingBarContainer.removeChild(miniGunman,miniArcher,minuteMushroom);
                          targetMovingBar = loadingHorse;
                          TweenMax.to(loadingHorse,3,{x:420,onComplete:setStartOfDestinationBar});
                          TweenMax.to(enemyMove,3,{x:randomIntFromInterval(200,20*evt.currentTarget.name),onComplete:setStartOfOverBar});

                          sonicAttackAllowed = true;
                          archerAttackAllowed = true;
                          gasAttackAllowed = false;
                          mudAttackAllowed = true;
                          amazonAttackAllowed = true;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;
                          enemyBar = amazonPowerBarShape;
                          TweenMax.to(enemyBar,1,{scaleX:100});
                          TweenMax.to(mudPowerBarShape,1,{scaleX:100});
                          TweenMax.to(archerPowerBar,1,{scaleX:100});
                          TweenMax.to(sonicPowerBar,1,{scaleX:100});
                          
                          enemy = amazonAttack;
                          enemy.exists = true;
                          enemyContainer = amazonContainer;
                          stage.addChild(mudAttackContainer,amazonContainer,archerContainer,sonicContainer);
                          sonicAttack.isNotDead = true;
                          gasAttack.isNotDead = false;
                          mudAttack.isNotDead = true;
                          archerAttack.isNotDead = true;
                          amazonAttack.isNotDead = false;
                          gunmanAttack.isNotDead = false;

                          showGrid();
                        }
                         else if(evt.currentTarget.name == 19){
                          unsetTheVar = true;
                          levelHero.setText(" Sonic");
                          levelVillian.setText(" Archer");
                          levelNumber = evt.target.name;
                          spear.HorseAttacked = sonicAttack;
                          spear.toattackbar = sonicPowerBar;

                          arrow.HorseAttacked = sonicAttack;
                          arrow.toattackbar = sonicPowerBar;

                          miniAmazon.exists = false;
                          archerAttack.exists = true;
                          gunmanAttack.exists = false;
                          mudAttack.exists = false;
                          amazonAttack.exists = true;
                          sonicExists = false;

                          enemyMove = miniArcher;
                          enemyMove.alpha=1;
                          loadingBarContainer.removeChild(miniAmazon,miniGunman,minuteMushroom);
                          targetMovingBar = loadingHorse;
                          loadingBarContainer.addChild(enemyMove);
                          TweenMax.to(loadingHorse,3,{x:350,onComplete:setStartOfDestinationBar});
                          TweenMax.to(enemyMove,3,{x:randomIntFromInterval(200,16*evt.currentTarget.name),onComplete:setStartOfOverBar});

                          sonicAttackAllowed = true;
                          archerAttackAllowed = true;
                          gasAttackAllowed = false;
                          mudAttackAllowed = false;
                          amazonAttackAllowed = true;
                          gunmanAttackAllowed = false;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;
                          horseBar = sonicPowerBar;
                          enemyBar = archerPowerBar;
                          TweenMax.to(enemyBar,1,{scaleX:100});
                          TweenMax.to(horseBar,1,{scaleX:100});
                          TweenMax.to(amazonPowerBarShape,1,{scaleX:100});
                          enemy = archerAttack;
                          enemy.exists = true;
                          enemyContainer = archerContainer;
                          stage.addChild(amazonContainer,archerContainer,sonicContainer);
                          sonicAttack.isNotDead = true;
                          gasAttack.isNotDead = false;
                          mudAttack.isNotDead = false;
                          archerAttack.isNotDead = false;
                          amazonAttack.isNotDead = true;
                          gunmanAttack.isNotDead = false;

                          showGrid();
                        }
                        else if(evt.currentTarget.name == 20){
                          unsetTheVar = true;
                          levelHero.setText(" Zebra&Sonic");
                          levelVillian.setText(" GunMan"); 
                          levelNumber = evt.target.name;
                          gasBomb.HorseAttacked = gasAttack;
                          gasBomb.toattackbar = gasPowerBarShape;

                          arrow.HorseAttacked = sonicAttack;
                          arrow.toattackbar = sonicPowerBar;

                          miniGunman.exists = true;
                          archerAttack.exists = true;
                          gunmanAttack.exists = true;
                          mudAttack.exists = false;
                          amazonAttack.exists = false;
                          sonicAttack.exists = true;
                          horseBar = gasPowerBarShape;
                          enemyMove = miniGunman;
                          enemyMove.alpha=1;
                          loadingBarContainer.addChild(enemyMove);
                          loadingBarContainer.removeChild(miniAmazon,miniArcher,minuteMushroom);
                          targetMovingBar = loadingHorse;
                          TweenMax.to(loadingHorse,3,{x:380,onComplete:setStartOfDestinationBar});
                          TweenMax.to(enemyMove,3,{x:randomIntFromInterval(200,15*evt.currentTarget.name),onComplete:setStartOfOverBar});

                          sonicAttackAllowed = true;
                          archerAttackAllowed = true;
                          gasAttackAllowed = true;
                          mudAttackAllowed = false;
                          amazonAttackAllowed = false;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;
                          
                          enemyBar = gunmanPowerBarShape;
                          TweenMax.to(enemyBar,1,{scaleX:100});
                          TweenMax.to(gasPowerBarShape,1,{scaleX:100});
                          TweenMax.to(archerPowerBar,1,{scaleX:100});
                          TweenMax.to(sonicPowerBar,1,{scaleX:100});
                          
                          enemy = gunmanAttack;
                          enemy.exists = true;
                          enemyContainer = gunmanContainer;
                          stage.addChild(gasAttackContainer,sonicContainer,gunmanContainer,archerContainer);
                          sonicAttack.isNotDead = true;
                          gasAttack.isNotDead = true;
                          mudAttack.isNotDead = false;
                          archerAttack.isNotDead = true;
                          amazonAttack.isNotDead = false;
                          gunmanAttack.isNotDead = true;

                          showGrid();
                        }
                        else if(evt.currentTarget.name == 21){
                          unsetTheVar = true;
                          levelHero.setText(" Blue-Head&Zebra");
                          levelVillian.setText(" Hunter");
                          levelNumber = evt.target.name;
                          gasBomb.HorseAttacked = gasAttack;
                          gasBomb.toattackbar = gasPowerBarShape;

                          spear.HorseAttacked = mudAttack;
                          spear.toattackbar = mudPowerBarShape;

                          miniAmazon.exists = true;
                          archerAttack.exists = false;
                          gunmanAttack.exists = true;
                          mudAttack.exists = true;
                          amazonAttack.exists = true;
                          sonicAttack.exists = false;
                          gasAttack.exists = true;
                          //sonicExists = true;
                          horseBar = gasPowerBarShape;
                          enemyMove = miniAmazon;
                          enemyMove.alpha=1;
                          loadingBarContainer.addChild(enemyMove);
                          loadingBarContainer.removeChild(miniGunman,miniArcher,minuteMushroom);
                          targetMovingBar = loadingHorse;
                          TweenMax.to(loadingHorse,3,{x:420,onComplete:setStartOfDestinationBar});
                          TweenMax.to(enemyMove,3,{x:randomIntFromInterval(200,15*evt.currentTarget.name),onComplete:setStartOfOverBar});

                          sonicAttackAllowed = false;
                          archerAttackAllowed = false;
                          gasAttackAllowed = true;
                          mudAttackAllowed = true;
                          amazonAttackAllowed = true;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;

                          
                          enemyBar = amazonPowerBarShape;
                          TweenMax.to(enemyBar,1,{scaleX:100});
                          TweenMax.to(gasPowerBarShape,1,{scaleX:100});
                          TweenMax.to(mudPowerBarShape,1,{scaleX:100});
                          TweenMax.to(gunmanPowerBarShape,1,{scaleX:100});
                          
                          enemy = amazonAttack;
                          enemy.exists = true;
                          enemyContainer = amazonContainer;
                          stage.addChild(amazonContainer,gasAttackContainer,gunmanContainer,mudAttackContainer);
                          sonicAttack.isNotDead = false;
                          gasAttack.isNotDead = true;
                          mudAttack.isNotDead = true;
                          archerAttack.isNotDead = false;
                          amazonAttack.isNotDead = true;
                          gunmanAttack.isNotDead = true;

                          showGrid();
                        }
                         else if(evt.currentTarget.name == 22){
                          unsetTheVar = true;
                          levelHero.setText(" The 3-Muskateers");
                          levelVillian.setText(" Hunter");
                          levelNumber = evt.target.name;
                          spear.HorseAttacked = mudAttack;
                          spear.toattackbar = mudPowerBarShape;

                          arrow.HorseAttacked = sonicAttack;
                          arrow.toattackbar = sonicPowerBar;

                          gasBomb.HorseAttacked = gasAttack;
                          gasBomb.toattackbar = gasPowerBarShape;

                          miniAmazon.exists = true;
                          archerAttack.exists = true;
                          gunmanAttack.exists = true;
                          mudAttack.exists = true;
                          amazonAttack.exists = false;
                          sonicAttack.exists = true;
                          //sonicExists = true;
                          horseBar = mudPowerBarShape;
                          enemyMove = miniAmazon;
                          enemyMove.alpha=1;
                          loadingBarContainer.addChild(enemyMove);
                          loadingBarContainer.removeChild(miniGunman,miniArcher,minuteMushroom);
                          targetMovingBar = loadingHorse;
                          TweenMax.to(loadingHorse,3,{x:420,onComplete:setStartOfDestinationBar});
                          TweenMax.to(enemyMove,3,{x:randomIntFromInterval(200,15*evt.currentTarget.name),onComplete:setStartOfOverBar});

                          sonicAttackAllowed = true;
                          archerAttackAllowed = true;
                          gasAttackAllowed = true;
                          mudAttackAllowed = true;
                          amazonAttackAllowed = true;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;
                          gunmanAttackAllowed = true;
                          enemyBar = amazonPowerBarShape;
                          TweenMax.to(enemyBar,1,{scaleX:100});
                          TweenMax.to(mudPowerBarShape,1,{scaleX:100});
                          TweenMax.to(archerPowerBar,1,{scaleX:100});
                          TweenMax.to(sonicPowerBar,1,{scaleX:100});
                          TweenMax.to(gunmanPowerBarShape,1,{scaleX:100});
                          TweenMax.to(gasPowerBarShape,1,{scaleX:100});
                          enemy = amazonAttack;
                          enemy.exists = true;
                          enemyContainer = amazonContainer;
                          stage.addChild(amazonContainer,sonicContainer,gunmanContainer,gasAttackContainer,mudAttackContainer,archerContainer);
                          sonicAttack.isNotDead = true;
                          gasAttack.isNotDead = true;
                          mudAttack.isNotDead = true;
                          archerAttack.isNotDead = true;
                          amazonAttack.isNotDead = true;
                          gunmanAttack.isNotDead = true;

                          showGrid();
                        }
                         else if(evt.currentTarget.name == 23){
                          unsetTheVar = true;
                          levelHero.setText(" Sonic&Zebra");
                          levelVillian.setText(" Archer");
                          levelNumber = evt.target.name;
                          gasBomb.HorseAttacked = gasAttack;
                          gasBomb.toattackbar = gasPowerBarShape;
                          arrow.HorseAttacked = sonicAttack;
                          arrow.toattackbar = sonicPowerBar;
                          miniGunman.exists = true;
                          archerAttack.exists = true;
                          gunmanAttack.exists = true;
                          mudAttack.exists = false;
                          amazonAttack.exists = false;
                          sonicAttack.exists = true;
                          //sonicExists = true;
                          horseBar = gasPowerBarShape;
                          enemyMove = miniGunman;
                          enemyMove.alpha=1;
                          loadingBarContainer.addChild(enemyMove);
                          loadingBarContainer.removeChild(miniArcher,minuteMushroom);
                          targetMovingBar = loadingHorse;
                          TweenMax.to(loadingHorse,3,{x:420,onComplete:setStartOfDestinationBar});
                          TweenMax.to(enemyMove,3,{x:randomIntFromInterval(380,410),onComplete:setStartOfOverBar});

                          sonicAttackAllowed = true;
                          archerAttackAllowed = true;
                          gasAttackAllowed = true;
                          mudAttackAllowed = false;
                          amazonAttackAllowed = false;
                          potionDrankAllowed = true;
                          mushroomEatenAllowed = true;
                          enemyBar = gunmanPowerBarShape;
                          TweenMax.to(enemyBar,1,{scaleX:100});
                          TweenMax.to(gasPowerBarShape,1,{scaleX:100});
                          TweenMax.to(archerPowerBar,1,{scaleX:100});
                          TweenMax.to(sonicPowerBar,1,{scaleX:100});
                          enemy = gunmanAttack;
                          enemy.exists = true;
                          enemyContainer = gunmanContainer;
                          stage.addChild(gasAttackContainer,sonicContainer,gunmanContainer,archerContainer);
                          sonicAttack.isNotDead = true;
                          gasAttack.isNotDead = true;
                          mudAttack.isNotDead = false;
                          archerAttack.isNotDead = true;
                          amazonAttack.isNotDead = false;
                          gunmanAttack.isNotDead = true;

                          showGrid();
                        }
                      }
                      function howToPlay(){
                        if(helpMe===true){
                          for(var i=1;i<24;i++){
                              TweenMax.to(levelTileContainer[i],1,{alpha:0});
                            }
                        }

                        htpContainer.addChild(panel);
                        panel.x = -170;
                        panel.y = -120;
                         for(var i=0;i<6;i++){
                         
                            for(var j=0;j<3;j++){
                           
                              htpNumber = htpTile[i][j];
                              //alert(htpNumber);
                              htpTile[i][j] = shape[htpNumber].clone();
                              htpTile[i][j].i=i;
                              htpTile[i][j].j=j;
                              htpTile[i][j].name = htpNumber;
                              htpTilesContainer.addChild(htpTile[i][j]);
                              if(htpNumber == 6)
                                htpSameTile.push(htpTile[i][j]);
                              htpTile[i][j].x = (60*i);
                              htpTile[i][j].y = 52*j;
                              htpTile[i][j].alpha = 1;
                            }
                             var kk = shape[0].clone();
                          if(i==0)
                              htpConnectingLines.push(kk.clone());
                          else if(i==1)
                            {
                              kk.rotation = 90;
                              htpConnectingLines.push(kk.clone());
                            }
                          else if(i==2)
                          {
                            kk.rotation = 45;
                            htpConnectingLines.push(kk.clone());
                          }
                          else if(i==3)
                          {
                            kk.rotation = 45;
                            htpConnectingLines.push(kk.clone());
                          }
                          else if(i==4)
                          {
                            kk.rotation = 90;
                            htpConnectingLines.push(kk.clone());
                          }
                          else if(i==5)
                          {
                            kk.rotation = 135;
                            htpConnectingLines.push(kk.clone());
                          }
                            
                            htpTilesContainer.addChild(htpConnectingLines[i]);
                            htpConnectingLines[i].alpha = 0;
                        }
                            htpTilesContainer.addChild(pencilCursor)
                            htpContainer.addChildAt(htpTilesContainer,1);
                            htpContainer.addChild(htpChainText,htpGoalText,htpNoteText,htpImpNotes,htpNextButton,htpNextButton1,htpNextButton2,htpNextButton3);
                        htpNextButton.alpha = 1;
                        panel.alpha = 1;
                        htpNextButton.x = htpNextButton1.x = htpNextButton2.x = htpNextButton3.x = 275;
                        htpNextButton.y = htpNextButton1.y = htpNextButton2.y = htpNextButton3.y = 175 ;
                        htpNextButton1.alpha = 0;
                        htpNextButton2.alpha = 0;
                        htpNextButton3.alpha = 0;
                        htpChainText.x = -100;
                        htpChainText.y = -48;
                        htpChainText.alpha = 1;
                        htpGoalText.alpha = 0;
                        htpNoteText.alpha = 0;
                        htpImpNotes.alpha = 0;
                        htpGoalText.x = htpNoteText.x = htpImpNotes.x = -100;
                        htpGoalText.y = htpNoteText.y = htpImpNotes.y = -41;
                        htpConnectingLines[0].x = htpSameTile[1].x+25;
                        htpConnectingLines[0].y = htpSameTile[1].y-15;
                        htpConnectingLines[1].x = htpSameTile[2].x+23;
                        htpConnectingLines[1].y = htpSameTile[2].y+27;
                        htpConnectingLines[2].x = htpSameTile[3].x+11;
                        htpConnectingLines[2].y = htpSameTile[2].y-17;
                        htpConnectingLines[3].x = htpSameTile[4].x+10;
                        htpConnectingLines[3].y = htpSameTile[2].y-64;
                        htpConnectingLines[4].x = htpSameTile[5].x+22;
                        htpConnectingLines[4].y = htpSameTile[2].y-76;
                        htpConnectingLines[5].x = htpSameTile[6].x+22;
                        htpConnectingLines[5].y = htpSameTile[2].y-32;

                        htpContainer.x = 400;
                        htpContainer.y = 250;
                        pencilCursor.x = -150;
                        pencilCursor.y = 100;
                        stage.addChild(htpContainer);
                        htpContainer.alpha = 0;
                        TweenMax.to(htpContainer,3,{alpha:1});
                        TweenMax.to(pencilCursor,7, {bezier: {values:[{x:htpSameTile[0].x+20, y:htpSameTile[0].y+10},{x:htpSameTile[1].x+20, y:htpSameTile[1].y},{x:htpSameTile[2].x+20,y:htpSameTile[2].y},{x:htpSameTile[3].x+20,y:htpSameTile[3].y+20},{x:htpSameTile[4].x+20,y:htpSameTile[4].y+20},{x:htpSameTile[5].x+20,y:htpSameTile[5].y+20},{x:htpSameTile[6].x+20,y:htpSameTile[6].y+20}]},onComplete:allowNextButtonClick,ease:Linear.easeNone});
                        TweenMax.staggerTo(htpConnectingLines, 6, {alpha:1,delay:2}, 0.9);
                    
                      }
                      function allowNextButtonClick(){
                        clickOnce = true;
                      }
                      function setStartOfOverBar(){
                        TweenMax.to(loadingBarOverContainer,1,{x:this.target.x,onComplete:setWidth});
                      }
                      function setStartOfDestinationBar(){

                        TweenMax.to(destinationBarOverContainer,1,{x:loadingHorse.x+10,onComplete:setDestinationWidth});
                      }
                      function setDestinationWidth(){
                       
                        destination = Math.round((flag.x-20) - loadingHorse.x);

                        if(destination<=0)
                            levelComplete(); 

                        TweenMax.to(destinationBarOver,1,{scaleX:destination,onComplete:setDestinationText});
                      }
                      function setDestinationText(){
                       
                        destinationBarOverText.x = (this.target.scaleX/3);
                        destinationBarOverText.y = 15;
                        destinationBarOverText.text = this.target.scaleX;
                      }
                      function setWidth(){
                        distance = Math.round(-loadingBarOverContainer.x + (loadingHorse.x-10));
                        TweenMax.to(loadingBarOver,1,{scaleX:distance,onComplete:setText});
                      }
                      function setText(){

                        loadingBarOverText.x = (this.target.scaleX/3);
                        loadingBarOverText.y = 15;
                        loadingBarOverText.text = distance;
                        if(distance<=0)
                          gameOverr();
                      }
                      function gameOverr(){
                        transitionNum = [];
                        bombNum = [];
                        potionDrankBar.scaleX = 0;
                        mushroomEatenBar.scaleX = 0;
                        sonicAttackAllowed = false;
                        archerAttackAllowed = false;
                        gasAttackAllowed = false;
                        mudAttackAllowed = false;
                        clickAllowed = false;
                        connectingLines = [];
                        stage.addChild(thinSheet,gameOver,exitButton);
                        TweenMax.to(gameOver,1,{x:220,y:160,ease:Bounce.easeOut});
                        stars = 0;
                      }
                      function levelComplete(){
                        transitionNum = [];
                        bombNum = [];
                        checkSimilar = [];
                        nextLevelButton.alpha = 0;
                        if (typeof(Storage) != "undefined") {
                            if(lockStatus[currentLevel+1]===true){
                                for(var i=1;i<=currentLevel+1;i++){
                                    locked[i] = false;
                                 }
                              localStorage["locked"] = JSON.stringify(locked);
                            }
                            if(starStatus[currentLevel]<stars){
                              if(stars>3)
                                stars = 3;
                              starStatus[currentLevel] = stars;

                              for(var i=1;i<=lockStatus.length;i++){
                                  numOfStars[i] = starStatus[i];
                              }
                              localStorage["numOfStars"] = JSON.stringify(numOfStars);
                            }
                        } else {
                            document.getElementById("result").innerHTML = "Sorry, your browser does not support Web Storage...";
                        }
                        stars = 0;
                        stage.addChild(thinSheet,lightening);
                        horseSound[randomIntFromInterval(1,3)].play();
                        lvlCom.play();
                        lightening.alpha = 0.4;
                        TweenMax.to(lightening,4,{rotation:360,scaleX:2.5,scaleY:2.5,onComplete:slowRotation});
                        sonicAttackAllowed = false;
                        archerAttackAllowed = false;
                        gasAttackAllowed = false;
                        mudAttackAllowed = false;
                        clickAllowed = false;
                        connectingLines = [];
                        levelCompleteEnemy = enemyMove.clone();
                        levelCompleteEnemy.alpha = 0;
                        levelCompleteEnemy.x = 500;
                        levelCompleteEnemy.y = 490;
                        enemyMove.alpha=1;
                        stage.addChild(levelcompleteContainer,congratulationsText,lcMushroom,lcPotion);
                        if(enemy.exists == false){
                          stage.addChild(levelCompleteEnemy);
                          TweenMax.to(levelCompleteEnemy,1,{alpha:1,delay:1});
                        }
                        locker[currentLevel+1].locked = false;
                        TweenMax.to(levelcompleteContainer,1,{x:360,onComplete:showCongratulations});
                      }
                      function showCongratulations(){
                        TweenMax.to(congratulationsText,1,{y:270,onComplete:originalCordinates,ease:Bounce.easeOut});
                        TweenMax.to(lcMushroom,1,{alpha:1});
                        TweenMax.to(lcPotion,1,{alpha:1});
                        stage.addChild(mushroomEatenText,potionDrankText);
                      }
                      function originalCordinates(){
                        gemSpawn.play();
                        if(potionBarStarIsBlinking){
                          stared.x = 530;
                          stared.y = 448;
                          stage.addChild(stared.clone(),potionStarExplosion);
                        }
                        if(mushroomBarStarIsBlinking){
                          stared.x = 530;
                          stared.y = 355;                         
                          stage.addChild(stared.clone(),mushroomStarExplosion);
                        }
                        if(enemy.exists == false){
                          stared.x = 530;
                          stared.y = 500;
                          stage.addChild(stared.clone(),enemyStarExplosion);
                        }
                      }
                      function slowRotation(){
                        TweenMax.to(this.target,6,{rotation:30});
                        TweenMax.to(nextLevelButton,1,{alpha:1,delay:2});
                      }
                      function randomIntFromInterval(min,max)
                      {
                          return Math.floor(Math.random()*(max-min+1)+min);
                      }
                      function showGrid(){
                        TweenMax.to(lizardContainerIn,2,{alpha:1});
                            TweenMax.to(chameleonMovementIn,2,{alpha:1});
                            TweenMax.to(snakeMovementIn,2,{alpha:1});
                        for(var i=0;i<6;i++){
                          grid[i] = [];
                          tile[i] = [];
                          tileBg[i] = [];
                            for(var j=0;j<6;j++){
                              if(grid[i][j]==null){
                                grid[i][j] = randomIntFromInterval(3,9);
                                if((grid[i][j]==4)&&(transitionNum.length <2)){
                                  transitionNum.push(grid[i][j]);
                                }
                                else if(grid[i][j]==4){
                                    grid[i][j] = randomIntFromInterval(5,9);
                                }
                                else if((grid[i][j]==3)&&(bombNum.length <=0)){
                                  bombNum.push(grid[i][j]);
                                }
                                else if(grid[i][j]==3){
                                    grid[i][j] = randomIntFromInterval(5,9);
                                }
                            }                              
                              var number = grid[i][j];
                              tile[i][j] = shape[number].clone();
                              tile[i][j].i=i;
                              tile[i][j].j=j;
                              tile[i][j].name = number;
                              if((i+j)%2==0)
                                tileBg[i][j] = createTile();
                              else
                                tileBg[i][j] = createDarkTile();
                              tile[i][j].x = tileBg[i][j].x = 353+(60*i);
                              tile[i][j].y = -100;
                              tileBg[i][j].y= 180+(60*j);
                              if(tile[i][j].name == 4 || tile[i][j].name == 3){
                                tile[i][j].alpha = 1;
                              }
                              else{
                                tile[i][j].alpha = 0.99;
                                tile[i][j].addEventListener("click",onTileClick);
                              }
                              tile[i][j].defined = true;
                              tile[i][j].tweened = false;
                              tile[i][j].on("rollover",onTileOver);
                              tile[i][j].on("pressmove", function(evt){
                                if(evt.target.alpha ==1){

                                if(scaleFactor<1){
                                 var o = stage.getObjectUnderPoint(evt.stageX*1/scaleFactor, evt.stageY*1/scaleFactor);
                                 o.dispatchEvent("rollover");
                                 }else{
                                 var o = stage.getObjectUnderPoint(evt.stageX, evt.stageY);
                                   o.dispatchEvent("rollover");
                                 }
                                }
                                  //console.log("GET", o, evt.stageX, evt.stageY);
                              });
                              //tile[i][j].addEventListener("rollout",onTileOut);
                              stage.addChild(tileBg[i][j],tile[i][j]);
                             
                              TweenMax.to(tile[i][j],2,{y:180+(60*j),delay:5,ease:Bounce.easeOut});
                            }
                        }
                              stage.addChild(fightText);
                              TweenMax.to(fightText,2,{y:160,delay:3,onComplete:restartFight,ease:Bounce.easeOut});

                      }
                      function restartFight(){
                        gemSpawn.play();
                        TweenMax.to(this.target,1,{alpha:0,onComplete:removeFight});
                      }
                      function removeFight(){
                        stage.removeChild(this.target);
                        this.target.alpha = 1;
                        this.target.y = -150;
                      }
                      function onTileOver(evt){
                        var x = evt.target.i;
                        var y = evt.target.j;
                        if((evt.target.alpha==1)&&(rotationDone)){
                          //if transition tile represented by number 4 does not exist in checksimilar Array and checksimilar array is not empty and the current tile is '4' then add the child in the array
                          if((checkSimilar.indexOf(evt.target)<0)&&(checkSimilar.length>0)&&((evt.target.name==4)||(evt.target.name==3))){
                            
                            checkSimilar.push(evt.target);
                            
                             if((checkNeighbours(evt.target))==true){

                              if((evt.target.name==4)){
                              if(checkSimilar[checkSimilar.length-2].name==4){
                                //alert("i m here")
                                  while(tilesAroundTransitionTile.length-1>=0){
                                                        // console.log("tilesAroundTransitionTile.length-1 "+(tilesAroundTransitionTile.length-1));
                                                        if(tilesAroundTransitionTile[tilesAroundTransitionTile.length-1].name !=4)
                                                          TweenMax.to(tilesAroundTransitionTile[tilesAroundTransitionTile.length-1],0.25,{alpha:0.25});                                                          
                                                          tilesAroundTransitionTile.pop();
                                                      }

                                                    for(var i=0;i<6;i++){
                                                      for(var j=0;j<6;j++){
                                                          //agar last element 4 tha aur current element 2nd last ha to.
                                                          if((tile[i][j] !=null)&&((tile[i][j].name==4)||(tile[i][j].name==3))){
                                                            TweenMax.to(tile[i][j],0.25,{alpha:1})
                                                          }
                                                          else if(checkSimilar.indexOf(tile[i][j])<0){
                                                            TweenMax.to(tile[i][j],0.25,{alpha:0.25})
                                                          }
                                                      }
                                                    }

                              }
                              for(var i=0;i<6;i++){
                                                      for(var j=0;j<6;j++){
                                                          //agar last element 4 tha aur current element 2nd last ha to.
                                                          if((tile[i][j] !=null)&&((tile[i][j].name==4)||(tile[i][j].name==3))){
                                                            TweenMax.to(tile[i][j],0.25,{alpha:1})
                                                          }
                                                          else if(checkSimilar.indexOf(tile[i][j])<0){
                                                            //TweenMax.to(tile[i][j],0.25,{alpha:0.25})
                                                            tile[i][j].alpha = 0.25;
                                                          }
                                                      }
                                                    }
                                    if((y+1<=5)&&(tile[x][y+1].alpha != 1)){
                                      TweenMax.to(tile[x][y+1],0.25,{alpha:1});
                                      tilesAroundTransitionTile.push(tile[x][y+1]);
                                    }
                                    if((y-1>=0)&&(tile[x][y-1].alpha != 1)){
                                      TweenMax.to(tile[x][y-1],0.25,{alpha:1});
                                      tilesAroundTransitionTile.push(tile[x][y-1]);
                                    }
                                    if((x+1<=5)&&(tile[x+1][y].alpha != 1)){
                                      TweenMax.to(tile[x+1][y],0.25,{alpha:1});
                                      tilesAroundTransitionTile.push(tile[x+1][y]);
                                    }
                                    if((x-1>=0)&&(tile[x-1][y].alpha != 1)){
                                      TweenMax.to(tile[x-1][y],0.25,{alpha:1});
                                      tilesAroundTransitionTile.push(tile[x-1][y]);
                                    }
                                    if((((x+1)<=5)&&((y+1)<=5))&&(tile[x+1][y+1].alpha != 1)){
                                      TweenMax.to(tile[x+1][y+1],0.25,{alpha:1});
                                      tilesAroundTransitionTile.push(tile[x+1][y+1]);
                                    }
                                    if((((x-1)>=0)&&((y-1)>=0))&&(tile[x-1][y-1].alpha != 1)){
                                      TweenMax.to(tile[x-1][y-1],0.25,{alpha:1});
                                      tilesAroundTransitionTile.push(tile[x-1][y-1]);
                                    }
                                    if((((x+1)<=5)&&((y-1)>=0))&&(tile[x+1][y-1].alpha != 1)){
                                      TweenMax.to(tile[x+1][y-1],0.25,{alpha:1});
                                      tilesAroundTransitionTile.push(tile[x+1][y-1]);
                                    }
                                    if((((x-1)>=0)&&((y+1)<=5))&&(tile[x-1][y+1].alpha != 1)){
                                      TweenMax.to(tile[x-1][y+1],0.25,{alpha:1});
                                      tilesAroundTransitionTile.push(tile[x-1][y+1]);
                                    }
                                  //  console.log("tilesAroundTransitionTile length = "+tilesAroundTransitionTile.length);
                             }
                               else if((evt.target.name==3)){
                                if(checkSimilar[checkSimilar.length-2].name==4){
                                                while(tilesAroundTransitionTile.length-1>=0){
                                                       //  console.log("tilesAroundTransitionTile.length-1 "+(tilesAroundTransitionTile.length-1));
                                                         //if(tilesAroundTransitionTile[tilesAroundTransitionTile.length-1].name !=4)
                                                        tilesAroundTransitionTile[tilesAroundTransitionTile.length-1].alpha = 0.25;
                                                        //  TweenMax.to(tilesAroundTransitionTile[tilesAroundTransitionTile.length-1],0.25,{alpha:0.25});
                                                          
                                                          tilesAroundTransitionTile.pop();
                                                          
                                                      }

                              }
                                 if((y+1<=5)&&(tile[x][y+1].alpha != 1)){
                                        TweenMax.to(tile[x][y+1],0.25,{alpha:1});
                                        tilesAroundBomb.push(tile[x][y+1]);
                                      }
                                      //y-1=> tile above the transiton tile
                                      if((y-1>=0)&&(tile[x][y-1].alpha != 1)){
                                        TweenMax.to(tile[x][y-1],0.25,{alpha:1});
                                        tilesAroundBomb.push(tile[x][y-1]);
                                      }
                                      // X+1 => tile next to the transtion tile
                                      if((x+1<=5)&&(tile[x+1][y].alpha != 1)){
                                        TweenMax.to(tile[x+1][y],0.25,{alpha:1});
                                        tilesAroundBomb.push(tile[x+1][y]);
                                      }
                                      //tile behind the transition tile
                                      if((x-1>=0)&&(tile[x-1][y].alpha != 1)){
                                        TweenMax.to(tile[x-1][y],0.25,{alpha:1});
                                        tilesAroundBomb.push(tile[x-1][y]);
                                      }
                              }
                             }// if they are not neighours then remove the tile from the checksimilar array
                             else{
                              if(checkSimilar[checkSimilar.length-1].name == 4)
                                 {
                                  transitionNum.pop();
                                  //console.log("transitionNum = "+transitionNum.length);
                                }
                              else if(checkSimilar[checkSimilar.length-1].name == 3)
                                    bombNum.pop();

                              checkSimilar.pop();

                             }
                            //checkSimilar[],// now lit up the tiles around the transiton tileif a tile exists below the transition tile and its alpha is not 1 then make it 1
                          }
                          //if the transiton tile exists in the checksimilar array:
                          else if(checkSimilar.indexOf(evt.target)>=0){
                           //console.log("target exists");
                           //suppose if Checksimilar.length=5;then Index of last element = 4;and Index of 2nd last element = 3; so if current evt ==2nd last element
                              if(checkSimilar.indexOf(evt.target)==(checkSimilar.length-2)){
                                //and the last element is 4
                                    if((checkSimilar[checkSimilar.length-1].name==4)&&(checkSimilar[checkSimilar.length-2].name!=4)&&(checkSimilar[checkSimilar.length-2].name!=3)){
    //2,1,0,-1
                                                    while(tilesAroundTransitionTile.length-1>=0){
                                                       //  console.log("tilesAroundTransitionTile.length-1 "+(tilesAroundTransitionTile.length-1));
                                                         //if(tilesAroundTransitionTile[tilesAroundTransitionTile.length-1].name !=4)
                                                        //tilesAroundTransitionTile[tilesAroundTransitionTile.length-1].alpha = 0.5;
                                                          TweenMax.to(tilesAroundTransitionTile[tilesAroundTransitionTile.length-1],0.25,{alpha:0.25});
                                                          
                                                          tilesAroundTransitionTile.pop();
                                                          
                                                      }

                                                    for(var i=0;i<6;i++){
                                                      for(var j=0;j<6;j++){
                                                          //agar last element 4 tha aur current element 2nd last ha to.
                                                        
                                                          if((tile[i][j] !=null)&&((tile[i][j].name == evt.target.name)||(tile[i][j].name==4)||(tile[i][j].name==3))){
                                                            //tile[i][j].alpha = 1;
                                                            TweenMax.to(tile[i][j],0.25,{alpha:1});
                                                          }
                                                          else if(checkSimilar.indexOf(tile[i][j])<0){
                                                            //tile[i][j].alpha = 0.5;
                                                            TweenMax.to(tile[i][j],0.25,{alpha:0.25})
                                                          }
                                                      }
                                                    }
                                    }
                                    else if((checkSimilar[checkSimilar.length-1].name==3)&&(checkSimilar[checkSimilar.length-2].name!=4)&&(checkSimilar[checkSimilar.length-2].name!=3)){

                                                  while(tilesAroundBomb.length-1>=0){
                                                       //console.log("tilesAroundTransitionTile.length-1 "+(tilesAroundBomb.length-1))
                                                          TweenMax.to(tilesAroundBomb[tilesAroundBomb.length-1],0.25,{alpha:0.25});
                                                          tilesAroundBomb.pop();
                                                      }

                                                    for(var i=0;i<6;i++){
                                                      for(var j=0;j<6;j++){
                                                          //agar last element 4 tha aur current element 2nd last ha to.
                                                          if((tile[i][j] !=null)&&((tile[i][j].name == evt.target.name)||(tile[i][j].name==4)||(tile[i][j].name==3))){
                                                            //tile[i][j].alpha = 1;
                                                            TweenMax.to(tile[i][j],0.25,{alpha:1});
                                                          }
                                                          else if(checkSimilar.indexOf(tile[i][j])<0){
                                                            //tile[i][j].alpha = 0.5;
                                                            TweenMax.to(tile[i][j],0.25,{alpha:0.25})
                                                          }
                                                      }
                                                    }

                                    }
                                     else if((checkSimilar[checkSimilar.length-1].name==4)&&(checkSimilar[checkSimilar.length-2].name==3)){
                                      var tileLeadingToBomb = checkSimilar[checkSimilar.length-3].name;
                                        while(tilesAroundTransitionTile.length-1>=0){
                                                       //  console.log("tilesAroundTransitionTile.length-1 "+(tilesAroundTransitionTile.length-1));
                                                         //if(tilesAroundTransitionTile[tilesAroundTransitionTile.length-1].name !=4)
                                                        tilesAroundTransitionTile[tilesAroundTransitionTile.length-1].alpha = 0.25;
                                                        //  TweenMax.to(tilesAroundTransitionTile[tilesAroundTransitionTile.length-1],0.25,{alpha:0.25});
                                                          
                                                          tilesAroundTransitionTile.pop();
                                                          
                                                      }
                                                    if((y+1<=5)&&(tile[x][y+1].alpha != 1)){
                                                      TweenMax.to(tile[x][y+1],0.25,{alpha:1});
                                                      tilesAroundBomb.push(tile[x][y+1]);
                                                    }
                                                    //y-1=> tile above the transiton tile
                                                    if((y-1>=0)&&(tile[x][y-1].alpha != 1)){
                                                      TweenMax.to(tile[x][y-1],0.25,{alpha:1});
                                                      tilesAroundBomb.push(tile[x][y-1]);
                                                    }
                                                    // X+1 => tile next to the transtion tile
                                                    if((x+1<=5)&&(tile[x+1][y].alpha != 1)){
                                                      TweenMax.to(tile[x+1][y],0.25,{alpha:1});
                                                      tilesAroundBomb.push(tile[x+1][y]);
                                                    }
                                                    //tile behind the transition tile
                                                    if((x-1>=0)&&(tile[x-1][y].alpha != 1)){
                                                      TweenMax.to(tile[x-1][y],0.25,{alpha:1});
                                                      tilesAroundBomb.push(tile[x-1][y]);
                                                    }
                                                    for(var i=0;i<6;i++){
                                                      for(var j=0;j<6;j++){
                                                          //agar last element 4 tha aur current element 2nd last ha to.
                                                          if((tile[i][j] !=null)&&((tile[i][j].name == tileLeadingToBomb)||(tile[i][j].name==4)||(tile[i][j].name==3))){
                                                            //tile[i][j].alpha = 1;
                                                            TweenMax.to(tile[i][j],0.25,{alpha:1});
                                                          }
                                                      }
                                                    }
                                }else if((checkSimilar[checkSimilar.length-1].name==3)&&(checkSimilar[checkSimilar.length-2].name==3)){
                                  
                                    while(tilesAroundBomb.length-1>=0){
                                                       //console.log("tilesAroundTransitionTile.length-1 "+(tilesAroundBomb.length-1))
                                                       tilesAroundBomb[tilesAroundBomb.length-1].alpha=0.25;
                                                          //TweenMax.to(tilesAroundBomb[tilesAroundBomb.length-1],0.25,{alpha:0.25});
                                                          tilesAroundBomb.pop();
                                                      }

                                                    if((y+1<=5)&&(tile[x][y+1].alpha != 1)){
                                                      TweenMax.to(tile[x][y+1],0.25,{alpha:1});
                                                      tilesAroundBomb.push(tile[x][y+1]);
                                                    }
                                                    //y-1=> tile above the transiton tile
                                                    if((y-1>=0)&&(tile[x][y-1].alpha != 1)){
                                                      TweenMax.to(tile[x][y-1],0.25,{alpha:1});
                                                      tilesAroundBomb.push(tile[x][y-1]);
                                                    }
                                                    // X+1 => tile next to the transtion tile
                                                    if((x+1<=5)&&(tile[x+1][y].alpha != 1)){
                                                      TweenMax.to(tile[x+1][y],0.25,{alpha:1});
                                                      tilesAroundBomb.push(tile[x+1][y]);
                                                    }
                                                    //tile behind the transition tile
                                                    if((x-1>=0)&&(tile[x-1][y].alpha != 1)){
                                                      TweenMax.to(tile[x-1][y],0.25,{alpha:1});
                                                      tilesAroundBomb.push(tile[x-1][y]);
                                                    }
                                                    for(var i=0;i<6;i++){
                                                      for(var j=0;j<6;j++){
                                                          //agar last element 4 tha aur current element 2nd last ha to.
                                                          if((tile[i][j] !=null)&&((tile[i][j].name == tileLeadingToBomb)||(tile[i][j].name==4)||(tile[i][j].name==3))){
                                                            //tile[i][j].alpha = 1;
                                                            TweenMax.to(tile[i][j],0.25,{alpha:1});
                                                          }
                                                      }
                                                    }
                                     }

                                      // if 2nd last element is 4 then lit up the tilesAroundTransition tile
                                    else if((checkSimilar[checkSimilar.length-2].name==4)){
                                                for(var i=0;i<6;i++){
                                                  for(var j=0;j<6;j++){
                                                    // if tile is not null and it doesnot exist in the checksimilar array
                                                    if((tile[i][j] != null)&&(checkSimilar.indexOf(tile[i][j])<0)&&(tile[i][j].name!=4)&&(tile[i][j].name !=3)){
                                                      tile[i][j].alpha = 0.25;
                                                      //TweenMax.to(tile[i][j],0.15,{alpha:0.25})
                                                    }
                                                  }
                                                }
                                        // lit up the tilesAround the transitiontile

                                                if((y+1<=5)&&(tile[x][y+1].alpha != 1)){
                                                  TweenMax.to(tile[x][y+1],0.25,{alpha:1});
                                                  tilesAroundTransitionTile.push(tile[x][y+1]);
                                                }
                                              if((y-1>=0)&&(tile[x][y-1].alpha != 1)){
                                                TweenMax.to(tile[x][y-1],0.25,{alpha:1});
                                                tilesAroundTransitionTile.push(tile[x][y-1]);
                                              }
                                              if((x+1<=5)&&(tile[x+1][y].alpha != 1)){
                                                TweenMax.to(tile[x+1][y],0.25,{alpha:1});
                                                tilesAroundTransitionTile.push(tile[x+1][y]);
                                              }                                               
                                              if((x-1>=0)&&(tile[x-1][y].alpha != 1)){
                                                TweenMax.to(tile[x-1][y],0.25,{alpha:1});
                                                tilesAroundTransitionTile.push(tile[x-1][y]);
                                              }
                                              if((((x+1)<=5)&&((y+1)<=5))&&(tile[x+1][y+1].alpha != 1)){
                                                TweenMax.to(tile[x+1][y+1],0.25,{alpha:1});
                                                tilesAroundTransitionTile.push(tile[x+1][y+1]);
                                              }
                                              if((((x-1)>=0)&&((y-1)>=0))&&(tile[x-1][y-1].alpha != 1)){
                                                TweenMax.to(tile[x-1][y-1],0.5,{alpha:1});
                                                tilesAroundTransitionTile.push(tile[x-1][y-1]);
                                              }
                                              if((((x+1)<=5)&&((y-1)>=0))&&(tile[x+1][y-1].alpha != 1)){
                                                TweenMax.to(tile[x+1][y-1],0.25,{alpha:1});
                                                tilesAroundTransitionTile.push(tile[x+1][y-1]);
                                              }
                                              if((((x-1)>=0)&&((y+1)<=5))&&(tile[x-1][y+1].alpha != 1)){
                                                TweenMax.to(tile[x-1][y+1],0.25,{alpha:1});
                                                tilesAroundTransitionTile.push(tile[x-1][y+1]);
                                              }
                                      }
                                  //console.log("second last tile");
                                  if(checkSimilar[checkSimilar.length-1].name == 4)
                                     {
                                  //console.log("transitionNum = "+transitionNum.length);
                                    }
                                  else if(checkSimilar[checkSimilar.length-1].name == 3)
                                   {} //bombNum.pop();
                                 if(touchScreen == false)
                                    TweenMax.to(checkSimilar[checkSimilar.length-1].tileOverTween,0.5,{alpha:0,onComplete:removeTileOver})
                                  checkSimilar.pop();
                                 // console.log(checkSimilar.length);
                                  if(checkSimilar.length == 1){
                                    stage.removeChild(connectingLines[0]);
                                    unMatch.play();
                                    connectingLines.pop();
                                 //   console.log(connectingLines.length);
                                    }
                              }
                          }
                          else{
                            checkSimilar.push(evt.target);
                              if(((checkSimilar[checkSimilar.length-2])!=undefined)&&(checkSimilar[checkSimilar.length-2].name==4)){
                                  while((tilesAroundTransitionTile.length-1)>=0){
                                          // console.log("tilesAroundTransitionTile.length-1 "+(tilesAroundTransitionTile.length-1));
                                             if(tilesAroundTransitionTile[tilesAroundTransitionTile.length-1].name!=evt.target.name){
                                            TweenMax.to(tilesAroundTransitionTile[tilesAroundTransitionTile.length-1],0.25,{alpha:0.25});
                                            
                                             }
                                            tilesAroundTransitionTile.length--;
                                      }
                                      for(var i=0;i<6;++i){
                                        for(var j=0;j<6;++j){
                                          if((tile[i][j] != null)&&(tile[i][j].name==evt.target.name)){
                                            TweenMax.to(tile[i][j],0.25,{alpha:1});
                                          }
                                          else if((checkSimilar.indexOf(tile[i][j])<0)&&(tile[i][j].name !=4)&&(tile[i][j].name !=3)){
                                            TweenMax.to(tile[i][j],0.25,{alpha:0.25});
                                          }
                                        }
                                      }
                              }// if the tiles are neighours then fine do nothing
                             else if((checkNeighbours(evt.target))==true){
                             // console.log("they are neighbours");
                             }// if they are not neighours then remove the tile from the checksimilar array
                             else{
                              if(checkSimilar[checkSimilar.length-1].name == 4)
                                 {
                                }
                                else if(checkSimilar[checkSimilar.length-1].name == 3)
                                {
                                  //bombNum.pop();
                                }
                              checkSimilar.pop();
                             }
                          }
                          var inde = checkSimilar.indexOf(evt.target);
                                if(evt.target.name == 5){
                                  colorOfChain = shape[0];
                                  musicToPlay = gemA;
                                }
                                else if(evt.target.name == 6){
                                  colorOfChain = shape[1];
                                  musicToPlay = gemB;
                                }
                                else if(evt.target.name == 7){
                                  colorOfChain = shape[2];
                                  musicToPlay = gemC;
                                }
                                else if(evt.target.name == 8){
                                  colorOfChain = shape[2];
                                  musicToPlay = gemD;
                                }
                                else if(evt.target.name == 9){
                                  colorOfChain = shape[0];
                                  musicToPlay = toolM;
                                }
                                else{
                                  colorOfChain = shape[1];
                                  musicToPlay = toolM;
                                }
                          if(checkSimilar.length>=2){
                          
                               if(((x-1)>=0)&&(checkSimilar[inde-1]==tile[x-1][y])){
                                //  console.log("forward");
                                  f = colorOfChain.clone();
                                  f.rotation = 90;
                                  f.x = checkSimilar[inde].x+21.5;
                                  f.y = checkSimilar[inde].y+21.5;
                                  ff = f.clone();
                                  connectiongLinesPush(ff,checkSimilar[inde],checkSimilar[inde+1]);
                              }
                                else if(((y-1)>=0)&&(checkSimilar[inde-1]==tile[x][y-1])){
                                //  console.log("bottom");
                                  btm = colorOfChain.clone();
                                  btm.x = checkSimilar[inde-1].x+21.5;
                                  btm.y = checkSimilar[inde-1].y+30.5;
                                  btmm = btm.clone();
                                  connectiongLinesPush(btmm,checkSimilar[inde],checkSimilar[inde+1]);
                              }
                                else if((y+1<=5)&&(checkSimilar[inde-1]==tile[x][y+1])){
                               //  console.log("top");
                                  t = colorOfChain.clone();
                                  t.x = checkSimilar[inde].x+21.5;
                                  t.y = checkSimilar[inde].y+30.5;
                                  tt = t.clone();
                                  connectiongLinesPush(tt,checkSimilar[inde],checkSimilar[inde+1]);
                              }
                              else if(((x+1)<=5)&&((y+1)<=5)&&(checkSimilar[inde-1]==tile[x+1][y+1])){
                                  tb = colorOfChain.clone();
                                  tb.rotation = 135;
                                  tb.x = checkSimilar[inde-1].x+11.5;
                                  tb.y = checkSimilar[inde-1].y+10.5;
                                  tbb = tb.clone();
                               //   console.log("top-backward");
                                  //connectingLines.push(tbb);
                                  connectiongLinesPush(tbb,checkSimilar[inde],checkSimilar[inde+1]);
                              }
                              else if((x+1<=5)&&((y-1)>=0)&&(checkSimilar[inde-1]==tile[x+1][y-1])){
                                  bb = colorOfChain.clone();
                                  bb.rotation = 225;
                                  bb.x = checkSimilar[inde].x+40.5;
                                  bb.y = checkSimilar[inde].y+15.5;
                                  bbb = bb.clone();
                               //   console.log("bottom-backwards");
                                  //connectingLines.push(bbb);
                                  connectiongLinesPush(bbb,checkSimilar[inde],checkSimilar[inde+1]);
                              }
                              else if(((x-1)>=0)&&((y+1)<=5)&&(checkSimilar[inde-1]==tile[x-1][y+1])){
                                  tf = colorOfChain.clone();
                                  
                                  tf.x = checkSimilar[inde].x+12.5;
                                  tf.y = checkSimilar[inde].y+33.5;
                                  tf.rotation = 45;
                                  tff = tf.clone();
                                  //stage.addChild(tff);
                                //  console.log("top-forward");
                                  //connectingLines.push(tff);
                                  connectiongLinesPush(tff,checkSimilar[inde],checkSimilar[inde+1]);
                              }
                              else if(((x-1)>=0)&&((y-1)>=0)&&(checkSimilar[inde-1]==tile[x-1][y-1])){
                                  bf = colorOfChain.clone();
                                  bf.rotation = -45;
                                  bf.x = checkSimilar[inde-1].x+31.5;
                                  bf.y = checkSimilar[inde-1].y+40.5;
                                  bff = bf.clone();
                               //   console.log("bottom-forward");
                                  //connectingLines.push(bff);
                                  connectiongLinesPush(bff,checkSimilar[inde],checkSimilar[inde+1]);
                              }
                              else if(((x+1)<=5)&&(checkSimilar[inde-1]==tile[x+1][y])){
                                  bkw = colorOfChain.clone();
                                  bkw.x = checkSimilar[inde-1].x+21.5;
                                  bkw.y = checkSimilar[inde-1].y+21.5;
                                  bkw.rotation = 90;
                                  bkww = bkw.clone();
                                  
                              //    console.log("backwards");
                                  //connectingLines.push(bkww);
                                  connectiongLinesPush(bkww,checkSimilar[inde],checkSimilar[inde+1]);
                              }
                          }
                        }
                        else{
                        }
                      }
                      function connectiongLinesPush(evt,tile,tile1){
                        if((checkSimilar.length)==(connectingLines.length+1)){

                                  }
                        else if((checkSimilar.length)>(connectingLines.length+1)){
                                ///checkNeighbours();
                                                                    
                                musicToPlay.play();
                                if(touchScreen){
                                  if(tile.name === 4){
                                  rotationDone = false;
                                  tileOver = shape_O[4];
                                  tile.regX = tile.image.width/2;
                                  tile.regY = tile.image.height/2;
                                  tile.x += tile.regX;
                                  tile.y += tile.regY;
                                  TweenMax.to(tile,0.5,{rotation:360,onComplete:resetRotation});

                                }
                                  stage.addChild(evt);
                                }
                                else{
                                     if(tile.name === 3){

                                  tileOver = shape_O[3];
                                  tileOver.x = tile.x;
                                  tileOver.y = tile.y;
                                }
                                else if(tile.name === 4){
                                  rotationDone = false;
                                  tileOver = shape_O[4];
                                  tile.regX = tile.image.width/2;
                                  tile.regY = tile.image.height/2;
                                  tile.x += tile.regX;
                                  tile.y += tile.regY;
                                  TweenMax.to(tile,0.5,{rotation:360,onComplete:resetRotation});

                                }
                                else if(tile.name === 5){
                                  tileOver = shape_O[5];
                                  tileOver.x = tile.x-16;
                                  tileOver.y = tile.y-15;
                                }
                                else if(tile.name === 6){
                                  tileOver = shape_O[6];
                                  tileOver.x = tile.x-6;
                                  tileOver.y = tile.y-5;
                                }
                                else if(tile.name === 7){
                                  tileOver = shape_O[7];
                                  tileOver.x = tile.x-16;
                                  tileOver.y = tile.y-15;
                                }
                                else if(tile.name === 8){
                                  tileOver = shape_O[8];
                                  tileOver.x = tile.x;
                                  tileOver.y = tile.y;
                                }
                                else if(tile.name === 9){
                                  tileOver = shape_O[9];

                                  tileOver.x = tile.x+7.75;
                                  tileOver.y = tile.y+0.5;
                                }
                                
                                tile.tileOverTween = tileOver.clone();
                                stage.addChild(tile.tileOverTween,evt);  
                                if(tile.name != 4)
                                    TweenMax.to(tile.tileOverTween,0.5,{alpha:1});
                                }
                                
                                
                                
                                    connectingLines.push(evt);

                                  }
                                else if((checkSimilar.length)<(connectingLines.length+1)){                          
                                    //console.log(connectingLines[connectingLines.length-1]);
                                    stage.removeChild(connectingLines[connectingLines.length-1]);
                                    connectingLines.pop();
                                    unMatch.play();

                                   }
                                else if((checkSimilar.length)==1){
                                    //checkSimilar[checkSimilar.length-1].shadow = null;
                                    stage.removeChild(connectingLines[0])
                                    connectingLines.pop();
                                    unMatch.play();
                                   }
                            //console.log("checkSimilar.length "+checkSimilar.length);
                            //console.log("connectingLines.length "+connectingLines.length);
                      }
                      function onTileOut(evt){

                      }
                      function onTileClick(evt){
                       // console.log("evt.target.j = "+evt.target.j);
                       if(clickAllowed){
                        bClickM.play();
                        if((evt.target.alpha!=1)&&(alphaExists==false))
                        { 
                            //evt.target.shadow = new createjs.Shadow("#682860", 0, 5, 10);
                            if(touchScreen==false){

                              tileOver = shape_O[evt.target.name];
                                if(evt.target.name === 3){                                  
                                  tileOver.x = evt.target.x;
                                  tileOver.y = evt.target.y;
                                }
                                else if(evt.target.name === 4){
                                  tileOver.x = evt.target.x;
                                  tileOver.y = evt.target.y;
                                }
                                else if(evt.target.name === 5){
                                  tileOver.x = evt.target.x-16;
                                  tileOver.y = evt.target.y-15;
                                }
                                else if(evt.target.name === 6){
                                  tileOver.x = evt.target.x-6;
                                  tileOver.y = evt.target.y-5;
                                }
                                else if(evt.target.name === 7){
                                  tileOver.x = evt.target.x-16;
                                  tileOver.y = evt.target.y-15;
                                }
                                else if(evt.target.name === 8){
                                  tileOver.x = evt.target.x;
                                  tileOver.y = evt.target.y;
                                }
                                else if(evt.target.name === 9){
                                  tileOver.x = evt.target.x+7.75;
                                  tileOver.y = evt.target.y+0.5;
                                }
                              evt.target.tileOverTween = tileOver.clone();
                              stage.addChild(evt.target.tileOverTween);
                              TweenMax.to(evt.target.tileOverTween,0.5,{alpha:1});
                            }
                           alphaExists = true;
                          checkSimilar.push(evt.target);
                            for(var i=0;i<6;i++){
                              for(var j=0;j<6;j++){
                                if((tile[i][j])&&(tile[i][j].name==evt.target.name)||(evt.target.name == 4)||(tile[i][j].name == 3 )||((tile[i][j].name == 4 ))){
                                    TweenMax.to(tile[i][j],0.5,{alpha:1});                                   
                                }
                                else{
                                  TweenMax.to(tile[i][j],0.5,{alpha:0.25});
                                }
                              }
                          }
                        }
                       else if(checkSimilar.length>=12){
                            tilePop.play();
                            alphaExists = false;
                            var target = checkSimilar[2];
                              for(var len = 0; len<checkSimilar.length; ++len)
                              {
                                newTiles.push(checkSimilar[len]);
                                klone.push(checkSimilar[len].clone());
                                stage.addChild(klone[len]);

                               TweenMax.to(klone[len],0.5,{x:target.x,y:target.y,onComplete:removeTheTiles,ease:Linear.easeNone});
                               stage.removeChild(checkSimilar[len],checkSimilar[len].tileOverTween);

                               tile[checkSimilar[len].i][checkSimilar[len].j].defined = false;

                                    if(checkSimilar[len].name == 5){
                                        mudPower = []
                                        mudPower.push(checkSimilar[len]);
                                        whMudAttack = true;
                                    }
                                    else if(checkSimilar[len].name == 6){
                                      gasPower = [];
                                        gasPower.push(checkSimilar[len]);
                                        gasAttacked = true;
                                    }
                                    else if(checkSimilar[len].name == 7){
                                      sonicPower = [];
                                        sonicPower.push(checkSimilar[len]);
                                        sonicAttacked = true;
                                    }
                                    else if(checkSimilar[len].name == 8){
                                      potionPower = [];
                                        potionPower.push(checkSimilar[len]);
                                        potionDrank = true;
                                    }
                                    else if(checkSimilar[len].name == 9){
                                      mushroomPower = [];
                                        mushroomPower.push(checkSimilar[len]);
                                        mushroomEaten = true;
                                    }
                              //  console.log(len+".defined+ = "+tile[checkSimilar[len].i][checkSimilar[len].j].defined);
                                }
                                  if((whMudAttack)&&(mudAttackAllowed))
                                  {
                                      whMudAttack = false;
                                      whMudAttack.deadChecking = true;
                                  if(enemy.exists){
                                     loadingHorse.scaleX = -0.25;                                  
                                     mudAttack.gotoAndPlay("attack");
                                     setTimeout(function(){
                                     mudThrow.gotoAndPlay("attack");
                                     //sonicWave.alpha = 1;
                                      horseSound[2].play();
                                      TweenMax.to(mudThrow,3,{x:enemyContainer.x-150,y:enemyContainer.y-300,onComplete:mudComplete});
                                      //console.log("mudPower = "+mudPower.length);
                                      
                                  },900);

                                  }
                                  else{
                                    loadingHorse.scaleX = 0.25;
                                    targetAnimalMovement(-mudPower.length);
                                     }
                                  }
                                if((gasAttacked)&&(gasAttackAllowed)){                                
                                        gasAttacked = false;
                                        gasAttacked.deadChecking = true;
                                    if(enemy.exists){
                                       loadingHorse.scaleX = -0.25;                                    
                                       gasAttack.gotoAndPlay("attack");
                                       setTimeout(function(){
                                        stage.addChild(heheText);
                                        horseSound[2].play();
                                        TweenMax.to(heheText,1,{alpha:1,onComplete:removeHehe});
                                         gasBomb.gotoAndPlay("attack");
                                         gasBomb.alpha = 1;
                                         zebAM.play();
                                         TweenMax.to(gasBomb,3,{x:gunmanContainer.x-180,onComplete:gasAttackComplete});
                                         //console.log("gasPower = "+gasPower.length);
                                       },1200);
                                    }
                                    else{
                                      loadingHorse.scaleX = 0.25;
                                      targetAnimalMovement(-gasPower.length);
                                    }
                                  //
                                }
                                if((sonicAttacked)&&(sonicAttackAllowed)){
                                      sonicAttacked = false;
                                      sonicAttacked.deadChecking = true;
                                  if((enemy.exists)){
                                     loadingHorse.scaleX = -0.25;
                                  
                                     sonicAttack.gotoAndPlay("fly");
                                     setTimeout(function(){
                                     sonicWave.gotoAndPlay("fly");
                                     sonicWave.alpha = 1;
                                     horseSound[3].play();
                                      TweenMax.to(sonicWave,3,{x:enemyContainer.x-150,onComplete:sonicComplete});
                                  },500);
                                  }
                                  else{
                                    loadingHorse.scaleX = 0.25;
                                    targetAnimalMovement(-sonicPower.length);                                    
                                  }
                                 
                                }
                                if((sonicAttacked)&&(archerAttackAllowed)){

                                  loadingHorse.scaleX = 0.25;
                                  sonicAttacked = false;
                                  if(archerAttack.exists)
                                    enemyAttack(archerAttack);
                                }
                                if((whMudAttack)&&(amazonAttackAllowed)){

                                  loadingHorse.scaleX = 0.25;
                                  whMudAttack = false;
                                  if(amazonAttack.exists)
                                    enemyAttack(amazonAttack);
                                }
                                if((gasAttacked)&&(gunmanAttackAllowed)){

                                  loadingHorse.scaleX = 0.25;
                                  sonicAttacked = false;
                                  if(gunmanAttack.exists)
                                    enemyAttack(gasAttack);
                                }
                                if((mushroomEaten)&&(mushroomEatenAllowed)){
                                  loadingHorse.scaleX = 0.25;
                                    if(mushroomEatenBar.scaleX<50)
                                     TweenMax.to(mushroomEatenBar,1,{scaleX:mushroomEatenBar.scaleX+mushroomPower.length,onComplete:updateTextt});
                                   
                                     if(sonicAttack.isNotDead)
                                      {
                                        TweenMax.to(sonicPowerBar,1,{scaleX:sonicPowerBar.scaleX - mushroomPower.length,onComplete:checkIfHeroDead});
                                        if(archerAttack.exists){
                                          archOnMush.play();
                                          enemyAttack(archerAttack);
                                        }
                                        if(sonicPowerBar.scaleX>100)
                                          sonicPowerBar.scaleX = 100; 
                                      }
                                     if(gasAttack.isNotDead){
                                      TweenMax.to(gasPowerBarShape,1,{scaleX:gasPowerBarShape.scaleX - mushroomPower.length,onComplete:checkIfHeroDead});
                                      if(gunmanAttack.exists)
                                        enemyAttack(gunmanAttack);

                                        if(gasPowerBarShape.scaleX>100)
                                          gasPowerBarShape.scaleX = 100;

                                     }
                                     if(mudAttack.isNotDead){
                                      TweenMax.to(mudPowerBarShape,1,{scaleX:mudPowerBarShape.scaleX - mushroomPower.length,onComplete:checkIfHeroDead});
                                      if(amazonAttack.exists){
                                        indOnMush.play();
                                        enemyAttack(amazonAttack);
                                      }

                                        if(mudPowerBarShape.scaleX>100)
                                          mudPowerBarShape.scaleX = 100;

                                     }
                                    if(archerAttack.isNotDead){
                                       TweenMax.to(horseBar,1,{scaleX:horseBar.scaleX - mushroomPower.length,onComplete:checkIfHeroDead});
                                      if(archerAttack.exists)
                                        enemyAttack(archerAttack);

                                        if(enemyBar.scaleX>100)
                                          enemyBar.scaleX = 100;
                                     }
                                     if(amazonAttack.isNotDead){
                                       TweenMax.to(horseBar,1,{scaleX:horseBar.scaleX - mushroomPower.length,onComplete:checkIfHeroDead});
                                      if(amazonAttack.exists)
                                      enemyAttack(amazonAttack);

                                        if(enemyBar.scaleX>100)
                                          enemyBar.scaleX = 100;
                                     }
                                     if(gunmanAttack.isNotDead){
                                       TweenMax.to(horseBar,1,{scaleX:horseBar.scaleX - mushroomPower.length,onComplete:checkIfHeroDead});
                                      if(gunmanAttack.exists)
                                      enemyAttack(gunmanAttack);

                                        if(enemyBar.scaleX>100)
                                          enemyBar.scaleX = 100;
                                     }
                                      
                                      targetAnimalMovement(-mushroomPower.length);;
                                      
                                      minuteMushroom.scaleX = 0.3;
                                      minuteMushroom.scaleY = 0.3;
                                      minuteMushroom.x = loadingHorse.x+((mushroomPower.length/100) * loadingBarWidth)+15;
                                      minuteMushroom.y = 18;
                                      miniMushroom.alpha = 1;
                                      loadingBarContainer.addChild(minuteMushroom);
                                      mushroomEaten = false;
                                      //console.log("mushroomPower "+mushroomPower.length);
                                      mushroomPower = [];
                                }
                                if((potionDrank)&&(potionDrankAllowed)){
                                      if(potionDrankBar.scaleX < 50)
                                        TweenMax.to(potionDrankBar,1,{scaleX:potionDrankBar.scaleX+potionPower.length,onComplete:updateText});
                                      ///
                                     if(sonicAttack.isNotDead)
                                      {
                                        TweenMax.to(sonicPowerBar,1,{scaleX:sonicPowerBar.scaleX + potionPower.length});
                                        if(archerAttack.exists){
                                          archOnMush.play();
                                          enemyAttack(archerAttack);
                                        }
                                        if(sonicPowerBar.scaleX>100)
                                          sonicPowerBar.scaleX = 100;
                                      }

                                     if(gasAttack.isNotDead){

                                      TweenMax.to(gasPowerBarShape,1,{scaleX:gasPowerBarShape.scaleX+potionPower.length});
                                      if(gunmanAttack.exists)
                                        enemyAttack(gunmanAttack);

                                        if(gasPowerBarShape.scaleX>100)
                                          gasPowerBarShape.scaleX = 100;

                                     }
                                     if(mudAttack.isNotDead){

                                      TweenMax.to(mudPowerBarShape,1,{scaleX:mudPowerBarShape.scaleX+potionPower.length});
                                      if(amazonAttack.exists){
                                        indOnMush.play();
                                        enemyAttack(amazonAttack);
                                      }

                                        if(mudPowerBarShape.scaleX>100)
                                          mudPowerBarShape.scaleX = 100;

                                     }
                                     /////
                                      potionDrank =false;
                                      //console.log("potionPower = "+potionPower.length);
                                      potionPower = [];

                                }                             
                              //  console.log("newTiles.length = "+newTiles.length);
                              
                               while(checkSimilar.length){
                                if(checkSimilar[checkSimilar.length-1].name == 4)
                                 {
                                  transitionNum.pop();
                                //  console.log("transitionNum = "+transitionNum);
                                }
                                else if(checkSimilar[checkSimilar.length-1].name == 3)
                                bombNum.pop();

                                checkSimilar.pop();
                              }
                              for(var len = 0; len<connectingLines.length; ++len)
                              {
                                stage.removeChild(connectingLines[len]);
                              }
                              while(connectingLines.length){
                                connectingLines.pop();
                              }
                              for(var i=0;i<6;i++){
                                for(var j=0;j<6;j++){
                                  if((tile[i][j] != null)&&(tile[i][j].name!=4)&&(tile[i][j].name!=3)){
                                    TweenMax.to(tile[i][j],0.5,{alpha:0.99})
                                  }
                                }
                          }
                          setTimeout(function(){checkIfBtmBox()},500);
                            }
                       else if(checkSimilar.length>2&&checkSimilar.length<12){
                              bClickM.stop();
                              tilePop.play();
                              alphaExists = false;
                              for(var len = 0; len<checkSimilar.length; ++len)
                              {
                                newTiles.push(checkSimilar[len]);
                                mudExplosion.x = checkSimilar[len].x-25;
                                mudExplosion.y = checkSimilar[len].y-15;
                                stage.addChild(mudExplosion.clone());
                                stage.removeChild(mudExplosion);
                                stage.removeChild(checkSimilar[len],checkSimilar[len].tileOverTween);
                                tile[checkSimilar[len].i][checkSimilar[len].j].defined = false;
                              //  console.log(len+".defined+ = "+tile[checkSimilar[len].i][checkSimilar[len].j].defined);
                                   if(checkSimilar[len].name == 5){
                                        mudPower.push(checkSimilar[len]);
                                        whMudAttack = true;
                                    }
                                    else if(checkSimilar[len].name == 6){
                                        gasPower.push(checkSimilar[len]);
                                        gasAttacked = true;
                                    }
                                    else if(checkSimilar[len].name == 7){
                                        sonicPower.push(checkSimilar[len]);
                                        sonicAttacked = true;
                                    }
                                    else if(checkSimilar[len].name == 8){
                                        potionPower.push(checkSimilar[len]);
                                        potionDrank = true;
                                    }
                                    else if(checkSimilar[len].name == 9){
                                        mushroomPower.push(checkSimilar[len]);
                                        mushroomEaten = true;
                                    }
                                }
                              if((whMudAttack)&&(mudAttackAllowed))
                                  {
                                      whMudAttack = false;
                                      whMudAttack.deadChecking = true;
                                  if(enemy.exists){
                                     loadingHorse.scaleX = -0.25;                                  
                                     mudAttack.gotoAndPlay("attack");
                                     setTimeout(function(){
                                     mudThrow.gotoAndPlay("attack");
                                     //sonicWave.alpha = 1;
                                      horseSound[2].play();
                                      TweenMax.to(mudThrow,3,{x:enemyContainer.x-150,y:enemyContainer.y-300,onComplete:mudComplete});
                                      //console.log("mudPower = "+mudPower.length);
                                      
                                  },900);

                                  }
                                  else{
                                    loadingHorse.scaleX = 0.25;
                                    targetAnimalMovement(-mudPower.length);
                                  }
                                  }
                                if((gasAttacked)&&(gasAttackAllowed)){
                                        
                                        gasAttacked = false;
                                        gasAttacked.deadChecking = true;
                                    if(enemy.exists){
                                       loadingHorse.scaleX = -0.25;
                                    
                                       gasAttack.gotoAndPlay("attack");
                                       setTimeout(function(){

                                        stage.addChild(heheText);
                                        horseSound[2].play();
                                        TweenMax.to(heheText,1,{alpha:1,onComplete:removeHehe});
                                         gasBomb.gotoAndPlay("attack");
                                         gasBomb.alpha = 1;
                                         zebAM.play();
                                         TweenMax.to(gasBomb,3,{x:gunmanContainer.x-180,onComplete:gasAttackComplete});
                                         //console.log("gasPower = "+gasPower.length);
                                       },1200);

                                    }
                                    else{
                                      loadingHorse.scaleX = 0.25;
                                      targetAnimalMovement(-gasPower.length);
                                      
                                    }

                                  //
                                }
                                if((sonicAttacked)&&(sonicAttackAllowed)){

                                      sonicAttacked = false;
                                      sonicAttacked.deadChecking = true;
                                      //alert(enemy.exists);
                                  if((enemy.exists)){
                                     loadingHorse.scaleX = -0.25;
                                  
                                     sonicAttack.gotoAndPlay("fly");
                                     setTimeout(function(){
                                     sonicWave.gotoAndPlay("fly");
                                     sonicWave.alpha = 1;
                                     horseSound[randomIntFromInterval(1,3)].play();
                                      TweenMax.to(sonicWave,3,{x:enemyContainer.x-150,onComplete:sonicComplete});
                                      
                                  },500);

                                  }
                                  else{
                                    loadingHorse.scaleX = 0.25;
                                    targetAnimalMovement(-sonicPower.length);
                                    
                                  }
                                 
                                }
                                if((sonicAttacked)&&(archerAttackAllowed)){
                                  //alert("i'm here")
                                  loadingHorse.scaleX = 0.25;

                                  sonicAttacked = false;
                                  if(archerAttack.exists)
                                    enemyAttack(archerAttack);
                                }
                                if((whMudAttack)&&(amazonAttackAllowed)){

                                  loadingHorse.scaleX = 0.25;
                                   // targetAnimalMovement(-mudPower.length);

                                  whMudAttack = false;
                                  if(amazonAttack.exists)
                                    enemyAttack(amazonAttack);
                                }
                                if((gasAttacked)&&(gunmanAttackAllowed)){

                                  loadingHorse.scaleX = 0.25;
                                  sonicAttacked = false;
                                  if(gunmanAttack.exists)
                                    enemyAttack(gasAttack);
                                }

                                if((mushroomEaten)&&(mushroomEatenAllowed)){
                                  loadingHorse.scaleX = 0.25;
                                    if(mushroomEatenBar.scaleX<50)
                                     TweenMax.to(mushroomEatenBar,1,{scaleX:mushroomEatenBar.scaleX+mushroomPower.length,onComplete:updateTextt});
                                    
                                     if(sonicAttack.isNotDead)
                                      {
                                        TweenMax.to(sonicPowerBar,1,{scaleX:sonicPowerBar.scaleX - mushroomPower.length,onComplete:checkIfHeroDead});
                                        if(archerAttack.exists){
                                          archOnMush.play();
                                          enemyAttack(archerAttack);
                                        }
                                        if(sonicPowerBar.scaleX>100)
                                          sonicPowerBar.scaleX = 100;                                        
                                         
                                      }

                                     if(gasAttack.isNotDead){

                                      TweenMax.to(gasPowerBarShape,1,{scaleX:gasPowerBarShape.scaleX - mushroomPower.length,onComplete:checkIfHeroDead});
                                      if(gunmanAttack.exists)
                                        enemyAttack(gunmanAttack);

                                        if(gasPowerBarShape.scaleX>100)
                                          gasPowerBarShape.scaleX = 100;

                                     }
                                     if(mudAttack.isNotDead){

                                      TweenMax.to(mudPowerBarShape,1,{scaleX:mudPowerBarShape.scaleX - mushroomPower.length,onComplete:checkIfHeroDead});
                                      if(amazonAttack.exists){
                                        indOnMush.play();
                                        enemyAttack(amazonAttack);
                                      }
                                        if(mudPowerBarShape.scaleX>100)
                                          mudPowerBarShape.scaleX = 100;
                                     }
                                    if(archerAttack.isNotDead){
                                       TweenMax.to(horseBar,1,{scaleX:horseBar.scaleX - mushroomPower.length,onComplete:checkIfHeroDead});
                                      if(archerAttack.exists)
                                        enemyAttack(archerAttack);

                                        if(enemyBar.scaleX>100)
                                          enemyBar.scaleX = 100;
                                     }
                                     if(amazonAttack.isNotDead){
                                       TweenMax.to(horseBar,1,{scaleX:horseBar.scaleX - mushroomPower.length,onComplete:checkIfHeroDead});
                                      if(amazonAttack.exists)
                                      enemyAttack(amazonAttack);

                                        if(enemyBar.scaleX>100)
                                          enemyBar.scaleX = 100;
                                     }
                                     if(gunmanAttack.isNotDead){
                                       TweenMax.to(horseBar,1,{scaleX:horseBar.scaleX - mushroomPower.length,onComplete:checkIfHeroDead});
                                      if(gunmanAttack.exists)
                                      enemyAttack(gunmanAttack);

                                        if(enemyBar.scaleX>100)
                                          enemyBar.scaleX = 100;
                                     }
                                    
                                      targetAnimalMovement(-mushroomPower.length);
                                      
                                      minuteMushroom.scaleX = 0.3;
                                      minuteMushroom.scaleY = 0.3;
                                      minuteMushroom.x = loadingHorse.x+((mushroomPower.length/100) * loadingBarWidth)+15;
                                      minuteMushroom.y = 18;
                                                                          
                                      miniMushroom.alpha = 1;
                                      loadingBarContainer.addChild(minuteMushroom);
                                                                            
                                      mushroomEaten = false;
                                      //console.log("mushroomPower "+mushroomPower.length);
                                      mushroomPower = [];

                                }
                                if((potionDrank)&&(potionDrankAllowed)){
                                     if(potionDrankBar.scaleX < 50)
                                      TweenMax.to(potionDrankBar,1,{scaleX:potionDrankBar.scaleX+potionPower.length,onComplete:updateText});
                                     if(sonicAttack.isNotDead)
                                      {
                                        TweenMax.to(sonicPowerBar,1,{scaleX:sonicPowerBar.scaleX + potionPower.length});
                                        if(archerAttack.exists){
                                          archOnMush.play();
                                          enemyAttack(archerAttack);
                                        }
                                        if(sonicPowerBar.scaleX>100)
                                          sonicPowerBar.scaleX = 100;
                                      }

                                     if(gasAttack.isNotDead){

                                      TweenMax.to(gasPowerBarShape,1,{scaleX:gasPowerBarShape.scaleX+potionPower.length});
                                      if(gunmanAttack.exists)
                                        enemyAttack(gunmanAttack);

                                        if(gasPowerBarShape.scaleX>100)
                                          gasPowerBarShape.scaleX = 100;

                                     }
                                     if(mudAttack.isNotDead){

                                      TweenMax.to(mudPowerBarShape,1,{scaleX:mudPowerBarShape.scaleX+potionPower.length});
                                      if(amazonAttack.exists){ 
                                          indOnMush.play();
                                          enemyAttack(amazonAttack);
                                        }

                                        if(mudPowerBarShape.scaleX>100)
                                          mudPowerBarShape.scaleX = 100;

                                     }
                                     /////                                   
                                      potionDrank =false;
                                      //console.log("potionPower = "+potionPower.length);
                                      potionPower = [];
                                }
                                                             
                              while(checkSimilar.length){
                                if(checkSimilar[checkSimilar.length-1].name == 4)
                                 {
                                  transitionNum.pop();
                                //  console.log("transitionNum = "+transitionNum.length);
                                }
                                else if(checkSimilar[checkSimilar.length-1].name == 3)
                                bombNum.pop();

                                checkSimilar.pop();
                              }
                              

                              for(var len = 0; len<connectingLines.length; ++len)
                              {
                               
                                stage.removeChild(connectingLines[len]);
                              }

                              while(connectingLines.length){
                                connectingLines.pop();
                              }

                              for(var i=0;i<6;i++){
                                for(var j=0;j<6;j++){
                                  if((tile[i][j] != null)&&(tile[i][j].name!=4)&&(tile[i][j].name!=3)){
                                    //tile[i][j].alpha=0.99;
                                    TweenMax.to(tile[i][j],0.5,{alpha:0.99})
                                  }
                                }
                          }
                          checkIfBtmBox();

                            }
                            else if(checkSimilar.length<=2){
                              if(touchScreen==false){
                                if(checkSimilar[1]!=undefined)
                                  TweenMax.to(checkSimilar[1].tileOverTween,0.5,{alpha:0,onComplete:removeTileOver});
                                if(checkSimilar[0]!=undefined)
                                  TweenMax.to(checkSimilar[0].tileOverTween,0.5,{alpha:0,onComplete:removeTileOver});  
                              }
                              
                                if(checkSimilar)
                              unMatch.play();
                              alphaExists = false;

                              while(checkSimilar.length){
                                if(checkSimilar[checkSimilar.length-1].name == 4)
                                {
                                  transitionNum.pop();
                                  //console.log("transitionNum = "+transitionNum.length);
                                }
                                else if(checkSimilar[checkSimilar.length-1].name == 3)
                                bombNum.pop();                              
                                checkSimilar.pop();
                              }
                              for(var len = 0; len<connectingLines.length; ++len)
                              stage.removeChild(connectingLines[len]);
                              while(connectingLines.length){
                                connectingLines.pop();
                              }
                              for(var i=0;i<6;i++){
                                for(var j=0;j<6;j++){
                                  if((tile[i][j]!=null)&&(tile[i][j].name!=4)&&(tile[i][j].name!=3))
                                    TweenMax.to(tile[i][j],0.5,{alpha:0.99});
                                  //tile[i][j].alpha=0.99;
                                }
                            }                           
                          }                           
                       }
                     }
                     function updateText(){
                                      //potionDrankText.x = 25;
                                      potionDrankText.setText(potionDrankBar.scaleX);
                                          if(this.target.scaleX >= 50){
                                            TweenMax.fromTo(potionBarStar,0.5,{scaleX:1,scaleY:1},{scaleX:1.11,scaleY:1.11,yoyo:true,repeat:-1});
                                            potionBarStarIsBlinking = true;
                                            stars++;
                                            //this.target.scaleX = 0;
                                          }                                        
                                     }
                      function updateTextt(){
                                      //mushroomEatenText.x = 25;
                                      mushroomEatenText.setText(mushroomEatenBar.scaleX);
                                          if(this.target.scaleX >= 50){
                                            TweenMax.fromTo(mushroomBarStar,0.5,{scaleX:1,scaleY:1},{scaleX:1.11,scaleY:1.11,yoyo:true,repeat:-1});
                                            mushroomBarStarIsBlinking = true;
                                            stars++;
                                            //this.target.scaleX = 0;
                                          }
                                       
                                     }
                      function sonicComplete(){

                              sonicWave.x = 50;
                              sonicWave.alpha = 0;
                              if(targetMovingBar.scaleX!= 0.25){
                                targetMovingBar.regX = 50;
                                targetMovingBar.scaleX = 0.25;
                              }
                              moveEnemy(sonicPower.length); 
                              if(archerIsDead == false){

                                archerAttack.gotoAndPlay("hit");
                                archIsHitM.play();
                                console.log(archerPowerBar)
                                TweenMax.to(archerPowerBar,1,{scaleX:archerPowerBar.scaleX-((sonicPower.length/100) * loadingBarWidth),onComplete:checkIfDead});
                              

                              }
                              else{
                                enemy.gotoAndPlay("hit");
                                TweenMax.to(enemyBar,1,{scaleX:enemyBar.scaleX-((sonicPower.length/100) * loadingBarWidth),onComplete:checkIfDead});
                              }
                              
                                                           
                              sonicPower = [];
                      }
                      function gasAttackComplete(){
                              gasBomb.x = 50;
                              gasBomb.alpha = 0;

                              if(targetMovingBar.scaleX != 0.25){
                                targetMovingBar.regX = 50;
                                targetMovingBar.scaleX = 0.25;
                              }

                              moveEnemy(gasPower.length);    
                              if(gunmanIsDead == false){

                                gunmanAttack.gotoAndPlay("hit");
                                MilHit.play();
                                TweenMax.to(gunmanPowerBarShape,1,{scaleX:gunmanPowerBarShape.scaleX-((gasPower.length/100) * loadingBarWidth),onComplete:checkIfDead});
                                
                              }
                              else{
                                enemy.gotoAndPlay("hit");
                                TweenMax.to(enemyBar,1,{scaleX:enemyBar.scaleX-((gasPower.length/100) * loadingBarWidth),onComplete:checkIfDead});
                              }                          
                              gasPower = [];
                      }
                      function removeHehe(){
                        TweenMax.to(this.target,1,{alpha:0,onComplete:removeHeheCompletely});
                      }
                      function removeHeheCompletely(){
                        stage.removeChild(this.target);
                        this.target.alpha = 1;
                      }                      
                      function nextLevelButtonClick(){
                        inGM.stop();
                        bClickM.play();
                        bgMusic.play();
                        TweenMax.killTweensOf(potionBarStar);
                        TweenMax.killTweensOf(mushroomBarStar);
                        nextLevelButton.alpha = 0;
                        stage.removeChild(thinSheet,lightening,levelcompleteContainer);
                        levelcompleteContainer.x = -250;
                        congratulationsText.y = -150;
                        lcMushroom.alpha = 0;
                        lcPotion.alpha = 0;
                        mushroomEatenBar.scaleX = 0;
                        potionDrankBar.scaleX = 0;
                        levelSelectionScreen();
                      }
                      function htpNextButtonClick(){
                        if(clickOnce){
                          clickOnce = false;
                          htpNextButton.alpha = 0;
                          htpNextButton1.alpha = 1;
                          bClickM.play();
                          
                          TweenMax.to(htpTilesContainer,1,{alpha:0,onComplete:showTheGoal});
                          TweenMax.to(panel,1,{alpha:0.2});
                          htpNextButton.alpha = 0;
                          htpNextButton1.alpha = 1;
                          TweenMax.to(htpChainText,0.5,{alpha:0});
                        }
                        
                      }
                      function htpNextButtonClick1(){
                       if(clickOnce1){
                          clickOnce1 = false;
                          bClickM.play();
                          
                          TweenMax.to(htpGoalText,0.5,{alpha:0,onComplete:showTheNotes});
                       }
                      }
                      function htpNextButtonClick2(){
                        if(clickOnce2){
                          clickOnce2 = false;
                          bClickM.play();
                          if(helpMe === false)
                          TweenMax.to(loadingBarContainer,1.25,{x:200,y:100,scaleX:1,scaleY:1});
                          TweenMax.to(showTheNotes,0.5,{alpha:0,onComplete:showImpNotes});
                        }
                      }
                      function htpNextButtonClick3(){
                        if(clickOnce3){
                          clickOnce3 = false;
                          bClickM.play();
                          TweenMax.to(htpContainer,0.75,{alpha:0,onComplete:removeHtp}); 
                        }
                      }
                      function removeHtp(){
                        stage.removeChild(htpContainer);
                        htpTile = [];
                          htpTile = [[5,6,6],[7,4,6],[5,6,7],[6,7,3],[6,5,3],[7,6,5]];
                          htpContainer.removeAllChildren();
                          htpTilesContainer.alpha = 1;
                          htpNoteText.alpha = 1;
                          htpGoalText.alpha = 1;
                          htpContainer.alpha = 1;
                          clickOnce = clickOnce1 = clickOnce2 = clickOnce3 = false;
                          htpTilesContainer.removeAllChildren();                          
                          htpSameTile = [];
                          htpConnectingLines = [];                          
                        if(helpMe === true){
                          stage.addChild(musicButton,musicButtond,iSymbolButton,lvlSSExitButton);
                          helpMe = false;
                          for(var i=1;i<24;i++){
                              TweenMax.to(levelTileContainer[i],1,{alpha:1});
                            }
                        }
                        else{
                            showGrid(); 
                        }
                      }
                      function showImpNotes(){
                        htpNextButton2.alpha = 0;
                        htpNextButton3.alpha = 1;
                         TweenMax.to(htpNoteText,1,{alpha:0});
                         TweenMax.to(htpImpNotes,1,{alpha:1});
                         clickAllowed = true;

                         setTimeout(function(){
                          clickOnce3 = true;
                        },1250);
                      }
                      function showTheNotes(){
                        htpNextButton1.alpha = 0;
                        htpNextButton2.alpha = 1;
                         TweenMax.to(htpNoteText,1,{alpha:1});
                        setTimeout(function(){
                          clickOnce2 = true;
                        },1000);
                      }
                      function showTheGoal(){
                        TweenMax.to(htpGoalText,1,{alpha:1});
                        if(helpMe === false)
                          TweenMax.to(loadingBarContainer,2,{x:270,y:280,scaleX:0.7,scaleY:0.7});

                        setTimeout(function(){
                          clickOnce1 = true;
                        },1000);
                      }
                      function checkIfDead(){

                        if(this.target.scaleX<=0){
                          //alert(this.target.enemy);
                          if(this.target.enemy === gunmanAttack){
                            gunmanIsDead = true;
                            gunmanDead[randomIntFromInterval(1,4)].play();
                          }
                          else if(this.target.enemy === archerAttack){
                            archerIsDead = true;
                            archDead.play();
                          }
                          else if(this.target.enemy === amazonAttack){
                            indianIsDead = true;
                            indianIsHit[1].play();
                          }
                          this.target.enemy.exists=false;
                          TweenMax.fromTo(this.target.container,0.25,{alpha:1},{alpha:0,yoyo:true,repeat:3,onComplete:removeMiniIcon});
                          if(enemy.exists == false)
                            stars++;
                        }
                        else{
                          enemyAttack(this.target.enemy);
                        }
                      }
                      function removeMiniIcon(){
                            if(gameOverHappened){
                              setTimeout(function(){
                              for(var i=0;i<6;i++){
                                  for(var j=0;j<6;j++){
                                     stage.removeChild(tile[i][j]);
                                  }
                                }
                              },800);
                            }
                            stage.removeChild(this.target);
                            if(this.target.miniIcon != undefined)
                              this.target.miniIcon.alpha = 0.12;
                      }
                      function mudComplete(){
                              mudThrow.x = 50;
                              mudThrow.y = 60;
                              if(targetMovingBar.scaleX != 0.25){
                                targetMovingBar.regX = 50;
                                targetMovingBar.scaleX = 0.25;
                              }
                              if(indianIsDead == false){
                                mudThrow.gotoAndPlay("stand");
                                indianIsHit[randomIntFromInterval(1,4)].play();
                                amazonAttack.gotoAndPlay("hit");
                                moveEnemy(mudPower.length);
                                TweenMax.to(amazonPowerBarShape,1,{scaleX:amazonPowerBarShape.scaleX-((mudPower.length/100) * loadingBarWidth),onComplete:checkIfDead});
                              }
                              else{
                                enemy.gotoAndPlay('hit');
                                TweenMax.to(enemyBar,1,{scaleX:enemyBar.scaleX-((mudPower.length/100) * loadingBarWidth),onComplete:checkIfDead});
                              
                              }
                              
                              mudPower = [];
                      }
                      function targetAnimalMovement(powered){
                        TweenMax.to(targetMovingBar,2,{x:targetMovingBar.x-((powered/100) * loadingBarWidth),delay:1,onComplete:targetMovementComplete});
                        TweenMax.delayedCall(0.9, myFunction);
                        function myFunction(){
                          targetMovingBar.gotoAndPlay("walk");
                        }
                      }
                      function targetMovementComplete(){
                        TweenMax.to(minuteMushroom,1,{x:10,y:-70,alpha:0,onComplete:removeMinuteMushroom})
                        setStartOfDestinationBar();
                        this.target.gotoAndStop(0);
                      }
                      function removeMinuteMushroom(){
                        this.target.alpha = 1;
                        loadingBarContainer.removeChild(this.target);
                      }
                      function enemyAttack(hunter){
                        if(hunter == gunmanAttack){
                          setTimeout(function(){
                            fire.play();
                            milAttack[randomIntFromInterval(1,4)].play();
                            hunter.gotoAndPlay("attack");
                            gunmanAttackComplete();

                          },500);  
                        }
                        else{
                           setTimeout(function(){
                            if(hunter == archerAttack)
                              arrowShot.play();
                            else if(hunter == amazonAttack)
                              javelinShot.play();
                            hunter.gotoAndPlay("attack");
                            TweenMax.to(hunter.weapon,1,{x:-500,onComplete:hunterAttackComplete});
                          },500);  
                        }
                      }
                      function moveEnemy(powered){
                        if(miniArcher.exists)
                          TweenMax.to(enemyMove,1,{x:enemyMove.x-((powered/100) * loadingBarWidth),onComplete:setStartOfOverBar});
                        if(miniGunman.exists)
                          TweenMax.to(enemyMove,1,{x:enemyMove.x-((powered/100) * loadingBarWidth),onComplete:setStartOfOverBar});
                        if(miniAmazon.exists)
                          TweenMax.to(enemyMove,1,{x:enemyMove.x-((powered/100) * loadingBarWidth),onComplete:setStartOfOverBar});
                      }
                      function gunmanAttackComplete(){                        
                        var k = randomIntFromInterval(5,11);
                        gasAttack.gotoAndPlay("hit");
                        gasAttack.deadChecking = false;
                        targetMovingBar.regX = 50;
                        targetMovingBar.scaleX = 0.25;
                         setTimeout(function(){horseSound[1].play()},1000);
                        TweenMax.to(gasPowerBarShape,1,{scaleX:gasPowerBarShape.scaleX-k,onComplete:checkIfHeroDead});
                        moveEnemy(-k);
                      }
                      function hunterAttackComplete(){
                        if(this.target == spear){
                          indianAttackM[randomIntFromInterval(1,4)].play();
                          this.target.x = 50;
                        }
                        else if(this.target == arrow){
                          archerAttackM[randomIntFromInterval(1,2)].play();
                          this.target.x = -20;
                        }
                        else {
                          this.target.x = -20;
                        }
                        var k = randomIntFromInterval(5,11);
                        //alert(k);
                        stage.removeChild(this.target);
                        this.target.HorseAttacked.gotoAndPlay("hit");
                        this.target.HorseAttacked.deadChecking = false;
                        targetMovingBar.regX = 50;
                        targetMovingBar.scaleX = 0.25;
                        TweenMax.to(this.target.toattackbar,1,{scaleX:this.target.toattackbar.scaleX-k,onComplete:checkIfHeroDead});
                        moveEnemy(-k);
                      }
                      function checkIfHeroDead(){
                        if(this.target.scaleX<=0){
                          if(enemy === gunmanAttack)
                            milWon[randomIntFromInterval(1,3)].play();
                          else if(enemy === archerAttack)
                            archWon[randomIntFromInterval(1,3)].play();
                          else if(enemy === amazonAttack )
                            indianWon.play();

                          clickAllowed = false;
                          enemy.exists = false;
                          gameOverHappened = true;
                          gameOverr();
                          TweenMax.fromTo(this.target.container,0.25,{alpha:1},{alpha:0,yoyo:true,repeat:3,onComplete:removeMiniIcon});
                        }
                      }
                      function checkIfBtmBox(){

                          for(var len =0 ; len<newTiles.length ; ++len){
                            
                            xx=newTiles[len].i;
                            yy=newTiles[len].j-1;
                         //   console.log("xx ="+xx,"yy ="+yy);
                            var gg = 0;
                            var count = 0;
                            var ni=1;
                           
                             while((tile[xx][yy-gg] !=undefined)&&(tile[xx][yy-gg].defined==true)){
                          //   console.log("inside while xx ="+xx,"yy-gg ="+(yy-gg));
                              //internal loop ma jab true recive ho jae then kia karna ha. 
                              //then check karna ha block next to true. if it is false then move it once again that is ni++ 
                              // but what if the even next block is false then what we have to do is ni++ again till we recieve 
                              //another true block whose nextblock is true as well.
                                while((tile[xx][yy].defined==true)&&(tile[xx][yy+ni] !=undefined)){
                                  if((tile[xx][yy+ni].defined == false )){
                             //       console.log("ni"+ni);
                                    ++ni;
                                  }
                                  else if((tile[xx][yy+ni].defined == true )){
                                    var j =1;
                                    while(j<6){
                                      while((tile[xx][yy+j+ni]!=undefined)&&(tile[xx][yy+j+ni].defined == false)){
                                      ++ni;
                                    }
                                    
                                      j++;
                                    }
                                    break;

                                  }
                                  else{
                                    ++ni;
                                  }

                                }
                                TweenMax.to(tile[xx][yy-gg],1,{y:tile[xx][yy+(ni-1)-gg].y, ease:Bounce.easeOut});
                                ni=1;
                                gg++;
                             
                              k = ni;
                             }
                          }

                      while(newTiles.length){
                        newTiles.pop();
                      }
                      clickAllowed = false;
                      setTimeout(function(){corectBitmaps()},1050);

                      }
                      function corectBitmaps(){
                       for(var i=5;i>-1;i--){
                          for(var j=5;j>-1;j--){
                              if( (tile[i][j]!=null)&&(tile[i][j].x != 353+(60*i) || tile[i][j].y != 180+(60*j) )){
                                  //console.log("swapped"+tile[i][j].swapped);
                                  var newX=(tile[i][j].x-353)/60;
                                  var newY=(tile[i][j].y-180)/60;
                                 // console.log("bitmap to be shifted ,original was "+i+j+"new is "+newX+newY);
                                  tile[newX][newY]=tile[i][j].clone();
                                  tile[newX][newY].i=newX;
                                  tile[newX][newY].j=newY;
                                 // console.log(tile[newX][newY].name);
                                  //console.log(tile[i][j].name);                                  
                                  tile[newX][newY].x = 353+(60*newX);
                                  tile[newX][newY].y = 180+(60*newY);
                                  if((tile[i][j] != null)&&(tile[i][j].name!=4)&&(tile[i][j].name!=3)){
                                    tile[newX][newY].alpha = 0.99;
                                    tile[newX][newY].on("click",onTileClick);
                                  }
                                  tile[newX][newY].on("rollover",onTileOver);
                                  //tile[newX][newY].on("rollout",onTileOut);
                                  tile[newX][newY].defined = true;
                                  tile[newX][newY].on("pressmove", function(evt){
                                    if(evt.target.alpha ==1){
                                      
                                if(scaleFactor<1){
                                 var o = stage.getObjectUnderPoint(evt.stageX*1/scaleFactor, evt.stageY*1/scaleFactor);
                                 o.dispatchEvent("rollover");
                                  
                                 }else{
                                 var o = stage.getObjectUnderPoint(evt.stageX, evt.stageY);
                                   o.dispatchEvent("rollover");
                                 }
                                    }
                                  //console.log("GET", o, evt.stageX, evt.stageY);
                              });
                                  
                                  tile[newX][newY].tweened = false;
                                  stage.addChild(tile[newX][newY]);
                                   stage.removeChild(tile[i][j],tile[i][j].tileOverTween);
                                  tile[i][j]=null;
                                }
                               else if(tile[i][j].defined == false){
                                tile[i][j] = null;
                               }
                          }
                       }
                       brandNewTiles();
                      }
                      function createTile() {                              
                              var bg = new createjs.Shape();
                              bg.graphics.setStrokeStyle(0.5).beginStroke("blue").beginFill('#CCCCCC').drawRect(0, 0, 60, 60).endFill();
                              bg.alpha = 0.25;
                              return bg;
                            }
                      function createDarkTile(){
                              var bg = new createjs.Shape();
                              bg.graphics.setStrokeStyle(0.5).beginStroke("blue").beginFill('#black').drawRect(0, 0, 60, 60).endFill();
                              bg.alpha = 0.25;
                              return bg;
                      }                      
                      function brandNewTiles(){
                        for(var i=0;i<6;i++){
                          for(var j=0;j<6;j++){                             
                           if(tile[i][j] == null){
                               grid[i][j] = randomIntFromInterval(3,9);
                             if((grid[i][j]==4)&&(transitionNum.length <2)){
                                  transitionNum.push(grid[i][j]);
                                  //console.log("inside the brandNewTiles transitonNum = "+transitionNum.length);
                                }
                                else if(grid[i][j]==4){
                                    grid[i][j] = randomIntFromInterval(5,9);
                                }
                                else if((grid[i][j]==3)&&(bombNum.length <=0)){
                                  bombNum.push(grid[i][j]);
                                }
                                else if(grid[i][j]==3){
                                    grid[i][j] = randomIntFromInterval(5,9);   
                                }
                             
                               var number = grid[i][j];
                              tile[i][j] = shape[number].clone();
                              tile[i][j].i=i;
                              tile[i][j].j=j;
                              tile[i][j].name = number;
                              //console.log(tile[i][j].name);
                              tile[i][j].x = 353+(60*i);
                              tile[i][j].y = 130;
                              
                              if((tile[i][j].name == 4)||(tile[i][j].name == 3)){
                                tile[i][j].alpha = 1;
                              }
                              else{
                                tile[i][j].alpha = 0.99;
                                tile[i][j].addEventListener("click",onTileClick);
                              }

                              tile[i][j].defined = true;
                              tile[i][j].tweened = false;

                              tile[i][j].on("rollover",onTileOver);
                              tile[i][j].on("pressmove", function(evt){
                                if(evt.target.alpha ==1){

                                if(scaleFactor<1){
                                 var o = stage.getObjectUnderPoint(evt.stageX*1/scaleFactor, evt.stageY*1/scaleFactor);
                                 o.dispatchEvent("rollover");
                                  
                                 }else{
                                 var o = stage.getObjectUnderPoint(evt.stageX, evt.stageY);
                                   o.dispatchEvent("rollover");
                                 }
                                }
                              });
                               
                             // tile[i][j].addEventListener("rollout",onTileOut);
                                stage.addChild(tile[i][j]);
                                newTilesTween = TweenMax.to(tile[i][j],1,{y:180+(60*j),onComplete:updateCordinates,ease:Bounce.easeOut});
                                newTilesTween.play();
                           }
                          }
                        }
                        gemSpawn.play();
                           setTimeout(function(){clickAllowed = true},1050);
                      }
                      function updateCordinates(){                       
                        mudExplosion1.x = this.target.x-25;
                        mudExplosion1.y = this.target.y-15;
                        stage.addChild(mudExplosion1.clone());
                        stage.removeChild(mudExplosion1);                          
                      }
                      function birdAttack(){                        

                        TweenMax.to(projectileText,1,{alpha:0});
                        setTimeout(function(){
                          stage.removeChild(projectileText);
                          projectileText.x = -200;
                          projectileText.alpha = 1;
                        },1050);
                        TweenMax.to(this.target,1.5,{x:enemyContainer.x+80,y:enemyContainer.y+25,delay:0.5,onComplete:birdAttackComplete,ease:Bounce.easeOut});
                      }
                      function birdAttackComplete(){
                        if(enemy == archerAttack)
                          archIsHitM.play();
                        else if(enemy == gunmanAttack)
                          MilHit.play();
                        else if(enemy == amazonAttack)
                          indianIsHit[randomIntFromInterval(1,4)].play();
                        stage.removeChild(this.target);
                        this.target.alpha = 0;
                        
                        mudExplosion.x = this.target.x-25;
                        mudExplosion.y = this.target.y-15;
                        stage.addChild(mudExplosion.clone());
                        mudExplosion.gotoAndPlay("boom");
                        stage.removeChild(mudExplosion);
                        this.target.x = 0;

                              enemy.gotoAndPlay("hit");
                              if(targetMovingBar.scaleX != 0.25){
                                targetMovingBar.regX = 50;
                                targetMovingBar.scaleX = 0.25;
                              }
                              moveEnemy(12);
                              TweenMax.to(enemyBar,1,{scaleX:enemyBar.scaleX-((8/100) * loadingBarWidth),onComplete:checkIfDead});
                      }
                      function removeTileOver(){
                        stage.removeChild(this.target);
                      }
                      function removeTheTiles(){
                        stage.removeChild(this.target,this.target.tileOverTween);
                        mudExplosion.x = this.target.x-25;
                        mudExplosion.y = this.target.y-15;
                        stage.addChild(mudExplosion.clone());
                        mudExplosion.gotoAndPlay("boom");
                        stage.removeChild(mudExplosion);
                        klone.pop();
                                if((enemy.exists)&&(klone.length==2)){
                                  
                                    var i = this.target.name;
                                    
                                  if((i===undefined)||(i<5)){
                                    i=5;
                                  }
                                  birdie[i].scaleX = 0.7;
                                  birdie[i].scaleY = 0.7;
                                  birdie[i].alpha = 1;
                                     clickAllowed = false;
                                     projectileSound.play();
                                     stage.addChild(birdie[i],projectileText);
                                     TweenMax.to(projectileText,1,{x:200});
                                     birdie[i].addEventListener("click",birdieClick);
                                     this.target.alpha = 0;
                                     TweenMax.to(birdie[i],3,{x:this.target.x,y:this.target.y,onComplete:birdAttack});
                              }
                              else{
                                 loadingHorse.scaleX = 0.25;
                                 targetAnimalMovement(-3);
                              }

                      }
                      function birdieClick(){
                       bClickM.play();
                      }
                      function checkNeighbours(evt){
                      //  console.log(evt);
                        var x = evt.i;
                        var y = evt.j;
                        //console.log(x);
                       
                      var inde = checkSimilar.indexOf(evt);
                      //console.log(inde);
                          
                               if(((x-1)>=0)&&(checkSimilar[inde-1]==tile[x-1][y])){
                                  //console.log("forward checkNeighbours");
                                  return true;
                              }
                                else if(((y-1)>=0)&&(checkSimilar[inde-1]==tile[x][y-1])){
                                 // console.log("bottom checkNeighbours");
                                 // btm = colorOfChain.clone();
                                  return true;
                              }
                                else if((y+1<=5)&&(checkSimilar[inde-1]==tile[x][y+1])){
                                 // console.log("top checkNeighbours");
                                  return true;
                              }
                              else if(((x+1)<=5)&&((y+1)<=5)&&(checkSimilar[inde-1]==tile[x+1][y+1])){
                                 // console.log("top-backward checkNeighbours");
                                  return true;
                              }
                              else if((x+1<=5)&&((y-1)>=0)&&(checkSimilar[inde-1]==tile[x+1][y-1])){
                                 // console.log("bottom-backwards checkNeighbours");
                                  return true;
                              }
                              else if(((x-1)>=0)&&((y+1)<=5)&&(checkSimilar[inde-1]==tile[x-1][y+1])){
                                 // console.log("top-forward checkNeighbours");
                                  return true;
                              }
                              else if(((x-1)>=0)&&((y-1)>=0)&&(checkSimilar[inde-1]==tile[x-1][y-1])){
                                 // console.log("bottom-forward checkNeighbours");
                                  return true;
                              }
                              else if(((x+1)<=5)&&(checkSimilar[inde-1]==tile[x+1][y])){
                                 // console.log("backwards checkNeighbours");
                                  return true;
                              }
                      }
                       function stagePressHandler(e){
                            //console.log(parseInt(e.stageX-canvas.width)+" ::: "+parseInt(e.stageY-canvas.height));
                        }//
                        /////////////////////////ticker/////////////////////////////////////
                        function tick(){
                        stage.update();
                            }
        </script>
  </html>